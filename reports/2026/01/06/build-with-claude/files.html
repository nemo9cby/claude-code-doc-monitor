<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>build-with-claude/files - Diff Report</title>
    <link rel="stylesheet" href="../../css/diff.css">
    <style>
        :root {
            --bg-color: #1a1a2e;
            --card-bg: #16213e;
            --text-color: #eee;
            --accent: #0f3460;
            --add-bg: #1a4d1a;
            --del-bg: #4d1a1a;
            --add-text: #4ade80;
            --del-text: #f87171;
        }
        @media (prefers-color-scheme: light) {
            :root {
                --bg-color: #f5f5f5;
                --card-bg: #fff;
                --text-color: #333;
                --accent: #e0e0e0;
                --add-bg: #d4edda;
                --del-bg: #f8d7da;
                --add-text: #155724;
                --del-text: #721c24;
            }
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 2rem;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { margin-bottom: 2rem; }
        h1 { font-size: 1.5rem; margin-bottom: 0.5rem; }
        .meta { color: #888; font-size: 0.9rem; }
        .summary {
            background: var(--card-bg);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            display: flex;
            gap: 2rem;
        }
        .stat { display: flex; align-items: center; gap: 0.5rem; }
        .stat.added { color: var(--add-text); }
        .stat.removed { color: var(--del-text); }
        .analysis {
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid #8b5cf6;
        }
        .analysis-header {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #8b5cf6;
        }
        .analysis-content {
            white-space: pre-wrap;
            font-size: 0.95rem;
            line-height: 1.7;
        }
        .diff-container {
            background: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
        }
        .diff-header {
            background: var(--accent);
            padding: 0.75rem 1rem;
            font-weight: 600;
        }
        .diff-content {
            padding: 1rem;
            overflow-x: auto;
        }
        .diff-content ins {
            background: var(--add-bg);
            color: var(--add-text);
            text-decoration: none;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        .diff-content del {
            background: var(--del-bg);
            color: var(--del-text);
            text-decoration: line-through;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        pre {
            background: var(--accent);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.85rem;
            margin-top: 2rem;
        }
        a { color: #60a5fa; }
        .back-link { margin-bottom: 1rem; display: inline-block; }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">&larr; Back to daily report</a>

        <header>
            <h1>build-with-claude/files.md</h1>
            <p class="meta">Changed on 2026-01-06 14:35:17 UTC</p>
        </header>

        <div class="summary">
            <div class="stat added">
                <span>+253</span> lines added
            </div>
            <div class="stat removed">
                <span>-0</span> lines removed
            </div>
        </div>

        
        <div class="analysis">
            <div class="analysis-header">ðŸ¤– AI Analysis</div>
            <div class="analysis-content"># Documentation Change Analysis

## Summary
The documentation for the Files API has been newly introduced, providing developers with the ability to upload, manage, and reference files without the need for repeated uploads. This enhancement streamlines interactions with the Claude API, particularly for tasks involving file inputs and outputs.

## Key Changes
- **Introduction of Files API**: A new section detailing the functionality of the Files API, allowing file uploads and management.
- **Supported Models**: Clarification on which Claude models support file types, enhancing developers&#39; understanding of compatibility.
- **File Operations**: Detailed instructions on how to upload, reference, manage, and delete files, including code examples in multiple programming languages.
- **File Type Support**: Specification of supported file types and their corresponding content block types, aiding developers in file handling.
- **Error Handling and Limits**: Inclusion of common errors and storage limits, providing developers with critical information for troubleshooting and planning.

## Impact
**High**: This change introduces a significant new feature that enhances the usability of the Claude API, allowing for more efficient file management and integration into applications. Developers can now streamline their workflows, reducing redundancy and improving performance.</div>
        </div>
        

        <div class="diff-container">
            <div class="diff-header">Visual Diff</div>
            <div class="diff-content"><ins style="background:#e6ffe6;"># Files API&para;<br>&para;<br>---&para;<br>&para;<br>The Files API lets you upload and manage files to use with the Claude API without re-uploading content with each request. This is particularly useful when using the [code execution tool](/docs/en/agents-and-tools/tool-use/code-execution-tool) to provide inputs (e.g. datasets and documents) and then download outputs (e.g. charts). You can also use the Files API to prevent having to continually re-upload frequently used documents and images across multiple API calls. You can [explore the API reference directly](/docs/en/api/files-create), in addition to this guide.&para;<br>&para;<br>&lt;Note&gt;&para;<br>The Files API is currently in beta. Please reach out through our [feedback form](https://forms.gle/tisHyierGwgN4DUE9) to share your experience with the Files API.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>## Supported models&para;<br>&para;<br>Referencing a `file_id` in a Messages request is supported in all models that support the given file type. For example, [images](/docs/en/build-with-claude/vision) are supported in all Claude 3+ models, [PDFs](/docs/en/build-with-claude/pdf-support) in all Claude 3.5+ models, and [various other file types](/docs/en/agents-and-tools/tool-use/code-execution-tool#supported-file-types) for the code execution tool in Claude Haiku 4.5 plus all Claude 3.7+ models.&para;<br>&para;<br>The Files API is currently not supported on Amazon Bedrock or Google Vertex AI.&para;<br>&para;<br>## How the Files API works&para;<br>&para;<br>The Files API provides a simple create-once, use-many-times approach for working with files:&para;<br>&para;<br>- **Upload files** to our secure storage and receive a unique `file_id`&para;<br>- **Download files** that are created from skills or the code execution tool&para;<br>- **Reference files** in [Messages](/docs/en/api/messages) requests using the `file_id` instead of re-uploading content&para;<br>- **Manage your files** with list, retrieve, and delete operations&para;<br>&para;<br>## How to use the Files API&para;<br>&para;<br>&lt;Note&gt;&para;<br>To use the Files API, you'll need to include the beta feature header: `anthropic-beta: files-api-2025-04-14`.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>### Uploading a file&para;<br>&para;<br>Upload a file to be referenced in future API calls:&para;<br>&para;<br>&lt;CodeGroup&gt;&para;<br>```bash Shell&para;<br>curl -X POST https://api.anthropic.com/v1/files \&para;<br>  -H "x-api-key: $ANTHROPIC_API_KEY" \&para;<br>  -H "anthropic-version: 2023-06-01" \&para;<br>  -H "anthropic-beta: files-api-2025-04-14" \&para;<br>  -F "file=@/path/to/document.pdf"&para;<br>```&para;<br>&para;<br>```python Python&para;<br>import anthropic&para;<br>&para;<br>client = anthropic.Anthropic()&para;<br>client.beta.files.upload(&para;<br>  file=("document.pdf", open("/path/to/document.pdf", "rb"), "application/pdf"),&para;<br>)&para;<br>```&para;<br>&para;<br>```typescript TypeScript&para;<br>import Anthropic, { toFile } from '@anthropic-ai/sdk';&para;<br>import fs from "fs";&para;<br>&para;<br>const anthropic = new Anthropic();&para;<br>&para;<br>await anthropic.beta.files.upload({&para;<br>  file: await toFile(fs.createReadStream('/path/to/document.pdf'), undefined, { type: 'application/pdf' })&para;<br>}, {&para;<br>  betas: ['files-api-2025-04-14']&para;<br>});&para;<br>```&para;<br>&lt;/CodeGroup&gt;&para;<br>&para;<br>The response from uploading a file will include:&para;<br>&para;<br>```json&para;<br>{&para;<br>  "id": "file_011CNha8iCJcU1wXNR6q4V8w",&para;<br>  "type": "file",&para;<br>  "filename": "document.pdf",&para;<br>  "mime_type": "application/pdf",&para;<br>  "size_bytes": 1024000,&para;<br>  "created_at": "2025-01-01T00:00:00Z",&para;<br>  "downloadable": false&para;<br>}&para;<br>```&para;<br>&para;<br>### Using a file in messages&para;<br>&para;<br>Once uploaded, reference the file using its `file_id`:&para;<br>&para;<br>&lt;CodeGroup&gt;&para;<br>```bash Shell&para;<br>curl -X POST https://api.anthropic.com/v1/messages \&para;<br>  -H "x-api-key: $ANTHROPIC_API_KEY" \&para;<br>  -H "anthropic-version: 2023-06-01" \&para;<br>  -H "anthropic-beta: files-api-2025-04-14" \&para;<br>  -H "content-type: application/json" \&para;<br>  -d '{&para;<br>    "model": "claude-sonnet-4-5",&para;<br>    "max_tokens": 1024,&para;<br>    "messages": [&para;<br>      {&para;<br>        "role": "user",&para;<br>        "content": [&para;<br>          {&para;<br>            "type": "text",&para;<br>            "text": "Please summarize this document for me."          &para;<br>          },&para;<br>          {&para;<br>            "type": "document",&para;<br>            "source": {&para;<br>              "type": "file",&para;<br>              "file_id": "file_011CNha8iCJcU1wXNR6q4V8w"&para;<br>            }&para;<br>          }&para;<br>        ]&para;<br>      }&para;<br>    ]&para;<br>  }'&para;<br>```&para;<br>&para;<br>```python Python&para;<br>import anthropic&para;<br>&para;<br>client = anthropic.Anthropic()&para;<br>&para;<br>response = client.beta.messages.create(&para;<br>    model="claude-sonnet-4-5",&para;<br>    max_tokens=1024,&para;<br>    messages=[&para;<br>        {&para;<br>            "role": "user",&para;<br>            "content": [&para;<br>                {&para;<br>                    "type": "text",&para;<br>                    "text": "Please summarize this document for me."&para;<br>                },&para;<br>                {&para;<br>                    "type": "document",&para;<br>                    "source": {&para;<br>                        "type": "file",&para;<br>                        "file_id": "file_011CNha8iCJcU1wXNR6q4V8w"&para;<br>                    }&para;<br>                }&para;<br>            ]&para;<br>        }&para;<br>    ],&para;<br>    betas=["files-api-2025-04-14"],&para;<br>)&para;<br>print(response)&para;<br>```&para;<br>&para;<br>```typescript TypeScript&para;<br>import { Anthropic } from '@anthropic-ai/sdk';&para;<br>&para;<br>const anthropic = new Anthropic();&para;<br>&para;<br>const response = await anthropic.beta.messages.create({&para;<br>  model: "claude-sonnet-4-5",&para;<br>  max_tokens: 1024,&para;<br>  messages: [&para;<br>    {&para;<br>      role: "user",&para;<br>      content: [&para;<br>        {&para;<br>          type: "text",&para;<br>          text: "Please summarize this document for me."&para;<br>        },&para;<br>        {&para;<br>          type: "document",&para;<br>          source: {&para;<br>            type: "file",&para;<br>            file_id: "file_011CNha8iCJcU1wXNR6q4V8w"&para;<br>          }&para;<br>        }&para;<br>      ]&para;<br>    }&para;<br>  ],&para;<br>  betas: ["files-api-2025-04-14"],&para;<br>});&para;<br>&para;<br>console.log(response);&para;<br>```&para;<br>&lt;/CodeGroup&gt;&para;<br>&para;<br>### File types and content blocks&para;<br>&para;<br>The Files API supports different file types that correspond to different content block types:&para;<br>&para;<br>| File Type | MIME Type | Content Block Type | Use Case |&para;<br>| :--- | :--- | :--- | :--- |&para;<br>| PDF | `application/pdf` | `document` | Text analysis, document processing |&para;<br>| Plain text | `text/plain` | `document` | Text analysis, processing |&para;<br>| Images | `image/jpeg`, `image/png`, `image/gif`, `image/webp` | `image` | Image analysis, visual tasks |&para;<br>| [Datasets, others](/docs/en/agents-and-tools/tool-use/code-execution-tool#supported-file-types) | Varies | `container_upload` | Analyze data, create visualizations  |&para;<br>&para;<br>### Working with other file formats&para;<br>&para;<br>For file types that are not supported as `document` blocks (.csv, .txt, .md, .docx, .xlsx), convert the files to plain text, and include the content directly in your message:&para;<br>&para;<br>&lt;CodeGroup&gt;&para;<br>```bash Shell&para;<br># Example: Reading a text file and sending it as plain text&para;<br># Note: For files with special characters, consider base64 encoding&para;<br>TEXT_CONTENT=$(cat document.txt | jq -Rs .)&para;<br>&para;<br>curl https://api.anthropic.com/v1/messages \&para;<br>  -H "content-type: application/json" \&para;<br>  -H "x-api-key: $ANTHROPIC_API_KEY" \&para;<br>  -H "anthropic-version: 2023-06-01" \&para;<br>  -d @- &lt;&lt;EOF&para;<br>{&para;<br>  "model": "claude-sonnet-4-5",&para;<br>  "max_tokens": 1024,&para;<br>  "messages": [&para;<br>    {&para;<br>      "role": "user",&para;<br>      "content": [&para;<br>        {&para;<br>          "type": "text",&para;<br>          "text": "Here's the document content:\n\n${TEXT_CONTENT}\n\nPlease summarize this document."&para;<br>        }&para;<br>      ]&para;<br>    }&para;<br>  ]&para;<br>}&para;<br>EOF&para;<br>```&para;<br>&para;<br>```python Python&para;<br>import pandas as pd&para;<br>import anthropic&para;<br>&para;<br>client = anthropic.Anthropic()&para;<br>&para;<br># Example: Reading a CSV file&para;<br>df = pd.read_csv('data.csv')&para;<br>csv_content = df.to_string()&para;<br>&para;<br># Send as plain text in the message&para;<br>response = client.messages.create(&para;<br>    model="claude-sonnet-4-5",&para;<br>    max_tokens=1024,&para;<br>    messages=[&para;<br>        {&para;<br>            "role": "user",&para;<br>            "content": [&para;<br>                {&para;<br>                    "type": "text",&para;<br>                    "text": f"Here's the CSV data:\n\n{csv_content}\n\nPlease analyze this data."&para;<br>                }&para;<br>            ]&para;<br>        }&para;<br>    ]&para;<br>)&para;<br>&para;<br>print(response.content[0].text)&para;<br>```&para;<br>&para;<br>```typescript TypeScript&para;<br>import { Anthropic } from '@anthropic-ai/sdk';&para;<br>import fs from 'fs';&para;<br>&para;<br>const anthropic = new Anthropic();&para;<br>&para;<br>async function analyzeDocument() {&para;<br>  // Example: Reading a text file&para;<br>  const textContent = fs.readFileSync('document.txt', 'utf-8');&para;<br>&para;<br>  // Send as plain text in the message&para;<br>  const response = await anthropic.messages.create({&para;<br>    model: 'claude-sonnet-4-5',&para;<br>    max_tokens: 1024,&para;<br>    messages: [&para;<br>      {&para;<br>        role: 'user',&para;<br>        content: [&para;<br>          {&para;<br>            type: 'text',&para;<br>            text: `Here's the document content:\n\n${textContent}\n\nPlease summarize this document.`&para;<br>          }&para;<br>        ]&para;<br>      }&para;<br>    ]&para;<br>  });&para;<br>&para;<br>  console.log(response.content[0].text);&para;<br>}&para;<br>&para;<br>analyzeDocument();&para;<br>```&para;<br>&lt;/CodeGroup&gt;&para;<br>&para;<br>&lt;Note&gt;&para;<br>For .docx files containing images, convert them to PDF format first, then use [PDF support](/docs/en/build-with-claude/pdf-support) to take advantage of the built-in image parsing. This allows using citations from the PDF document.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>#### Document blocks&para;<br>&para;<br>For PDFs and text files, use the `document` content block:&para;<br>&para;<br>```json&para;<br>{&para;<br>  "type": "document",&para;<br>  "source": {&para;<br>    "type": "file",&para;<br>    "file_id": "file_011CNha8iCJcU1wXNR6q4V8w"&para;<br>  },&para;<br>  "title": "Document Title", // Optional&para;<br>  "context": "Context about the document", // Optional  &para;<br>  "citations": {"enabled": true} // Optional, enables citations&para;<br>}&para;<br>```&para;<br>&para;<br>#### Image blocks&para;<br>&para;<br>For images, use the `image` content block:&para;<br>&para;<br>```json&para;<br>{&para;<br>  "type": "image",&para;<br>  "source": {&para;<br>    "type": "file",&para;<br>    "file_id": "file_011CPMxVD3fHLUhvTqtsQA5w"&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>### Managing files&para;<br>&para;<br>#### List files&para;<br>&para;<br>Retrieve a list of your uploaded files:&para;<br>&para;<br>&lt;CodeGroup&gt;&para;<br>```bash Shell&para;<br>curl https://api.anthropic.com/v1/files \&para;<br>  -H "x-api-key: $ANTHROPIC_API_KEY" \&para;<br>  -H "anthropic-version: 2023-06-01" \&para;<br>  -H "anthropic-beta: files-api-2025-04-14"&para;<br>```&para;<br>&para;<br>```python Python&para;<br>import anthropic&para;<br>&para;<br>client = anthropic.Anthropic()&para;<br>files = client.beta.files.list()&para;<br>```&para;<br>&para;<br>```typescript TypeScript&para;<br>import { Anthropic } from '@anthropic-ai/sdk';&para;<br>&para;<br>const anthropic = new Anthropic();&para;<br>const files = await anthropic.beta.files.list({&para;<br>  betas: ['files-api-2025-04-14'],&para;<br>});&para;<br>```&para;<br>&lt;/CodeGroup&gt;&para;<br>&para;<br>#### Get file metadata&para;<br>&para;<br>Retrieve information about a specific file:&para;<br>&para;<br>&lt;CodeGroup&gt;&para;<br>```bash Shell&para;<br>curl https://api.anthropic.com/v1/files/file_011CNha8iCJcU1wXNR6q4V8w \&para;<br>  -H "x-api-key: $ANTHROPIC_API_KEY" \&para;<br>  -H "anthropic-version: 2023-06-01" \&para;<br>  -H "anthropic-beta: files-api-2025-04-14"&para;<br>```&para;<br>&para;<br>```python Python&para;<br>import anthropic&para;<br>&para;<br>client = anthropic.Anthropic()&para;<br>file = client.beta.files.retrieve_metadata("file_011CNha8iCJcU1wXNR6q4V8w")&para;<br>```&para;<br>&para;<br>```typescript TypeScript&para;<br>import { Anthropic } from '@anthropic-ai/sdk';&para;<br>&para;<br>const anthropic = new Anthropic();&para;<br>const file = await anthropic.beta.files.retrieveMetadata(&para;<br>  "file_011CNha8iCJcU1wXNR6q4V8w",&para;<br>  { betas: ['files-api-2025-04-14'] },&para;<br>);&para;<br>```&para;<br>&lt;/CodeGroup&gt;&para;<br>&para;<br>#### Delete a file&para;<br>&para;<br>Remove a file from your workspace:&para;<br>&para;<br>&lt;CodeGroup&gt;&para;<br>```bash Shell&para;<br>curl -X DELETE https://api.anthropic.com/v1/files/file_011CNha8iCJcU1wXNR6q4V8w \&para;<br>  -H "x-api-key: $ANTHROPIC_API_KEY" \&para;<br>  -H "anthropic-version: 2023-06-01" \&para;<br>  -H "anthropic-beta: files-api-2025-04-14"&para;<br>```&para;<br>&para;<br>```python Python&para;<br>import anthropic&para;<br>&para;<br>client = anthropic.Anthropic()&para;<br>result = client.beta.files.delete("file_011CNha8iCJcU1wXNR6q4V8w")&para;<br>```&para;<br>&para;<br>```typescript TypeScript&para;<br>import { Anthropic } from '@anthropic-ai/sdk';&para;<br>&para;<br>const anthropic = new Anthropic();&para;<br>const result = await anthropic.beta.files.delete(&para;<br>  "file_011CNha8iCJcU1wXNR6q4V8w",&para;<br>  { betas: ['files-api-2025-04-14'] },&para;<br>);&para;<br>```&para;<br>&lt;/CodeGroup&gt;&para;<br>&para;<br>### Downloading a file&para;<br>&para;<br>Download files that have been created by skills or the code execution tool:&para;<br>&para;<br>&lt;CodeGroup&gt;&para;<br>```bash Shell&para;<br>curl -X GET "https://api.anthropic.com/v1/files/file_011CNha8iCJcU1wXNR6q4V8w/content" \&para;<br>  -H "x-api-key: $ANTHROPIC_API_KEY" \&para;<br>  -H "anthropic-version: 2023-06-01" \&para;<br>  -H "anthropic-beta: files-api-2025-04-14" \&para;<br>  --output downloaded_file.txt&para;<br>```&para;<br>&para;<br>```python Python&para;<br>import anthropic&para;<br>&para;<br>client = anthropic.Anthropic()&para;<br>file_content = client.beta.files.download("file_011CNha8iCJcU1wXNR6q4V8w")&para;<br>&para;<br># Save to file&para;<br>with open("downloaded_file.txt", "w") as f:&para;<br>    f.write(file_content.decode('utf-8'))&para;<br>```&para;<br>&para;<br>```typescript TypeScript&para;<br>import { Anthropic } from '@anthropic-ai/sdk';&para;<br>import fs from 'fs';&para;<br>&para;<br>const anthropic = new Anthropic();&para;<br>&para;<br>const fileContent = await anthropic.beta.files.download(&para;<br>  "file_011CNha8iCJcU1wXNR6q4V8w",&para;<br>  { betas: ['files-api-2025-04-14'] },&para;<br>);&para;<br>&para;<br>// Save to file&para;<br>fs.writeFileSync("downloaded_file.txt", fileContent);&para;<br>```&para;<br>&lt;/CodeGroup&gt;&para;<br>&para;<br>&lt;Note&gt;&para;<br>You can only download files that were created by [skills](/docs/en/build-with-claude/skills-guide) or the [code execution tool](/docs/en/agents-and-tools/tool-use/code-execution-tool). Files that you uploaded cannot be downloaded.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>---&para;<br>&para;<br>## File storage and limits&para;<br>&para;<br>### Storage limits&para;<br>&para;<br>- **Maximum file size:** 500 MB per file&para;<br>- **Total storage:** 100 GB per organization&para;<br>&para;<br>### File lifecycle&para;<br>&para;<br>- Files are scoped to the workspace of the API key. Other API keys can use files created by any other API key associated with the same workspace&para;<br>- Files persist until you delete them&para;<br>- Deleted files cannot be recovered&para;<br>- Files are inaccessible via the API shortly after deletion, but they may persist in active `Messages` API calls and associated tool uses&para;<br>- Files that users delete will be deleted in accordance with our [data retention policy](https://privacy.claude.com/en/articles/7996866-how-long-do-you-store-my-organization-s-data).&para;<br>&para;<br>---&para;<br>&para;<br>## Error handling&para;<br>&para;<br>Common errors when using the Files API include:&para;<br>&para;<br>- **File not found (404):** The specified `file_id` doesn't exist or you don't have access to it&para;<br>- **Invalid file type (400):** The file type doesn't match the content block type (e.g., using an image file in a document block)&para;<br>- **Exceeds context window size (400):** The file is larger than the context window size (e.g. using a 500 MB plaintext file in a `/v1/messages` request)&para;<br>- **Invalid filename (400):** Filename doesn't meet the length requirements (1-255 characters) or contains forbidden characters (`&lt;`, `&gt;`, `:`, `"`, `|`, `?`, `*`, `\`, `/`, or unicode characters 0-31)&para;<br>- **File too large (413):** File exceeds the 500 MB limit&para;<br>- **Storage limit exceeded (403):** Your organization has reached the 100 GB storage limit&para;<br>&para;<br>```json&para;<br>{&para;<br>  "type": "error",&para;<br>  "error": {&para;<br>    "type": "invalid_request_error",&para;<br>    "message": "File not found: file_011CNha8iCJcU1wXNR6q4V8w"&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>## Usage and billing&para;<br>&para;<br>File API operations are **free**:&para;<br>- Uploading files&para;<br>- Downloading files&para;<br>- Listing files&para;<br>- Getting file metadata  &para;<br>- Deleting files&para;<br>&para;<br>File content used in `Messages` requests are priced as input tokens. You can only download files created by [skills](/docs/en/build-with-claude/skills-guide) or the [code execution tool](/docs/en/agents-and-tools/tool-use/code-execution-tool).&para;<br>&para;<br>### Rate limits&para;<br>&para;<br>During the beta period:&para;<br>- File-related API calls are limited to approximately 100 requests per minute&para;<br>- [Contact us](mailto:sales@anthropic.com) if you need higher limits for your use case</ins></div>
        </div>

        <h2 style="margin-top: 2rem; margin-bottom: 1rem;">Unified Diff</h2>
        <pre><code>--- a/build-with-claude/files.md
+++ b/build-with-claude/files.md
@@ -0,0 +1,514 @@
+# Files API
+
+---
+
+The Files API lets you upload and manage files to use with the Claude API without re-uploading content with each request. This is particularly useful when using the [code execution tool](/docs/en/agents-and-tools/tool-use/code-execution-tool) to provide inputs (e.g. datasets and documents) and then download outputs (e.g. charts). You can also use the Files API to prevent having to continually re-upload frequently used documents and images across multiple API calls. You can [explore the API reference directly](/docs/en/api/files-create), in addition to this guide.
+
+&lt;Note&gt;
+The Files API is currently in beta. Please reach out through our [feedback form](https://forms.gle/tisHyierGwgN4DUE9) to share your experience with the Files API.
+&lt;/Note&gt;
+
+## Supported models
+
+Referencing a `file_id` in a Messages request is supported in all models that support the given file type. For example, [images](/docs/en/build-with-claude/vision) are supported in all Claude 3+ models, [PDFs](/docs/en/build-with-claude/pdf-support) in all Claude 3.5+ models, and [various other file types](/docs/en/agents-and-tools/tool-use/code-execution-tool#supported-file-types) for the code execution tool in Claude Haiku 4.5 plus all Claude 3.7+ models.
+
+The Files API is currently not supported on Amazon Bedrock or Google Vertex AI.
+
+## How the Files API works
+
+The Files API provides a simple create-once, use-many-times approach for working with files:
+
+- **Upload files** to our secure storage and receive a unique `file_id`
+- **Download files** that are created from skills or the code execution tool
+- **Reference files** in [Messages](/docs/en/api/messages) requests using the `file_id` instead of re-uploading content
+- **Manage your files** with list, retrieve, and delete operations
+
+## How to use the Files API
+
+&lt;Note&gt;
+To use the Files API, you&#39;ll need to include the beta feature header: `anthropic-beta: files-api-2025-04-14`.
+&lt;/Note&gt;
+
+### Uploading a file
+
+Upload a file to be referenced in future API calls:
+
+&lt;CodeGroup&gt;
+```bash Shell
+curl -X POST https://api.anthropic.com/v1/files \
+  -H &#34;x-api-key: $ANTHROPIC_API_KEY&#34; \
+  -H &#34;anthropic-version: 2023-06-01&#34; \
+  -H &#34;anthropic-beta: files-api-2025-04-14&#34; \
+  -F &#34;file=@/path/to/document.pdf&#34;
+```
+
+```python Python
+import anthropic
+
+client = anthropic.Anthropic()
+client.beta.files.upload(
+  file=(&#34;document.pdf&#34;, open(&#34;/path/to/document.pdf&#34;, &#34;rb&#34;), &#34;application/pdf&#34;),
+)
+```
+
+```typescript TypeScript
+import Anthropic, { toFile } from &#39;@anthropic-ai/sdk&#39;;
+import fs from &#34;fs&#34;;
+
+const anthropic = new Anthropic();
+
+await anthropic.beta.files.upload({
+  file: await toFile(fs.createReadStream(&#39;/path/to/document.pdf&#39;), undefined, { type: &#39;application/pdf&#39; })
+}, {
+  betas: [&#39;files-api-2025-04-14&#39;]
+});
+```
+&lt;/CodeGroup&gt;
+
+The response from uploading a file will include:
+
+```json
+{
+  &#34;id&#34;: &#34;file_011CNha8iCJcU1wXNR6q4V8w&#34;,
+  &#34;type&#34;: &#34;file&#34;,
+  &#34;filename&#34;: &#34;document.pdf&#34;,
+  &#34;mime_type&#34;: &#34;application/pdf&#34;,
+  &#34;size_bytes&#34;: 1024000,
+  &#34;created_at&#34;: &#34;2025-01-01T00:00:00Z&#34;,
+  &#34;downloadable&#34;: false
+}
+```
+
+### Using a file in messages
+
+Once uploaded, reference the file using its `file_id`:
+
+&lt;CodeGroup&gt;
+```bash Shell
+curl -X POST https://api.anthropic.com/v1/messages \
+  -H &#34;x-api-key: $ANTHROPIC_API_KEY&#34; \
+  -H &#34;anthropic-version: 2023-06-01&#34; \
+  -H &#34;anthropic-beta: files-api-2025-04-14&#34; \
+  -H &#34;content-type: application/json&#34; \
+  -d &#39;{
+    &#34;model&#34;: &#34;claude-sonnet-4-5&#34;,
+    &#34;max_tokens&#34;: 1024,
+    &#34;messages&#34;: [
+      {
+        &#34;role&#34;: &#34;user&#34;,
+        &#34;content&#34;: [
+          {
+            &#34;type&#34;: &#34;text&#34;,
+            &#34;text&#34;: &#34;Please summarize this document for me.&#34;          
+          },
+          {
+            &#34;type&#34;: &#34;document&#34;,
+            &#34;source&#34;: {
+              &#34;type&#34;: &#34;file&#34;,
+              &#34;file_id&#34;: &#34;file_011CNha8iCJcU1wXNR6q4V8w&#34;
+            }
+          }
+        ]
+      }
+    ]
+  }&#39;
+```
+
+```python Python
+import anthropic
+
+client = anthropic.Anthropic()
+
+response = client.beta.messages.create(
+    model=&#34;claude-sonnet-4-5&#34;,
+    max_tokens=1024,
+    messages=[
+        {
+            &#34;role&#34;: &#34;user&#34;,
+            &#34;content&#34;: [
+                {
+                    &#34;type&#34;: &#34;text&#34;,
+                    &#34;text&#34;: &#34;Please summarize this document for me.&#34;
+                },
+                {
+                    &#34;type&#34;: &#34;document&#34;,
+                    &#34;source&#34;: {
+                        &#34;type&#34;: &#34;file&#34;,
+                        &#34;file_id&#34;: &#34;file_011CNha8iCJcU1wXNR6q4V8w&#34;
+                    }
+                }
+            ]
+        }
+    ],
+    betas=[&#34;files-api-2025-04-14&#34;],
+)
+print(response)
+```
+
+```typescript TypeScript
+import { Anthropic } from &#39;@anthropic-ai/sdk&#39;;
+
+const anthropic = new Anthropic();
+
+const response = await anthropic.beta.messages.create({
+  model: &#34;claude-sonnet-4-5&#34;,
+  max_tokens: 1024,
+  messages: [
+    {
+      role: &#34;user&#34;,
+      content: [
+        {
+          type: &#34;text&#34;,
+          text: &#34;Please summarize this document for me.&#34;
+        },
+        {
+          type: &#34;document&#34;,
+          source: {
+            type: &#34;file&#34;,
+            file_id: &#34;file_011CNha8iCJcU1wXNR6q4V8w&#34;
+          }
+        }
+      ]
+    }
+  ],
+  betas: [&#34;files-api-2025-04-14&#34;],
+});
+
+console.log(response);
+```
+&lt;/CodeGroup&gt;
+
+### File types and content blocks
+
+The Files API supports different file types that correspond to different content block types:
+
+| File Type | MIME Type | Content Block Type | Use Case |
+| :--- | :--- | :--- | :--- |
+| PDF | `application/pdf` | `document` | Text analysis, document processing |
+| Plain text | `text/plain` | `document` | Text analysis, processing |
+| Images | `image/jpeg`, `image/png`, `image/gif`, `image/webp` | `image` | Image analysis, visual tasks |
+| [Datasets, others](/docs/en/agents-and-tools/tool-use/code-execution-tool#supported-file-types) | Varies | `container_upload` | Analyze data, create visualizations  |
+
+### Working with other file formats
+
+For file types that are not supported as `document` blocks (.csv, .txt, .md, .docx, .xlsx), convert the files to plain text, and include the content directly in your message:
+
+&lt;CodeGroup&gt;
+```bash Shell
+# Example: Reading a text file and sending it as plain text
+# Note: For files with special characters, consider base64 encoding
+TEXT_CONTENT=$(cat document.txt | jq -Rs .)
+
+curl https://api.anthropic.com/v1/messages \
+  -H &#34;content-type: application/json&#34; \
+  -H &#34;x-api-key: $ANTHROPIC_API_KEY&#34; \
+  -H &#34;anthropic-version: 2023-06-01&#34; \
+  -d @- &lt;&lt;EOF
+{
+  &#34;model&#34;: &#34;claude-sonnet-4-5&#34;,
+  &#34;max_tokens&#34;: 1024,
+  &#34;messages&#34;: [
+    {
+      &#34;role&#34;: &#34;user&#34;,
+      &#34;content&#34;: [
+        {
+          &#34;type&#34;: &#34;text&#34;,
+          &#34;text&#34;: &#34;Here&#39;s the document content:\n\n${TEXT_CONTENT}\n\nPlease summarize this document.&#34;
+        }
+      ]
+    }
+  ]
+}
+EOF
+```
+
+```python Python
+import pandas as pd
+import anthropic
+
+client = anthropic.Anthropic()
+
+# Example: Reading a CSV file
+df = pd.read_csv(&#39;data.csv&#39;)
+csv_content = df.to_string()
+
+# Send as plain text in the message
+response = client.messages.create(
+    model=&#34;claude-sonnet-4-5&#34;,
+    max_tokens=1024,
+    messages=[
+        {
+            &#34;role&#34;: &#34;user&#34;,
+            &#34;content&#34;: [
+                {
+                    &#34;type&#34;: &#34;text&#34;,
+                    &#34;text&#34;: f&#34;Here&#39;s the CSV data:\n\n{csv_content}\n\nPlease analyze this data.&#34;
+                }
+            ]
+        }
+    ]
+)
+
+print(response.content[0].text)
+```
+
+```typescript TypeScript
+import { Anthropic } from &#39;@anthropic-ai/sdk&#39;;
+import fs from &#39;fs&#39;;
+
+const anthropic = new Anthropic();
+
+async function analyzeDocument() {
+  // Example: Reading a text file
+  const textContent = fs.readFileSync(&#39;document.txt&#39;, &#39;utf-8&#39;);
+
+  // Send as plain text in the message
+  const response = await anthropic.messages.create({
+    model: &#39;claude-sonnet-4-5&#39;,
+    max_tokens: 1024,
+    messages: [
+      {
+        role: &#39;user&#39;,
+        content: [
+          {
+            type: &#39;text&#39;,
+            text: `Here&#39;s the document content:\n\n${textContent}\n\nPlease summarize this document.`
+          }
+        ]
+      }
+    ]
+  });
+
+  console.log(response.content[0].text);
+}
+
+analyzeDocument();
+```
+&lt;/CodeGroup&gt;
+
+&lt;Note&gt;
+For .docx files containing images, convert them to PDF format first, then use [PDF support](/docs/en/build-with-claude/pdf-support) to take advantage of the built-in image parsing. This allows using citations from the PDF document.
+&lt;/Note&gt;
+
+#### Document blocks
+
+For PDFs and text files, use the `document` content block:
+
+```json
+{
+  &#34;type&#34;: &#34;document&#34;,
+  &#34;source&#34;: {
+    &#34;type&#34;: &#34;file&#34;,
+    &#34;file_id&#34;: &#34;file_011CNha8iCJcU1wXNR6q4V8w&#34;
+  },
+  &#34;title&#34;: &#34;Document Title&#34;, // Optional
+  &#34;context&#34;: &#34;Context about the document&#34;, // Optional  
+  &#34;citations&#34;: {&#34;enabled&#34;: true} // Optional, enables citations
+}
+```
+
+#### Image blocks
+
+For images, use the `image` content block:
+
+```json
+{
+  &#34;type&#34;: &#34;image&#34;,
+  &#34;source&#34;: {
+    &#34;type&#34;: &#34;file&#34;,
+    &#34;file_id&#34;: &#34;file_011CPMxVD3fHLUhvTqtsQA5w&#34;
+  }
+}
+```
+
+### Managing files
+
+#### List files
+
+Retrieve a list of your uploaded files:
+
+&lt;CodeGroup&gt;
+```bash Shell
+curl https://api.anthropic.com/v1/files \
+  -H &#34;x-api-key: $ANTHROPIC_API_KEY&#34; \
+  -H &#34;anthropic-version: 2023-06-01&#34; \
+  -H &#34;anthropic-beta: files-api-2025-04-14&#34;
+```
+
+```python Python
+import anthropic
+
+client = anthropic.Anthropic()
+files = client.beta.files.list()
+```
+
+```typescript TypeScript
+import { Anthropic } from &#39;@anthropic-ai/sdk&#39;;
+
+const anthropic = new Anthropic();
+const files = await anthropic.beta.files.list({
+  betas: [&#39;files-api-2025-04-14&#39;],
+});
+```
+&lt;/CodeGroup&gt;
+
+#### Get file metadata
+
+Retrieve information about a specific file:
+
+&lt;CodeGroup&gt;
+```bash Shell
+curl https://api.anthropic.com/v1/files/file_011CNha8iCJcU1wXNR6q4V8w \
+  -H &#34;x-api-key: $ANTHROPIC_API_KEY&#34; \
+  -H &#34;anthropic-version: 2023-06-01&#34; \
+  -H &#34;anthropic-beta: files-api-2025-04-14&#34;
+```
+
+```python Python
+import anthropic
+
+client = anthropic.Anthropic()
+file = client.beta.files.retrieve_metadata(&#34;file_011CNha8iCJcU1wXNR6q4V8w&#34;)
+```
+
+```typescript TypeScript
+import { Anthropic } from &#39;@anthropic-ai/sdk&#39;;
+
+const anthropic = new Anthropic();
+const file = await anthropic.beta.files.retrieveMetadata(
+  &#34;file_011CNha8iCJcU1wXNR6q4V8w&#34;,
+  { betas: [&#39;files-api-2025-04-14&#39;] },
+);
+```
+&lt;/CodeGroup&gt;
+
+#### Delete a file
+
+Remove a file from your workspace:
+
+&lt;CodeGroup&gt;
+```bash Shell
+curl -X DELETE https://api.anthropic.com/v1/files/file_011CNha8iCJcU1wXNR6q4V8w \
+  -H &#34;x-api-key: $ANTHROPIC_API_KEY&#34; \
+  -H &#34;anthropic-version: 2023-06-01&#34; \
+  -H &#34;anthropic-beta: files-api-2025-04-14&#34;
+```
+
+```python Python
+import anthropic
+
+client = anthropic.Anthropic()
+result = client.beta.files.delete(&#34;file_011CNha8iCJcU1wXNR6q4V8w&#34;)
+```
+
+```typescript TypeScript
+import { Anthropic } from &#39;@anthropic-ai/sdk&#39;;
+
+const anthropic = new Anthropic();
+const result = await anthropic.beta.files.delete(
+  &#34;file_011CNha8iCJcU1wXNR6q4V8w&#34;,
+  { betas: [&#39;files-api-2025-04-14&#39;] },
+);
+```
+&lt;/CodeGroup&gt;
+
+### Downloading a file
+
+Download files that have been created by skills or the code execution tool:
+
+&lt;CodeGroup&gt;
+```bash Shell
+curl -X GET &#34;https://api.anthropic.com/v1/files/file_011CNha8iCJcU1wXNR6q4V8w/content&#34; \
+  -H &#34;x-api-key: $ANTHROPIC_API_KEY&#34; \
+  -H &#34;anthropic-version: 2023-06-01&#34; \
+  -H &#34;anthropic-beta: files-api-2025-04-14&#34; \
+  --output downloaded_file.txt
+```
+
+```python Python
+import anthropic
+
+client = anthropic.Anthropic()
+file_content = client.beta.files.download(&#34;file_011CNha8iCJcU1wXNR6q4V8w&#34;)
+
+# Save to file
+with open(&#34;downloaded_file.txt&#34;, &#34;w&#34;) as f:
+    f.write(file_content.decode(&#39;utf-8&#39;))
+```
+
+```typescript TypeScript
+import { Anthropic } from &#39;@anthropic-ai/sdk&#39;;
+import fs from &#39;fs&#39;;
+
+const anthropic = new Anthropic();
+
+const fileContent = await anthropic.beta.files.download(
+  &#34;file_011CNha8iCJcU1wXNR6q4V8w&#34;,
+  { betas: [&#39;files-api-2025-04-14&#39;] },
+);
+
+// Save to file
+fs.writeFileSync(&#34;downloaded_file.txt&#34;, fileContent);
+```
+&lt;/CodeGroup&gt;
+
+&lt;Note&gt;
+You can only download files that were created by [skills](/docs/en/build-with-claude/skills-guide) or the [code execution tool](/docs/en/agents-and-tools/tool-use/code-execution-tool). Files that you uploaded cannot be downloaded.
+&lt;/Note&gt;
+
+---
+
+## File storage and limits
+
+### Storage limits
+
+- **Maximum file size:** 500 MB per file
+- **Total storage:** 100 GB per organization
+
+### File lifecycle
+
+- Files are scoped to the workspace of the API key. Other API keys can use files created by any other API key associated with the same workspace
+- Files persist until you delete them
+- Deleted files cannot be recovered
+- Files are inaccessible via the API shortly after deletion, but they may persist in active `Messages` API calls and associated tool uses
+- Files that users delete will be deleted in accordance with our [data retention policy](https://privacy.claude.com/en/articles/7996866-how-long-do-you-store-my-organization-s-data).
+
+---
+
+## Error handling
+
+Common errors when using the Files API include:
+
+- **File not found (404):** The specified `file_id` doesn&#39;t exist or you don&#39;t have access to it
+- **Invalid file type (400):** The file type doesn&#39;t match the content block type (e.g., using an image file in a document block)
+- **Exceeds context window size (400):** The file is larger than the context window size (e.g. using a 500 MB plaintext file in a `/v1/messages` request)
+- **Invalid filename (400):** Filename doesn&#39;t meet the length requirements (1-255 characters) or contains forbidden characters (`&lt;`, `&gt;`, `:`, `&#34;`, `|`, `?`, `*`, `\`, `/`, or unicode characters 0-31)
+- **File too large (413):** File exceeds the 500 MB limit
+- **Storage limit exceeded (403):** Your organization has reached the 100 GB storage limit
+
+```json
+{
+  &#34;type&#34;: &#34;error&#34;,
+  &#34;error&#34;: {
+    &#34;type&#34;: &#34;invalid_request_error&#34;,
+    &#34;message&#34;: &#34;File not found: file_011CNha8iCJcU1wXNR6q4V8w&#34;
+  }
+}
+```
+
+## Usage and billing
+
+File API operations are **free**:
+- Uploading files
+- Downloading files
+- Listing files
+- Getting file metadata  
+- Deleting files
+
+File content used in `Messages` requests are priced as input tokens. You can only download files created by [skills](/docs/en/build-with-claude/skills-guide) or the [code execution tool](/docs/en/agents-and-tools/tool-use/code-execution-tool).
+
+### Rate limits
+
+During the beta period:
+- File-related API calls are limited to approximately 100 requests per minute
+- [Contact us](mailto:sales@anthropic.com) if you need higher limits for your use case</code></pre>
    </div>
</body>
</html>