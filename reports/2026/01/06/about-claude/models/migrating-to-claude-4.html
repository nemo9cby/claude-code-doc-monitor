<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>about-claude/models/migrating-to-claude-4 - Diff Report</title>
    <link rel="stylesheet" href="../../css/diff.css">
    <style>
        :root {
            --bg-color: #1a1a2e;
            --card-bg: #16213e;
            --text-color: #eee;
            --accent: #0f3460;
            --add-bg: #1a4d1a;
            --del-bg: #4d1a1a;
            --add-text: #4ade80;
            --del-text: #f87171;
        }
        @media (prefers-color-scheme: light) {
            :root {
                --bg-color: #f5f5f5;
                --card-bg: #fff;
                --text-color: #333;
                --accent: #e0e0e0;
                --add-bg: #d4edda;
                --del-bg: #f8d7da;
                --add-text: #155724;
                --del-text: #721c24;
            }
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 2rem;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { margin-bottom: 2rem; }
        h1 { font-size: 1.5rem; margin-bottom: 0.5rem; }
        .meta { color: #888; font-size: 0.9rem; }
        .summary {
            background: var(--card-bg);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            display: flex;
            gap: 2rem;
        }
        .stat { display: flex; align-items: center; gap: 0.5rem; }
        .stat.added { color: var(--add-text); }
        .stat.removed { color: var(--del-text); }
        .analysis {
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid #8b5cf6;
        }
        .analysis-header {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #8b5cf6;
        }
        .analysis-content {
            white-space: pre-wrap;
            font-size: 0.95rem;
            line-height: 1.7;
        }
        .diff-container {
            background: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
        }
        .diff-header {
            background: var(--accent);
            padding: 0.75rem 1rem;
            font-weight: 600;
        }
        .diff-content {
            padding: 1rem;
            overflow-x: auto;
        }
        .diff-content ins {
            background: var(--add-bg);
            color: var(--add-text);
            text-decoration: none;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        .diff-content del {
            background: var(--del-bg);
            color: var(--del-text);
            text-decoration: line-through;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        pre {
            background: var(--accent);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.85rem;
            margin-top: 2rem;
        }
        a { color: #60a5fa; }
        .back-link { margin-bottom: 1rem; display: inline-block; }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">&larr; Back to daily report</a>

        <header>
            <h1>about-claude/models/migrating-to-claude-4.md</h1>
            <p class="meta">Changed on 2026-01-06 14:35:17 UTC</p>
        </header>

        <div class="summary">
            <div class="stat added">
                <span>+171</span> lines added
            </div>
            <div class="stat removed">
                <span>-0</span> lines removed
            </div>
        </div>

        
        <div class="analysis">
            <div class="analysis-header">ðŸ¤– AI Analysis</div>
            <div class="analysis-content"># Documentation Change Analysis: Migrating to Claude 4.5

## Summary
The documentation for migrating to Claude 4.5 has been significantly expanded, detailing two primary migration paths (Sonnet and Haiku) and outlining essential steps, breaking changes, and new features that developers must consider when upgrading their implementations.

## Key Changes
- **Migration Paths**: Clear guidance for migrating from Claude Sonnet 3.7 and Haiku 3.5 to their respective 4.5 versions, including specific model name updates.
- **Breaking Changes**: Introduced several breaking changes, such as using either `temperature` or `top_p` for sampling parameters, and updated tool versions that must be adopted.
- **New Features**: Highlights new capabilities in Claude 4.5, including improved reasoning, context awareness, and the option to enable extended thinking for enhanced performance.
- **Refusal Handling**: Added instructions for handling the new `refusal` stop reason, requiring developers to update their applications accordingly.
- **Migration Checklist**: Provided a comprehensive checklist to help developers ensure all necessary updates are made before deployment.

## Impact
**High**: The changes include breaking modifications and new features that will require developers to adapt their existing codebases and workflows, making it crucial for a smooth transition to the new model.</div>
        </div>
        

        <div class="diff-container">
            <div class="diff-header">Visual Diff</div>
            <div class="diff-content"><ins style="background:#e6ffe6;"># Migrating to Claude 4.5&para;<br>&para;<br>---&para;<br>&para;<br>This guide covers two key migration paths to Claude 4.5 models:&para;<br>&para;<br>- **Claude Sonnet 3.7 â†’ Claude Sonnet 4.5**: Our most intelligent model with best-in-class reasoning, coding, and long-running agent capabilities&para;<br>- **Claude Haiku 3.5 â†’ Claude Haiku 4.5**: Our fastest and most intelligent Haiku model with near-frontier performance for real-time applications and high-volume intelligent processing&para;<br>&para;<br>Both migrations involve breaking changes that require updates to your implementation. This guide will walk you through each migration path with step-by-step instructions and clearly marked breaking changes.&para;<br>&para;<br>Before starting your migration, we recommend reviewing [What's new in Claude 4.5](/docs/en/about-claude/models/whats-new-claude-4-5) to understand the new features and capabilities available in these models, including extended thinking, context awareness, and behavioral improvements.&para;<br>&para;<br>## Migrating from Claude Sonnet 3.7 to Claude Sonnet 4.5&para;<br>&para;<br>Claude Sonnet 4.5 is our most intelligent model, offering best-in-class performance for reasoning, coding, and long-running autonomous agents. This migration includes several breaking changes that require updates to your implementation.&para;<br>&para;<br>### Migration steps&para;<br>&para;<br>1. **Update your model name:**&para;<br>   ```python&para;<br>   # Before (Claude Sonnet 3.7)&para;<br>   model="claude-3-7-sonnet-20250219"&para;<br>&para;<br>   # After (Claude Sonnet 4.5)&para;<br>   model="claude-sonnet-4-5-20250929"&para;<br>   ```&para;<br>&para;<br>2. **Update sampling parameters**&para;<br>&para;<br>   &lt;Warning&gt;&para;<br>   This is a breaking change from the Claude Sonnet 3.7.&para;<br>   &lt;/Warning&gt;&para;<br>&para;<br>   Use only `temperature` OR `top_p`, not both:&para;<br>&para;<br>   ```python&para;<br>   # Before (Claude Sonnet 3.7) - This will error in Sonnet 4.5&para;<br>   response = client.messages.create(&para;<br>       model="claude-3-7-sonnet-20250219",&para;<br>       temperature=0.7,&para;<br>       top_p=0.9,  # Cannot use both&para;<br>       ...&para;<br>   )&para;<br>&para;<br>   # After (Claude Sonnet 4.5)&para;<br>   response = client.messages.create(&para;<br>       model="claude-sonnet-4-5-20250929",&para;<br>       temperature=0.7,  # Use temperature OR top_p, not both&para;<br>       ...&para;<br>   )&para;<br>   ```&para;<br>&para;<br>3. **Handle the new `refusal` stop reason**&para;<br>&para;<br>   Update your application to [handle `refusal` stop reasons](/docs/en/test-and-evaluate/strengthen-guardrails/handle-streaming-refusals):&para;<br>&para;<br>   ```python&para;<br>   response = client.messages.create(...)&para;<br>&para;<br>   if response.stop_reason == "refusal":&para;<br>       # Handle refusal appropriately&para;<br>       pass&para;<br>   ```&para;<br>&para;<br>4. **Update text editor tool (if applicable)**&para;<br>&para;<br>   &lt;Warning&gt;&para;<br>   This is a breaking change from the Claude Sonnet 3.7.&para;<br>   &lt;/Warning&gt;&para;<br>&para;<br>   Update to `text_editor_20250728` (type) and `str_replace_based_edit_tool` (name). Remove any code using the `undo_edit` command.&para;<br>   &para;<br>   ```python&para;<br>   # Before (Claude Sonnet 3.7)&para;<br>   tools=[{"type": "text_editor_20250124", "name": "str_replace_editor"}]&para;<br>&para;<br>   # After (Claude Sonnet 4.5)&para;<br>   tools=[{"type": "text_editor_20250728", "name": "str_replace_based_edit_tool"}]&para;<br>   ```&para;<br>&para;<br>   See [Text editor tool documentation](/docs/en/agents-and-tools/tool-use/text-editor-tool) for details.&para;<br>&para;<br>5. **Update code execution tool (if applicable)**&para;<br>&para;<br>   Upgrade to `code_execution_20250825`. The legacy version `code_execution_20250522` still works but is not recommended. See [Code execution tool documentation](/docs/en/agents-and-tools/tool-use/code-execution-tool#upgrade-to-latest-tool-version) for migration instructions.&para;<br>&para;<br>6. **Remove token-efficient tool use beta header**&para;<br>&para;<br>   Token-efficient tool use is a beta feature that only works with Claude 3.7 Sonnet. All Claude 4 models have built-in token-efficient tool use, so you should no longer include the beta header.&para;<br>&para;<br>   Remove the `token-efficient-tools-2025-02-19` [beta header](/docs/en/api/beta-headers) from your requests:&para;<br>&para;<br>   ```python&para;<br>   # Before (Claude Sonnet 3.7)&para;<br>   client.messages.create(&para;<br>       model="claude-3-7-sonnet-20250219",&para;<br>       betas=["token-efficient-tools-2025-02-19"],  # Remove this&para;<br>       ...&para;<br>   )&para;<br>&para;<br>   # After (Claude Sonnet 4.5)&para;<br>   client.messages.create(&para;<br>       model="claude-sonnet-4-5-20250929",&para;<br>       # No token-efficient-tools beta header&para;<br>       ...&para;<br>   )&para;<br>   ```&para;<br>&para;<br>7. **Remove extended output beta header**&para;<br>&para;<br>   The `output-128k-2025-02-19` [beta header](/docs/en/api/beta-headers) for extended output is only available in Claude Sonnet 3.7.&para;<br>&para;<br>   Remove this header from your requests:&para;<br>&para;<br>   ```python&para;<br>   # Before (Claude Sonnet 3.7)&para;<br>   client.messages.create(&para;<br>       model="claude-3-7-sonnet-20250219",&para;<br>       betas=["output-128k-2025-02-19"],  # Remove this&para;<br>       ...&para;<br>   )&para;<br>&para;<br>   # After (Claude Sonnet 4.5)&para;<br>   client.messages.create(&para;<br>       model="claude-sonnet-4-5-20250929",&para;<br>       # No output-128k beta header&para;<br>       ...&para;<br>   )&para;<br>   ```&para;<br>&para;<br>8. **Update your prompts for behavioral changes**&para;<br>&para;<br>   Claude Sonnet 4.5 has a more concise, direct communication style and requires explicit direction. Review [Claude 4 prompt engineering best practices](/docs/en/build-with-claude/prompt-engineering/claude-4-best-practices) for optimization guidance.&para;<br>&para;<br>9. **Consider enabling extended thinking for complex tasks**&para;<br>&para;<br>   Enable [extended thinking](/docs/en/build-with-claude/extended-thinking) for significant performance improvements on coding and reasoning tasks (disabled by default):&para;<br>&para;<br>   ```python&para;<br>   response = client.messages.create(&para;<br>       model="claude-sonnet-4-5-20250929",&para;<br>       max_tokens=16000,&para;<br>       thinking={"type": "enabled", "budget_tokens": 10000},&para;<br>       messages=[...]&para;<br>   )&para;<br>   ```&para;<br>&para;<br>   &lt;Note&gt;&para;<br>   Extended thinking impacts [prompt caching](/docs/en/build-with-claude/prompt-caching#caching-with-thinking-blocks) efficiency.&para;<br>   &lt;/Note&gt;&para;<br>&para;<br>10. **Test your implementation**&para;<br>&para;<br>   Test in a development environment before deploying to production to ensure all breaking changes are properly handled.&para;<br>&para;<br>### Sonnet 3.7 â†’ 4.5 migration checklist&para;<br>&para;<br>- [ ] Update model ID to `claude-sonnet-4-5-20250929`&para;<br>- [ ] **BREAKING**: Update sampling parameters to use only `temperature` OR `top_p`, not both&para;<br>- [ ] Handle new `refusal` stop reason in your application&para;<br>- [ ] **BREAKING**: Update text editor tool to `text_editor_20250728` and `str_replace_based_edit_tool` (if applicable)&para;<br>- [ ] **BREAKING**: Remove any code using the `undo_edit` command (if applicable)&para;<br>- [ ] Update code execution tool to `code_execution_20250825` (if applicable)&para;<br>- [ ] Remove `token-efficient-tools-2025-02-19` beta header (if applicable)&para;<br>- [ ] Remove `output-128k-2025-02-19` beta header (if applicable)&para;<br>- [ ] Review and update prompts following [Claude 4 best practices](/docs/en/build-with-claude/prompt-engineering/claude-4-best-practices)&para;<br>- [ ] Consider enabling extended thinking for complex reasoning tasks&para;<br>- [ ] Handle `model_context_window_exceeded` stop reason (Sonnet 4.5 specific)&para;<br>- [ ] Consider enabling memory tool for long-running agents (beta)&para;<br>- [ ] Consider using automatic tool call clearing for context editing (beta)&para;<br>- [ ] Test in development environment before production deployment&para;<br>&para;<br>### Features removed from Claude Sonnet 3.7&para;<br>&para;<br>- **Token-efficient tool use**: The `token-efficient-tools-2025-02-19` beta header only works with Claude 3.7 Sonnet and is not supported in Claude 4 models (see step 6)&para;<br>- **Extended output**: The `output-128k-2025-02-19` beta header is not supported (see step 7)&para;<br>&para;<br>Both headers can be included in Claude 4 requests but will have no effect.&para;<br>&para;<br>## Migrating from Claude Haiku 3.5 to Claude Haiku 4.5&para;<br>&para;<br>Claude Haiku 4.5 is our fastest and most intelligent Haiku model with near-frontier performance, delivering premium model quality with real-time performance for interactive applications and high-volume intelligent processing. This migration includes several breaking changes that require updates to your implementation.&para;<br>&para;<br>For a complete overview of new capabilities, see [What's new in Claude 4.5](/docs/en/about-claude/models/whats-new-claude-4-5#key-improvements-in-haiku-4-5-over-haiku-3-5).&para;<br>&para;<br>&lt;Note&gt;&para;<br>Haiku 4.5 pricing $1 per million input tokens, $5 per million output tokens. See [Claude pricing](/docs/en/about-claude/pricing) for details.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>### Migration steps&para;<br>&para;<br>1. **Update your model name:**&para;<br>   ```python&para;<br>   # Before (Haiku 3.5)&para;<br>   model="claude-3-5-haiku-20241022"&para;<br>&para;<br>   # After (Haiku 4.5)&para;<br>   model="claude-haiku-4-5-20251001"&para;<br>   ```&para;<br>&para;<br>2. **Update tool versions (if applicable)**&para;<br>&para;<br>   &lt;Warning&gt;&para;<br>   This is a breaking change from the Claude Haiku 3.5.&para;<br>   &lt;/Warning&gt;&para;<br>&para;<br>   Haiku 4.5 only supports the latest tool versions:&para;<br>&para;<br>   ```python&para;<br>   # Before (Haiku 3.5)&para;<br>   tools=[{"type": "text_editor_20250124", "name": "str_replace_editor"}]&para;<br>&para;<br>   # After (Haiku 4.5)&para;<br>   tools=[{"type": "text_editor_20250728", "name": "str_replace_based_edit_tool"}]&para;<br>   ```&para;<br>&para;<br>   - **Text editor**: Use `text_editor_20250728` and `str_replace_based_edit_tool`&para;<br>   - **Code execution**: Use `code_execution_20250825`&para;<br>   - Remove any code using the `undo_edit` command&para;<br>&para;<br>3. **Update sampling parameters**&para;<br>&para;<br>   &lt;Warning&gt;&para;<br>   This is a breaking change from the Claude Haiku 3.5.&para;<br>   &lt;/Warning&gt;&para;<br>&para;<br>   Use only `temperature` OR `top_p`, not both:&para;<br>&para;<br>   ```python&para;<br>   # Before (Haiku 3.5) - This will error in Haiku 4.5&para;<br>   response = client.messages.create(&para;<br>       model="claude-3-5-haiku-20241022",&para;<br>       temperature=0.7,&para;<br>       top_p=0.9,  # Cannot use both&para;<br>       ...&para;<br>   )&para;<br>&para;<br>   # After (Haiku 4.5)&para;<br>   response = client.messages.create(&para;<br>       model="claude-haiku-4-5-20251001",&para;<br>       temperature=0.7,  # Use temperature OR top_p, not both&para;<br>       ...&para;<br>   )&para;<br>   ```&para;<br>&para;<br>4. **Review new rate limits**&para;<br>&para;<br>   Haiku 4.5 has separate rate limits from Haiku 3.5. See [Rate limits documentation](/docs/en/api/rate-limits) for details.&para;<br>&para;<br>5. **Handle the new `refusal` stop reason**&para;<br>&para;<br>   Update your application to [handle refusal stop reasons](/docs/en/test-and-evaluate/strengthen-guardrails/handle-streaming-refusals).&para;<br>&para;<br>6. **Consider enabling extended thinking for complex tasks**&para;<br>&para;<br>   Enable [extended thinking](/docs/en/build-with-claude/extended-thinking) for significant performance improvements on coding and reasoning tasks (disabled by default):&para;<br>&para;<br>   ```python&para;<br>   response = client.messages.create(&para;<br>       model="claude-haiku-4-5-20251001",&para;<br>       max_tokens=16000,&para;<br>       thinking={"type": "enabled", "budget_tokens": 5000},&para;<br>       messages=[...]&para;<br>   )&para;<br>   ```&para;<br>   &lt;Note&gt;&para;<br>   Extended thinking impacts [prompt caching](/docs/en/build-with-claude/prompt-caching#caching-with-thinking-blocks) efficiency.&para;<br>   &lt;/Note&gt;&para;<br>&para;<br>7. **Explore new capabilities**&para;<br>&para;<br>   See [What's new in Claude 4.5](/docs/en/about-claude/models/whats-new-claude-4-5#key-improvements-in-haiku-4-5-over-haiku-3-5) for details on context awareness, increased output capacity (64K tokens), higher intelligence, and improved speed.&para;<br>&para;<br>8. **Test your implementation**&para;<br>&para;<br>   Test in a development environment before deploying to production to ensure all breaking changes are properly handled.&para;<br>&para;<br>### Haiku 3.5 â†’ 4.5 migration checklist&para;<br>&para;<br>- [ ] Update model ID to `claude-haiku-4-5-20251001`&para;<br>- [ ] **BREAKING**: Update tool versions to latest (e.g., `text_editor_20250728`, `code_execution_20250825`) - legacy versions not supported&para;<br>- [ ] **BREAKING**: Remove any code using the `undo_edit` command (if applicable)&para;<br>- [ ] **BREAKING**: Update sampling parameters to use only `temperature` OR `top_p`, not both&para;<br>- [ ] Review and adjust for new rate limits (separate from Haiku 3.5)&para;<br>- [ ] Handle new `refusal` stop reason in your application&para;<br>- [ ] Consider enabling extended thinking for complex reasoning tasks (new capability)&para;<br>- [ ] Leverage context awareness for better token management in long sessions&para;<br>- [ ] Prepare for larger responses (max output increased from 8K to 64K tokens)&para;<br>- [ ] Review and update prompts following [Claude 4 best practices](/docs/en/build-with-claude/prompt-engineering/claude-4-best-practices)&para;<br>- [ ] Test in development environment before production deployment&para;<br>&para;<br>## Choosing between Sonnet 4.5 and Haiku 4.5&para;<br>&para;<br>Both Claude Sonnet 4.5 and Claude Haiku 4.5 are powerful Claude 4 models with different strengths:&para;<br>&para;<br>### Choose Claude Sonnet 4.5 (most intelligent) for:&para;<br>&para;<br>- **Complex reasoning and analysis**: Best-in-class intelligence for sophisticated tasks&para;<br>- **Long-running autonomous agents**: Superior performance for agents working independently for extended periods&para;<br>- **Advanced coding tasks**: Our strongest coding model with advanced planning and security engineering&para;<br>- **Large context workflows**: Enhanced context management with memory tool and context editing capabilities&para;<br>- **Tasks requiring maximum capability**: When intelligence and accuracy are the top priorities&para;<br>&para;<br>### Choose Claude Haiku 4.5 (fastest and most intelligent Haiku) for:&para;<br>&para;<br>- **Real-time applications**: Fast response times for interactive user experiences with near-frontier performance&para;<br>- **High-volume intelligent processing**: Cost-effective intelligence at scale with improved speed&para;<br>- **Cost-sensitive deployments**: Near-frontier performance at lower price points&para;<br>- **Sub-agent architectures**: Fast, intelligent agents for multi-agent systems&para;<br>- **Computer use at scale**: Cost-effective autonomous desktop and browser automation&para;<br>- **Tasks requiring speed**: When low latency is critical while maintaining near-frontier intelligence&para;<br>&para;<br>### Extended thinking recommendations&para;<br>&para;<br>Claude 4 models, particularly Sonnet and Haiku 4.5, show significant performance improvements when using [extended thinking](/docs/en/build-with-claude/extended-thinking) for coding and complex reasoning tasks. Extended thinking is **disabled by default** but we recommend enabling it for demanding work.&para;<br>&para;<br>**Important**: Extended thinking impacts [prompt caching](/docs/en/build-with-claude/prompt-caching#caching-with-thinking-blocks) efficiency. When non-tool-result content is added to a conversation, thinking blocks are stripped from cache, which can increase costs in multi-turn conversations. We recommend enabling thinking when the performance benefits outweigh the caching trade-off.&para;<br>&para;<br>## Other migration scenarios&para;<br>&para;<br>The primary migration paths covered above (Sonnet 3.7 â†’ 4.5 and Haiku 3.5 â†’ 4.5) represent the most common upgrades. However, you may be migrating from other Claude models to Claude 4.5. This section covers those scenarios.&para;<br>&para;<br>### Migrating from Claude Sonnet 4 â†’ Sonnet 4.5&para;<br>&para;<br>**Breaking change**: Cannot specify both `temperature` and `top_p` in the same request.&para;<br>&para;<br>All other API calls will work without modification. Update your model ID and adjust sampling parameters if needed:&para;<br>&para;<br>```python&para;<br># Before (Claude Sonnet 4)&para;<br>model="claude-sonnet-4-20250514"&para;<br>&para;<br># After (Claude Sonnet 4.5)&para;<br>model="claude-sonnet-4-5-20250929"&para;<br>```&para;<br>&para;<br>### Migrating from Claude Opus 4.1 â†’ Sonnet 4.5&para;<br>&para;<br>**No breaking changes.** All API calls will work without modification.&para;<br>&para;<br>Simply update your model ID:&para;<br>&para;<br>```python&para;<br># Before (Claude Opus 4.1)&para;<br>model="claude-opus-4-1-20250805"&para;<br>&para;<br># After (Claude Sonnet 4.5)&para;<br>model="claude-sonnet-4-5-20250929"&para;<br>```&para;<br>&para;<br>Claude Sonnet 4.5 is our most intelligent model with best-in-class reasoning, coding, and long-running agent capabilities. It offers superior performance compared to Opus 4.1 for most use cases.&para;<br>&para;<br>### Migrating from Claude Opus 4.1 â†’ Opus 4.5&para;<br>&para;<br>**No breaking changes.** All API calls will work without modification.&para;<br>&para;<br>Simply update your model ID:&para;<br>&para;<br>```python&para;<br># Before (Claude Opus 4.1)&para;<br>model="claude-opus-4-1-20250805"&para;<br>&para;<br># After (Claude Opus 4.5)&para;<br>model="claude-opus-4-5-20251101"&para;<br>```&para;<br>&para;<br>Claude Opus 4.5 is our most intelligent model, combining maximum capability with practical performance. It features step-change improvements in vision, coding, and computer use at a more accessible price point than Opus 4.1. Ideal for complex specialized tasks and professional software engineering.&para;<br>&para;<br>&lt;Note&gt;&para;<br>For codebases with many model references, a [Claude Code plugin](https://github.com/anthropics/claude-code/tree/main/plugins/claude-opus-4-5-migration) is available to automate migration to Opus 4.5.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>### Migrating between Claude 4.5 models&para;<br>&para;<br>**No breaking changes.** All API calls will work without modification.&para;<br>&para;<br>Simply update your model ID.&para;<br>&para;<br>## Need help?&para;<br>&para;<br>- Check our [API documentation](/docs/en/api/overview) for detailed specifications&para;<br>- Review [model capabilities](/docs/en/about-claude/models/overview) for performance comparisons&para;<br>- Review [API release notes](/docs/en/release-notes/api) for API updates&para;<br>- Contact support if you encounter any issues during migration</ins></div>
        </div>

        <h2 style="margin-top: 2rem; margin-bottom: 1rem;">Unified Diff</h2>
        <pre><code>--- a/about-claude/models/migrating-to-claude-4.md
+++ b/about-claude/models/migrating-to-claude-4.md
@@ -0,0 +1,385 @@
+# Migrating to Claude 4.5
+
+---
+
+This guide covers two key migration paths to Claude 4.5 models:
+
+- **Claude Sonnet 3.7 â†’ Claude Sonnet 4.5**: Our most intelligent model with best-in-class reasoning, coding, and long-running agent capabilities
+- **Claude Haiku 3.5 â†’ Claude Haiku 4.5**: Our fastest and most intelligent Haiku model with near-frontier performance for real-time applications and high-volume intelligent processing
+
+Both migrations involve breaking changes that require updates to your implementation. This guide will walk you through each migration path with step-by-step instructions and clearly marked breaking changes.
+
+Before starting your migration, we recommend reviewing [What&#39;s new in Claude 4.5](/docs/en/about-claude/models/whats-new-claude-4-5) to understand the new features and capabilities available in these models, including extended thinking, context awareness, and behavioral improvements.
+
+## Migrating from Claude Sonnet 3.7 to Claude Sonnet 4.5
+
+Claude Sonnet 4.5 is our most intelligent model, offering best-in-class performance for reasoning, coding, and long-running autonomous agents. This migration includes several breaking changes that require updates to your implementation.
+
+### Migration steps
+
+1. **Update your model name:**
+   ```python
+   # Before (Claude Sonnet 3.7)
+   model=&#34;claude-3-7-sonnet-20250219&#34;
+
+   # After (Claude Sonnet 4.5)
+   model=&#34;claude-sonnet-4-5-20250929&#34;
+   ```
+
+2. **Update sampling parameters**
+
+   &lt;Warning&gt;
+   This is a breaking change from the Claude Sonnet 3.7.
+   &lt;/Warning&gt;
+
+   Use only `temperature` OR `top_p`, not both:
+
+   ```python
+   # Before (Claude Sonnet 3.7) - This will error in Sonnet 4.5
+   response = client.messages.create(
+       model=&#34;claude-3-7-sonnet-20250219&#34;,
+       temperature=0.7,
+       top_p=0.9,  # Cannot use both
+       ...
+   )
+
+   # After (Claude Sonnet 4.5)
+   response = client.messages.create(
+       model=&#34;claude-sonnet-4-5-20250929&#34;,
+       temperature=0.7,  # Use temperature OR top_p, not both
+       ...
+   )
+   ```
+
+3. **Handle the new `refusal` stop reason**
+
+   Update your application to [handle `refusal` stop reasons](/docs/en/test-and-evaluate/strengthen-guardrails/handle-streaming-refusals):
+
+   ```python
+   response = client.messages.create(...)
+
+   if response.stop_reason == &#34;refusal&#34;:
+       # Handle refusal appropriately
+       pass
+   ```
+
+4. **Update text editor tool (if applicable)**
+
+   &lt;Warning&gt;
+   This is a breaking change from the Claude Sonnet 3.7.
+   &lt;/Warning&gt;
+
+   Update to `text_editor_20250728` (type) and `str_replace_based_edit_tool` (name). Remove any code using the `undo_edit` command.
+   
+   ```python
+   # Before (Claude Sonnet 3.7)
+   tools=[{&#34;type&#34;: &#34;text_editor_20250124&#34;, &#34;name&#34;: &#34;str_replace_editor&#34;}]
+
+   # After (Claude Sonnet 4.5)
+   tools=[{&#34;type&#34;: &#34;text_editor_20250728&#34;, &#34;name&#34;: &#34;str_replace_based_edit_tool&#34;}]
+   ```
+
+   See [Text editor tool documentation](/docs/en/agents-and-tools/tool-use/text-editor-tool) for details.
+
+5. **Update code execution tool (if applicable)**
+
+   Upgrade to `code_execution_20250825`. The legacy version `code_execution_20250522` still works but is not recommended. See [Code execution tool documentation](/docs/en/agents-and-tools/tool-use/code-execution-tool#upgrade-to-latest-tool-version) for migration instructions.
+
+6. **Remove token-efficient tool use beta header**
+
+   Token-efficient tool use is a beta feature that only works with Claude 3.7 Sonnet. All Claude 4 models have built-in token-efficient tool use, so you should no longer include the beta header.
+
+   Remove the `token-efficient-tools-2025-02-19` [beta header](/docs/en/api/beta-headers) from your requests:
+
+   ```python
+   # Before (Claude Sonnet 3.7)
+   client.messages.create(
+       model=&#34;claude-3-7-sonnet-20250219&#34;,
+       betas=[&#34;token-efficient-tools-2025-02-19&#34;],  # Remove this
+       ...
+   )
+
+   # After (Claude Sonnet 4.5)
+   client.messages.create(
+       model=&#34;claude-sonnet-4-5-20250929&#34;,
+       # No token-efficient-tools beta header
+       ...
+   )
+   ```
+
+7. **Remove extended output beta header**
+
+   The `output-128k-2025-02-19` [beta header](/docs/en/api/beta-headers) for extended output is only available in Claude Sonnet 3.7.
+
+   Remove this header from your requests:
+
+   ```python
+   # Before (Claude Sonnet 3.7)
+   client.messages.create(
+       model=&#34;claude-3-7-sonnet-20250219&#34;,
+       betas=[&#34;output-128k-2025-02-19&#34;],  # Remove this
+       ...
+   )
+
+   # After (Claude Sonnet 4.5)
+   client.messages.create(
+       model=&#34;claude-sonnet-4-5-20250929&#34;,
+       # No output-128k beta header
+       ...
+   )
+   ```
+
+8. **Update your prompts for behavioral changes**
+
+   Claude Sonnet 4.5 has a more concise, direct communication style and requires explicit direction. Review [Claude 4 prompt engineering best practices](/docs/en/build-with-claude/prompt-engineering/claude-4-best-practices) for optimization guidance.
+
+9. **Consider enabling extended thinking for complex tasks**
+
+   Enable [extended thinking](/docs/en/build-with-claude/extended-thinking) for significant performance improvements on coding and reasoning tasks (disabled by default):
+
+   ```python
+   response = client.messages.create(
+       model=&#34;claude-sonnet-4-5-20250929&#34;,
+       max_tokens=16000,
+       thinking={&#34;type&#34;: &#34;enabled&#34;, &#34;budget_tokens&#34;: 10000},
+       messages=[...]
+   )
+   ```
+
+   &lt;Note&gt;
+   Extended thinking impacts [prompt caching](/docs/en/build-with-claude/prompt-caching#caching-with-thinking-blocks) efficiency.
+   &lt;/Note&gt;
+
+10. **Test your implementation**
+
+   Test in a development environment before deploying to production to ensure all breaking changes are properly handled.
+
+### Sonnet 3.7 â†’ 4.5 migration checklist
+
+- [ ] Update model ID to `claude-sonnet-4-5-20250929`
+- [ ] **BREAKING**: Update sampling parameters to use only `temperature` OR `top_p`, not both
+- [ ] Handle new `refusal` stop reason in your application
+- [ ] **BREAKING**: Update text editor tool to `text_editor_20250728` and `str_replace_based_edit_tool` (if applicable)
+- [ ] **BREAKING**: Remove any code using the `undo_edit` command (if applicable)
+- [ ] Update code execution tool to `code_execution_20250825` (if applicable)
+- [ ] Remove `token-efficient-tools-2025-02-19` beta header (if applicable)
+- [ ] Remove `output-128k-2025-02-19` beta header (if applicable)
+- [ ] Review and update prompts following [Claude 4 best practices](/docs/en/build-with-claude/prompt-engineering/claude-4-best-practices)
+- [ ] Consider enabling extended thinking for complex reasoning tasks
+- [ ] Handle `model_context_window_exceeded` stop reason (Sonnet 4.5 specific)
+- [ ] Consider enabling memory tool for long-running agents (beta)
+- [ ] Consider using automatic tool call clearing for context editing (beta)
+- [ ] Test in development environment before production deployment
+
+### Features removed from Claude Sonnet 3.7
+
+- **Token-efficient tool use**: The `token-efficient-tools-2025-02-19` beta header only works with Claude 3.7 Sonnet and is not supported in Claude 4 models (see step 6)
+- **Extended output**: The `output-128k-2025-02-19` beta header is not supported (see step 7)
+
+Both headers can be included in Claude 4 requests but will have no effect.
+
+## Migrating from Claude Haiku 3.5 to Claude Haiku 4.5
+
+Claude Haiku 4.5 is our fastest and most intelligent Haiku model with near-frontier performance, delivering premium model quality with real-time performance for interactive applications and high-volume intelligent processing. This migration includes several breaking changes that require updates to your implementation.
+
+For a complete overview of new capabilities, see [What&#39;s new in Claude 4.5](/docs/en/about-claude/models/whats-new-claude-4-5#key-improvements-in-haiku-4-5-over-haiku-3-5).
+
+&lt;Note&gt;
+Haiku 4.5 pricing $1 per million input tokens, $5 per million output tokens. See [Claude pricing](/docs/en/about-claude/pricing) for details.
+&lt;/Note&gt;
+
+### Migration steps
+
+1. **Update your model name:**
+   ```python
+   # Before (Haiku 3.5)
+   model=&#34;claude-3-5-haiku-20241022&#34;
+
+   # After (Haiku 4.5)
+   model=&#34;claude-haiku-4-5-20251001&#34;
+   ```
+
+2. **Update tool versions (if applicable)**
+
+   &lt;Warning&gt;
+   This is a breaking change from the Claude Haiku 3.5.
+   &lt;/Warning&gt;
+
+   Haiku 4.5 only supports the latest tool versions:
+
+   ```python
+   # Before (Haiku 3.5)
+   tools=[{&#34;type&#34;: &#34;text_editor_20250124&#34;, &#34;name&#34;: &#34;str_replace_editor&#34;}]
+
+   # After (Haiku 4.5)
+   tools=[{&#34;type&#34;: &#34;text_editor_20250728&#34;, &#34;name&#34;: &#34;str_replace_based_edit_tool&#34;}]
+   ```
+
+   - **Text editor**: Use `text_editor_20250728` and `str_replace_based_edit_tool`
+   - **Code execution**: Use `code_execution_20250825`
+   - Remove any code using the `undo_edit` command
+
+3. **Update sampling parameters**
+
+   &lt;Warning&gt;
+   This is a breaking change from the Claude Haiku 3.5.
+   &lt;/Warning&gt;
+
+   Use only `temperature` OR `top_p`, not both:
+
+   ```python
+   # Before (Haiku 3.5) - This will error in Haiku 4.5
+   response = client.messages.create(
+       model=&#34;claude-3-5-haiku-20241022&#34;,
+       temperature=0.7,
+       top_p=0.9,  # Cannot use both
+       ...
+   )
+
+   # After (Haiku 4.5)
+   response = client.messages.create(
+       model=&#34;claude-haiku-4-5-20251001&#34;,
+       temperature=0.7,  # Use temperature OR top_p, not both
+       ...
+   )
+   ```
+
+4. **Review new rate limits**
+
+   Haiku 4.5 has separate rate limits from Haiku 3.5. See [Rate limits documentation](/docs/en/api/rate-limits) for details.
+
+5. **Handle the new `refusal` stop reason**
+
+   Update your application to [handle refusal stop reasons](/docs/en/test-and-evaluate/strengthen-guardrails/handle-streaming-refusals).
+
+6. **Consider enabling extended thinking for complex tasks**
+
+   Enable [extended thinking](/docs/en/build-with-claude/extended-thinking) for significant performance improvements on coding and reasoning tasks (disabled by default):
+
+   ```python
+   response = client.messages.create(
+       model=&#34;claude-haiku-4-5-20251001&#34;,
+       max_tokens=16000,
+       thinking={&#34;type&#34;: &#34;enabled&#34;, &#34;budget_tokens&#34;: 5000},
+       messages=[...]
+   )
+   ```
+   &lt;Note&gt;
+   Extended thinking impacts [prompt caching](/docs/en/build-with-claude/prompt-caching#caching-with-thinking-blocks) efficiency.
+   &lt;/Note&gt;
+
+7. **Explore new capabilities**
+
+   See [What&#39;s new in Claude 4.5](/docs/en/about-claude/models/whats-new-claude-4-5#key-improvements-in-haiku-4-5-over-haiku-3-5) for details on context awareness, increased output capacity (64K tokens), higher intelligence, and improved speed.
+
+8. **Test your implementation**
+
+   Test in a development environment before deploying to production to ensure all breaking changes are properly handled.
+
+### Haiku 3.5 â†’ 4.5 migration checklist
+
+- [ ] Update model ID to `claude-haiku-4-5-20251001`
+- [ ] **BREAKING**: Update tool versions to latest (e.g., `text_editor_20250728`, `code_execution_20250825`) - legacy versions not supported
+- [ ] **BREAKING**: Remove any code using the `undo_edit` command (if applicable)
+- [ ] **BREAKING**: Update sampling parameters to use only `temperature` OR `top_p`, not both
+- [ ] Review and adjust for new rate limits (separate from Haiku 3.5)
+- [ ] Handle new `refusal` stop reason in your application
+- [ ] Consider enabling extended thinking for complex reasoning tasks (new capability)
+- [ ] Leverage context awareness for better token management in long sessions
+- [ ] Prepare for larger responses (max output increased from 8K to 64K tokens)
+- [ ] Review and update prompts following [Claude 4 best practices](/docs/en/build-with-claude/prompt-engineering/claude-4-best-practices)
+- [ ] Test in development environment before production deployment
+
+## Choosing between Sonnet 4.5 and Haiku 4.5
+
+Both Claude Sonnet 4.5 and Claude Haiku 4.5 are powerful Claude 4 models with different strengths:
+
+### Choose Claude Sonnet 4.5 (most intelligent) for:
+
+- **Complex reasoning and analysis**: Best-in-class intelligence for sophisticated tasks
+- **Long-running autonomous agents**: Superior performance for agents working independently for extended periods
+- **Advanced coding tasks**: Our strongest coding model with advanced planning and security engineering
+- **Large context workflows**: Enhanced context management with memory tool and context editing capabilities
+- **Tasks requiring maximum capability**: When intelligence and accuracy are the top priorities
+
+### Choose Claude Haiku 4.5 (fastest and most intelligent Haiku) for:
+
+- **Real-time applications**: Fast response times for interactive user experiences with near-frontier performance
+- **High-volume intelligent processing**: Cost-effective intelligence at scale with improved speed
+- **Cost-sensitive deployments**: Near-frontier performance at lower price points
+- **Sub-agent architectures**: Fast, intelligent agents for multi-agent systems
+- **Computer use at scale**: Cost-effective autonomous desktop and browser automation
+- **Tasks requiring speed**: When low latency is critical while maintaining near-frontier intelligence
+
+### Extended thinking recommendations
+
+Claude 4 models, particularly Sonnet and Haiku 4.5, show significant performance improvements when using [extended thinking](/docs/en/build-with-claude/extended-thinking) for coding and complex reasoning tasks. Extended thinking is **disabled by default** but we recommend enabling it for demanding work.
+
+**Important**: Extended thinking impacts [prompt caching](/docs/en/build-with-claude/prompt-caching#caching-with-thinking-blocks) efficiency. When non-tool-result content is added to a conversation, thinking blocks are stripped from cache, which can increase costs in multi-turn conversations. We recommend enabling thinking when the performance benefits outweigh the caching trade-off.
+
+## Other migration scenarios
+
+The primary migration paths covered above (Sonnet 3.7 â†’ 4.5 and Haiku 3.5 â†’ 4.5) represent the most common upgrades. However, you may be migrating from other Claude models to Claude 4.5. This section covers those scenarios.
+
+### Migrating from Claude Sonnet 4 â†’ Sonnet 4.5
+
+**Breaking change**: Cannot specify both `temperature` and `top_p` in the same request.
+
+All other API calls will work without modification. Update your model ID and adjust sampling parameters if needed:
+
+```python
+# Before (Claude Sonnet 4)
+model=&#34;claude-sonnet-4-20250514&#34;
+
+# After (Claude Sonnet 4.5)
+model=&#34;claude-sonnet-4-5-20250929&#34;
+```
+
+### Migrating from Claude Opus 4.1 â†’ Sonnet 4.5
+
+**No breaking changes.** All API calls will work without modification.
+
+Simply update your model ID:
+
+```python
+# Before (Claude Opus 4.1)
+model=&#34;claude-opus-4-1-20250805&#34;
+
+# After (Claude Sonnet 4.5)
+model=&#34;claude-sonnet-4-5-20250929&#34;
+```
+
+Claude Sonnet 4.5 is our most intelligent model with best-in-class reasoning, coding, and long-running agent capabilities. It offers superior performance compared to Opus 4.1 for most use cases.
+
+### Migrating from Claude Opus 4.1 â†’ Opus 4.5
+
+**No breaking changes.** All API calls will work without modification.
+
+Simply update your model ID:
+
+```python
+# Before (Claude Opus 4.1)
+model=&#34;claude-opus-4-1-20250805&#34;
+
+# After (Claude Opus 4.5)
+model=&#34;claude-opus-4-5-20251101&#34;
+```
+
+Claude Opus 4.5 is our most intelligent model, combining maximum capability with practical performance. It features step-change improvements in vision, coding, and computer use at a more accessible price point than Opus 4.1. Ideal for complex specialized tasks and professional software engineering.
+
+&lt;Note&gt;
+For codebases with many model references, a [Claude Code plugin](https://github.com/anthropics/claude-code/tree/main/plugins/claude-opus-4-5-migration) is available to automate migration to Opus 4.5.
+&lt;/Note&gt;
+
+### Migrating between Claude 4.5 models
+
+**No breaking changes.** All API calls will work without modification.
+
+Simply update your model ID.
+
+## Need help?
+
+- Check our [API documentation](/docs/en/api/overview) for detailed specifications
+- Review [model capabilities](/docs/en/about-claude/models/overview) for performance comparisons
+- Review [API release notes](/docs/en/release-notes/api) for API updates
+- Contact support if you encounter any issues during migration</code></pre>
    </div>
</body>
</html>