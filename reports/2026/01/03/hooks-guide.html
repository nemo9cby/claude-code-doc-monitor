<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hooks-guide - Diff Report</title>
    <link rel="stylesheet" href="../../css/diff.css">
    <style>
        :root {
            --bg-color: #1a1a2e;
            --card-bg: #16213e;
            --text-color: #eee;
            --accent: #0f3460;
            --add-bg: #1a4d1a;
            --del-bg: #4d1a1a;
            --add-text: #4ade80;
            --del-text: #f87171;
        }
        @media (prefers-color-scheme: light) {
            :root {
                --bg-color: #f5f5f5;
                --card-bg: #fff;
                --text-color: #333;
                --accent: #e0e0e0;
                --add-bg: #d4edda;
                --del-bg: #f8d7da;
                --add-text: #155724;
                --del-text: #721c24;
            }
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 2rem;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { margin-bottom: 2rem; }
        h1 { font-size: 1.5rem; margin-bottom: 0.5rem; }
        .meta { color: #888; font-size: 0.9rem; }
        .summary {
            background: var(--card-bg);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            display: flex;
            gap: 2rem;
        }
        .stat { display: flex; align-items: center; gap: 0.5rem; }
        .stat.added { color: var(--add-text); }
        .stat.removed { color: var(--del-text); }
        .diff-container {
            background: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
        }
        .diff-header {
            background: var(--accent);
            padding: 0.75rem 1rem;
            font-weight: 600;
        }
        .diff-content {
            padding: 1rem;
            overflow-x: auto;
        }
        .diff-content ins {
            background: var(--add-bg);
            color: var(--add-text);
            text-decoration: none;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        .diff-content del {
            background: var(--del-bg);
            color: var(--del-text);
            text-decoration: line-through;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        pre {
            background: var(--accent);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.85rem;
            margin-top: 2rem;
        }
        a { color: #60a5fa; }
        .back-link { margin-bottom: 1rem; display: inline-block; }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">&larr; Back to daily report</a>

        <header>
            <h1>hooks-guide.md</h1>
            <p class="meta">Changed on 2026-01-03</p>
        </header>

        <div class="summary">
            <div class="stat added">
                <span>+194</span> lines added
            </div>
            <div class="stat removed">
                <span>-0</span> lines removed
            </div>
        </div>

        <div class="diff-container">
            <div class="diff-header">Visual Diff</div>
            <div class="diff-content"><ins style="background:#e6ffe6;"># Get started with Claude Code hooks&para;<br>&para;<br>&gt; Learn how to customize and extend Claude Code's behavior by registering shell commands&para;<br>&para;<br>Claude Code hooks are user-defined shell commands that execute at various points&para;<br>in Claude Code's lifecycle. Hooks provide deterministic control over Claude&para;<br>Code's behavior, ensuring certain actions always happen rather than relying on&para;<br>the LLM to choose to run them.&para;<br>&para;<br>&lt;Tip&gt;&para;<br>  For reference documentation on hooks, see [Hooks reference](/en/hooks).&para;<br>&lt;/Tip&gt;&para;<br>&para;<br>Example use cases for hooks include:&para;<br>&para;<br>* **Notifications**: Customize how you get notified when Claude Code is awaiting&para;<br>  your input or permission to run something.&para;<br>* **Automatic formatting**: Run `prettier` on .ts files, `gofmt` on .go files,&para;<br>  etc. after every file edit.&para;<br>* **Logging**: Track and count all executed commands for compliance or&para;<br>  debugging.&para;<br>* **Feedback**: Provide automated feedback when Claude Code produces code that&para;<br>  does not follow your codebase conventions.&para;<br>* **Custom permissions**: Block modifications to production files or sensitive&para;<br>  directories.&para;<br>&para;<br>By encoding these rules as hooks rather than prompting instructions, you turn&para;<br>suggestions into app-level code that executes every time it is expected to run.&para;<br>&para;<br>&lt;Warning&gt;&para;<br>  You must consider the security implication of hooks as you add them, because hooks run automatically during the agent loop with your current environment's credentials.&para;<br>  For example, malicious hooks code can exfiltrate your data. Always review your hooks implementation before registering them.&para;<br>&para;<br>  For full security best practices, see [Security Considerations](/en/hooks#security-considerations) in the hooks reference documentation.&para;<br>&lt;/Warning&gt;&para;<br>&para;<br>## Hook Events Overview&para;<br>&para;<br>Claude Code provides several hook events that run at different points in the&para;<br>workflow:&para;<br>&para;<br>* **PreToolUse**: Runs before tool calls (can block them)&para;<br>* **PermissionRequest**: Runs when a permission dialog is shown (can allow or deny)&para;<br>* **PostToolUse**: Runs after tool calls complete&para;<br>* **UserPromptSubmit**: Runs when the user submits a prompt, before Claude processes it&para;<br>* **Notification**: Runs when Claude Code sends notifications&para;<br>* **Stop**: Runs when Claude Code finishes responding&para;<br>* **SubagentStop**: Runs when subagent tasks complete&para;<br>* **PreCompact**: Runs before Claude Code is about to run a compact operation&para;<br>* **SessionStart**: Runs when Claude Code starts a new session or resumes an existing session&para;<br>* **SessionEnd**: Runs when Claude Code session ends&para;<br>&para;<br>Each event receives different data and can control Claude's behavior in&para;<br>different ways.&para;<br>&para;<br>## Quickstart&para;<br>&para;<br>In this quickstart, you'll add a hook that logs the shell commands that Claude&para;<br>Code runs.&para;<br>&para;<br>### Prerequisites&para;<br>&para;<br>Install `jq` for JSON processing in the command line.&para;<br>&para;<br>### Step 1: Open hooks configuration&para;<br>&para;<br>Run the `/hooks` [slash command](/en/slash-commands) and select&para;<br>the `PreToolUse` hook event.&para;<br>&para;<br>`PreToolUse` hooks run before tool calls and can block them while providing&para;<br>Claude feedback on what to do differently.&para;<br>&para;<br>### Step 2: Add a matcher&para;<br>&para;<br>Select `+ Add new matcher…` to run your hook only on Bash tool calls.&para;<br>&para;<br>Type `Bash` for the matcher.&para;<br>&para;<br>&lt;Note&gt;You can use `*` to match all tools.&lt;/Note&gt;&para;<br>&para;<br>### Step 3: Add the hook&para;<br>&para;<br>Select `+ Add new hook…` and enter this command:&para;<br>&para;<br>```bash  theme={null}&para;<br>jq -r '"\(.tool_input.command) - \(.tool_input.description // "No description")"' &gt;&gt; ~/.claude/bash-command-log.txt&para;<br>```&para;<br>&para;<br>### Step 4: Save your configuration&para;<br>&para;<br>For storage location, select `User settings` since you're logging to your home&para;<br>directory. This hook will then apply to all projects, not just your current&para;<br>project.&para;<br>&para;<br>Then press `Esc` until you return to the REPL. Your hook is now registered.&para;<br>&para;<br>### Step 5: Verify your hook&para;<br>&para;<br>Run `/hooks` again or check `~/.claude/settings.json` to see your configuration:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "hooks": {&para;<br>    "PreToolUse": [&para;<br>      {&para;<br>        "matcher": "Bash",&para;<br>        "hooks": [&para;<br>          {&para;<br>            "type": "command",&para;<br>            "command": "jq -r '\"\\(.tool_input.command) - \\(.tool_input.description // \"No description\")\"' &gt;&gt; ~/.claude/bash-command-log.txt"&para;<br>          }&para;<br>        ]&para;<br>      }&para;<br>    ]&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>### Step 6: Test your hook&para;<br>&para;<br>Ask Claude to run a simple command like `ls` and check your log file:&para;<br>&para;<br>```bash  theme={null}&para;<br>cat ~/.claude/bash-command-log.txt&para;<br>```&para;<br>&para;<br>You should see entries like:&para;<br>&para;<br>```&para;<br>ls - Lists files and directories&para;<br>```&para;<br>&para;<br>## More Examples&para;<br>&para;<br>&lt;Note&gt;&para;<br>  For a complete example implementation, see the [bash command validator example](https://github.com/anthropics/claude-code/blob/main/examples/hooks/bash_command_validator_example.py) in our public codebase.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>### Code Formatting Hook&para;<br>&para;<br>Automatically format TypeScript files after editing:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "hooks": {&para;<br>    "PostToolUse": [&para;<br>      {&para;<br>        "matcher": "Edit|Write",&para;<br>        "hooks": [&para;<br>          {&para;<br>            "type": "command",&para;<br>            "command": "jq -r '.tool_input.file_path' | { read file_path; if echo \"$file_path\" | grep -q '\\.ts$'; then npx prettier --write \"$file_path\"; fi; }"&para;<br>          }&para;<br>        ]&para;<br>      }&para;<br>    ]&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>### Markdown Formatting Hook&para;<br>&para;<br>Automatically fix missing language tags and formatting issues in markdown files:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "hooks": {&para;<br>    "PostToolUse": [&para;<br>      {&para;<br>        "matcher": "Edit|Write",&para;<br>        "hooks": [&para;<br>          {&para;<br>            "type": "command",&para;<br>            "command": "\"$CLAUDE_PROJECT_DIR\"/.claude/hooks/markdown_formatter.py"&para;<br>          }&para;<br>        ]&para;<br>      }&para;<br>    ]&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>Create `.claude/hooks/markdown_formatter.py` with this content:&para;<br>&para;<br>````python  theme={null}&para;<br>#!/usr/bin/env python3&para;<br>"""&para;<br>Markdown formatter for Claude Code output.&para;<br>Fixes missing language tags and spacing issues while preserving code content.&para;<br>"""&para;<br>import json&para;<br>import sys&para;<br>import re&para;<br>import os&para;<br>&para;<br>def detect_language(code):&para;<br>    """Best-effort language detection from code content."""&para;<br>    s = code.strip()&para;<br>    &para;<br>    # JSON detection&para;<br>    if re.search(r'^\s*[{\[]', s):&para;<br>        try:&para;<br>            json.loads(s)&para;<br>            return 'json'&para;<br>        except:&para;<br>            pass&para;<br>    &para;<br>    # Python detection&para;<br>    if re.search(r'^\s*def\s+\w+\s*\(', s, re.M) or \&para;<br>       re.search(r'^\s*(import|from)\s+\w+', s, re.M):&para;<br>        return 'python'&para;<br>    &para;<br>    # JavaScript detection  &para;<br>    if re.search(r'\b(function\s+\w+\s*\(|const\s+\w+\s*=)', s) or \&para;<br>       re.search(r'=&gt;|console\.(log|error)', s):&para;<br>        return 'javascript'&para;<br>    &para;<br>    # Bash detection&para;<br>    if re.search(r'^#!.*\b(bash|sh)\b', s, re.M) or \&para;<br>       re.search(r'\b(if|then|fi|for|in|do|done)\b', s):&para;<br>        return 'bash'&para;<br>    &para;<br>    # SQL detection&para;<br>    if re.search(r'\b(SELECT|INSERT|UPDATE|DELETE|CREATE)\s+', s, re.I):&para;<br>        return 'sql'&para;<br>        &para;<br>    return 'text'&para;<br>&para;<br>def format_markdown(content):&para;<br>    """Format markdown content with language detection."""&para;<br>    # Fix unlabeled code fences&para;<br>    def add_lang_to_fence(match):&para;<br>        indent, info, body, closing = match.groups()&para;<br>        if not info.strip():&para;<br>            lang = detect_language(body)&para;<br>            return f"{indent}```{lang}\n{body}{closing}\n"&para;<br>        return match.group(0)&para;<br>    &para;<br>    fence_pattern = r'(?ms)^([ \t]{0,3})```([^\n]*)\n(.*?)(\n\1```)\s*$'&para;<br>    content = re.sub(fence_pattern, add_lang_to_fence, content)&para;<br>    &para;<br>    # Fix excessive blank lines (only outside code fences)&para;<br>    content = re.sub(r'\n{3,}', '\n\n', content)&para;<br>    &para;<br>    return content.rstrip() + '\n'&para;<br>&para;<br># Main execution&para;<br>try:&para;<br>    input_data = json.load(sys.stdin)&para;<br>    file_path = input_data.get('tool_input', {}).get('file_path', '')&para;<br>    &para;<br>    if not file_path.endswith(('.md', '.mdx')):&para;<br>        sys.exit(0)  # Not a markdown file&para;<br>    &para;<br>    if os.path.exists(file_path):&para;<br>        with open(file_path, 'r', encoding='utf-8') as f:&para;<br>            content = f.read()&para;<br>        &para;<br>        formatted = format_markdown(content)&para;<br>        &para;<br>        if formatted != content:&para;<br>            with open(file_path, 'w', encoding='utf-8') as f:&para;<br>                f.write(formatted)&para;<br>            print(f"✓ Fixed markdown formatting in {file_path}")&para;<br>    &para;<br>except Exception as e:&para;<br>    print(f"Error formatting markdown: {e}", file=sys.stderr)&para;<br>    sys.exit(1)&para;<br>````&para;<br>&para;<br>Make the script executable:&para;<br>&para;<br>```bash  theme={null}&para;<br>chmod +x .claude/hooks/markdown_formatter.py&para;<br>```&para;<br>&para;<br>This hook automatically:&para;<br>&para;<br>* Detects programming languages in unlabeled code blocks&para;<br>* Adds appropriate language tags for syntax highlighting&para;<br>* Fixes excessive blank lines while preserving code content&para;<br>* Only processes markdown files (`.md`, `.mdx`)&para;<br>&para;<br>### Custom Notification Hook&para;<br>&para;<br>Get desktop notifications when Claude needs input:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "hooks": {&para;<br>    "Notification": [&para;<br>      {&para;<br>        "matcher": "",&para;<br>        "hooks": [&para;<br>          {&para;<br>            "type": "command",&para;<br>            "command": "notify-send 'Claude Code' 'Awaiting your input'"&para;<br>          }&para;<br>        ]&para;<br>      }&para;<br>    ]&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>### File Protection Hook&para;<br>&para;<br>Block edits to sensitive files:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "hooks": {&para;<br>    "PreToolUse": [&para;<br>      {&para;<br>        "matcher": "Edit|Write",&para;<br>        "hooks": [&para;<br>          {&para;<br>            "type": "command",&para;<br>            "command": "python3 -c \"import json, sys; data=json.load(sys.stdin); path=data.get('tool_input',{}).get('file_path',''); sys.exit(2 if any(p in path for p in ['.env', 'package-lock.json', '.git/']) else 0)\""&para;<br>          }&para;<br>        ]&para;<br>      }&para;<br>    ]&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>## Learn more&para;<br>&para;<br>* For reference documentation on hooks, see [Hooks reference](/en/hooks).&para;<br>* For comprehensive security best practices and safety guidelines, see [Security Considerations](/en/hooks#security-considerations) in the hooks reference documentation.&para;<br>* For troubleshooting steps and debugging techniques, see [Debugging](/en/hooks#debugging) in the hooks reference&para;<br>  documentation.&para;<br>&para;<br>&para;<br>---&para;<br>&para;<br>&gt; To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt</ins></div>
        </div>

        <h2 style="margin-top: 2rem; margin-bottom: 1rem;">Unified Diff</h2>
        <pre><code>--- a/hooks-guide.md
+++ b/hooks-guide.md
@@ -0,0 +1,338 @@
+# Get started with Claude Code hooks
+
+&gt; Learn how to customize and extend Claude Code&#39;s behavior by registering shell commands
+
+Claude Code hooks are user-defined shell commands that execute at various points
+in Claude Code&#39;s lifecycle. Hooks provide deterministic control over Claude
+Code&#39;s behavior, ensuring certain actions always happen rather than relying on
+the LLM to choose to run them.
+
+&lt;Tip&gt;
+  For reference documentation on hooks, see [Hooks reference](/en/hooks).
+&lt;/Tip&gt;
+
+Example use cases for hooks include:
+
+* **Notifications**: Customize how you get notified when Claude Code is awaiting
+  your input or permission to run something.
+* **Automatic formatting**: Run `prettier` on .ts files, `gofmt` on .go files,
+  etc. after every file edit.
+* **Logging**: Track and count all executed commands for compliance or
+  debugging.
+* **Feedback**: Provide automated feedback when Claude Code produces code that
+  does not follow your codebase conventions.
+* **Custom permissions**: Block modifications to production files or sensitive
+  directories.
+
+By encoding these rules as hooks rather than prompting instructions, you turn
+suggestions into app-level code that executes every time it is expected to run.
+
+&lt;Warning&gt;
+  You must consider the security implication of hooks as you add them, because hooks run automatically during the agent loop with your current environment&#39;s credentials.
+  For example, malicious hooks code can exfiltrate your data. Always review your hooks implementation before registering them.
+
+  For full security best practices, see [Security Considerations](/en/hooks#security-considerations) in the hooks reference documentation.
+&lt;/Warning&gt;
+
+## Hook Events Overview
+
+Claude Code provides several hook events that run at different points in the
+workflow:
+
+* **PreToolUse**: Runs before tool calls (can block them)
+* **PermissionRequest**: Runs when a permission dialog is shown (can allow or deny)
+* **PostToolUse**: Runs after tool calls complete
+* **UserPromptSubmit**: Runs when the user submits a prompt, before Claude processes it
+* **Notification**: Runs when Claude Code sends notifications
+* **Stop**: Runs when Claude Code finishes responding
+* **SubagentStop**: Runs when subagent tasks complete
+* **PreCompact**: Runs before Claude Code is about to run a compact operation
+* **SessionStart**: Runs when Claude Code starts a new session or resumes an existing session
+* **SessionEnd**: Runs when Claude Code session ends
+
+Each event receives different data and can control Claude&#39;s behavior in
+different ways.
+
+## Quickstart
+
+In this quickstart, you&#39;ll add a hook that logs the shell commands that Claude
+Code runs.
+
+### Prerequisites
+
+Install `jq` for JSON processing in the command line.
+
+### Step 1: Open hooks configuration
+
+Run the `/hooks` [slash command](/en/slash-commands) and select
+the `PreToolUse` hook event.
+
+`PreToolUse` hooks run before tool calls and can block them while providing
+Claude feedback on what to do differently.
+
+### Step 2: Add a matcher
+
+Select `+ Add new matcher…` to run your hook only on Bash tool calls.
+
+Type `Bash` for the matcher.
+
+&lt;Note&gt;You can use `*` to match all tools.&lt;/Note&gt;
+
+### Step 3: Add the hook
+
+Select `+ Add new hook…` and enter this command:
+
+```bash  theme={null}
+jq -r &#39;&#34;\(.tool_input.command) - \(.tool_input.description // &#34;No description&#34;)&#34;&#39; &gt;&gt; ~/.claude/bash-command-log.txt
+```
+
+### Step 4: Save your configuration
+
+For storage location, select `User settings` since you&#39;re logging to your home
+directory. This hook will then apply to all projects, not just your current
+project.
+
+Then press `Esc` until you return to the REPL. Your hook is now registered.
+
+### Step 5: Verify your hook
+
+Run `/hooks` again or check `~/.claude/settings.json` to see your configuration:
+
+```json  theme={null}
+{
+  &#34;hooks&#34;: {
+    &#34;PreToolUse&#34;: [
+      {
+        &#34;matcher&#34;: &#34;Bash&#34;,
+        &#34;hooks&#34;: [
+          {
+            &#34;type&#34;: &#34;command&#34;,
+            &#34;command&#34;: &#34;jq -r &#39;\&#34;\\(.tool_input.command) - \\(.tool_input.description // \&#34;No description\&#34;)\&#34;&#39; &gt;&gt; ~/.claude/bash-command-log.txt&#34;
+          }
+        ]
+      }
+    ]
+  }
+}
+```
+
+### Step 6: Test your hook
+
+Ask Claude to run a simple command like `ls` and check your log file:
+
+```bash  theme={null}
+cat ~/.claude/bash-command-log.txt
+```
+
+You should see entries like:
+
+```
+ls - Lists files and directories
+```
+
+## More Examples
+
+&lt;Note&gt;
+  For a complete example implementation, see the [bash command validator example](https://github.com/anthropics/claude-code/blob/main/examples/hooks/bash_command_validator_example.py) in our public codebase.
+&lt;/Note&gt;
+
+### Code Formatting Hook
+
+Automatically format TypeScript files after editing:
+
+```json  theme={null}
+{
+  &#34;hooks&#34;: {
+    &#34;PostToolUse&#34;: [
+      {
+        &#34;matcher&#34;: &#34;Edit|Write&#34;,
+        &#34;hooks&#34;: [
+          {
+            &#34;type&#34;: &#34;command&#34;,
+            &#34;command&#34;: &#34;jq -r &#39;.tool_input.file_path&#39; | { read file_path; if echo \&#34;$file_path\&#34; | grep -q &#39;\\.ts$&#39;; then npx prettier --write \&#34;$file_path\&#34;; fi; }&#34;
+          }
+        ]
+      }
+    ]
+  }
+}
+```
+
+### Markdown Formatting Hook
+
+Automatically fix missing language tags and formatting issues in markdown files:
+
+```json  theme={null}
+{
+  &#34;hooks&#34;: {
+    &#34;PostToolUse&#34;: [
+      {
+        &#34;matcher&#34;: &#34;Edit|Write&#34;,
+        &#34;hooks&#34;: [
+          {
+            &#34;type&#34;: &#34;command&#34;,
+            &#34;command&#34;: &#34;\&#34;$CLAUDE_PROJECT_DIR\&#34;/.claude/hooks/markdown_formatter.py&#34;
+          }
+        ]
+      }
+    ]
+  }
+}
+```
+
+Create `.claude/hooks/markdown_formatter.py` with this content:
+
+````python  theme={null}
+#!/usr/bin/env python3
+&#34;&#34;&#34;
+Markdown formatter for Claude Code output.
+Fixes missing language tags and spacing issues while preserving code content.
+&#34;&#34;&#34;
+import json
+import sys
+import re
+import os
+
+def detect_language(code):
+    &#34;&#34;&#34;Best-effort language detection from code content.&#34;&#34;&#34;
+    s = code.strip()
+    
+    # JSON detection
+    if re.search(r&#39;^\s*[{\[]&#39;, s):
+        try:
+            json.loads(s)
+            return &#39;json&#39;
+        except:
+            pass
+    
+    # Python detection
+    if re.search(r&#39;^\s*def\s+\w+\s*\(&#39;, s, re.M) or \
+       re.search(r&#39;^\s*(import|from)\s+\w+&#39;, s, re.M):
+        return &#39;python&#39;
+    
+    # JavaScript detection  
+    if re.search(r&#39;\b(function\s+\w+\s*\(|const\s+\w+\s*=)&#39;, s) or \
+       re.search(r&#39;=&gt;|console\.(log|error)&#39;, s):
+        return &#39;javascript&#39;
+    
+    # Bash detection
+    if re.search(r&#39;^#!.*\b(bash|sh)\b&#39;, s, re.M) or \
+       re.search(r&#39;\b(if|then|fi|for|in|do|done)\b&#39;, s):
+        return &#39;bash&#39;
+    
+    # SQL detection
+    if re.search(r&#39;\b(SELECT|INSERT|UPDATE|DELETE|CREATE)\s+&#39;, s, re.I):
+        return &#39;sql&#39;
+        
+    return &#39;text&#39;
+
+def format_markdown(content):
+    &#34;&#34;&#34;Format markdown content with language detection.&#34;&#34;&#34;
+    # Fix unlabeled code fences
+    def add_lang_to_fence(match):
+        indent, info, body, closing = match.groups()
+        if not info.strip():
+            lang = detect_language(body)
+            return f&#34;{indent}```{lang}\n{body}{closing}\n&#34;
+        return match.group(0)
+    
+    fence_pattern = r&#39;(?ms)^([ \t]{0,3})```([^\n]*)\n(.*?)(\n\1```)\s*$&#39;
+    content = re.sub(fence_pattern, add_lang_to_fence, content)
+    
+    # Fix excessive blank lines (only outside code fences)
+    content = re.sub(r&#39;\n{3,}&#39;, &#39;\n\n&#39;, content)
+    
+    return content.rstrip() + &#39;\n&#39;
+
+# Main execution
+try:
+    input_data = json.load(sys.stdin)
+    file_path = input_data.get(&#39;tool_input&#39;, {}).get(&#39;file_path&#39;, &#39;&#39;)
+    
+    if not file_path.endswith((&#39;.md&#39;, &#39;.mdx&#39;)):
+        sys.exit(0)  # Not a markdown file
+    
+    if os.path.exists(file_path):
+        with open(file_path, &#39;r&#39;, encoding=&#39;utf-8&#39;) as f:
+            content = f.read()
+        
+        formatted = format_markdown(content)
+        
+        if formatted != content:
+            with open(file_path, &#39;w&#39;, encoding=&#39;utf-8&#39;) as f:
+                f.write(formatted)
+            print(f&#34;✓ Fixed markdown formatting in {file_path}&#34;)
+    
+except Exception as e:
+    print(f&#34;Error formatting markdown: {e}&#34;, file=sys.stderr)
+    sys.exit(1)
+````
+
+Make the script executable:
+
+```bash  theme={null}
+chmod +x .claude/hooks/markdown_formatter.py
+```
+
+This hook automatically:
+
+* Detects programming languages in unlabeled code blocks
+* Adds appropriate language tags for syntax highlighting
+* Fixes excessive blank lines while preserving code content
+* Only processes markdown files (`.md`, `.mdx`)
+
+### Custom Notification Hook
+
+Get desktop notifications when Claude needs input:
+
+```json  theme={null}
+{
+  &#34;hooks&#34;: {
+    &#34;Notification&#34;: [
+      {
+        &#34;matcher&#34;: &#34;&#34;,
+        &#34;hooks&#34;: [
+          {
+            &#34;type&#34;: &#34;command&#34;,
+            &#34;command&#34;: &#34;notify-send &#39;Claude Code&#39; &#39;Awaiting your input&#39;&#34;
+          }
+        ]
+      }
+    ]
+  }
+}
+```
+
+### File Protection Hook
+
+Block edits to sensitive files:
+
+```json  theme={null}
+{
+  &#34;hooks&#34;: {
+    &#34;PreToolUse&#34;: [
+      {
+        &#34;matcher&#34;: &#34;Edit|Write&#34;,
+        &#34;hooks&#34;: [
+          {
+            &#34;type&#34;: &#34;command&#34;,
+            &#34;command&#34;: &#34;python3 -c \&#34;import json, sys; data=json.load(sys.stdin); path=data.get(&#39;tool_input&#39;,{}).get(&#39;file_path&#39;,&#39;&#39;); sys.exit(2 if any(p in path for p in [&#39;.env&#39;, &#39;package-lock.json&#39;, &#39;.git/&#39;]) else 0)\&#34;&#34;
+          }
+        ]
+      }
+    ]
+  }
+}
+```
+
+## Learn more
+
+* For reference documentation on hooks, see [Hooks reference](/en/hooks).
+* For comprehensive security best practices and safety guidelines, see [Security Considerations](/en/hooks#security-considerations) in the hooks reference documentation.
+* For troubleshooting steps and debugging techniques, see [Debugging](/en/hooks#debugging) in the hooks reference
+  documentation.
+
+
+---
+
+&gt; To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt</code></pre>
    </div>
</body>
</html>