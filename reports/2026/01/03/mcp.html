<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mcp - Diff Report</title>
    <link rel="stylesheet" href="../../css/diff.css">
    <style>
        :root {
            --bg-color: #1a1a2e;
            --card-bg: #16213e;
            --text-color: #eee;
            --accent: #0f3460;
            --add-bg: #1a4d1a;
            --del-bg: #4d1a1a;
            --add-text: #4ade80;
            --del-text: #f87171;
        }
        @media (prefers-color-scheme: light) {
            :root {
                --bg-color: #f5f5f5;
                --card-bg: #fff;
                --text-color: #333;
                --accent: #e0e0e0;
                --add-bg: #d4edda;
                --del-bg: #f8d7da;
                --add-text: #155724;
                --del-text: #721c24;
            }
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 2rem;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { margin-bottom: 2rem; }
        h1 { font-size: 1.5rem; margin-bottom: 0.5rem; }
        .meta { color: #888; font-size: 0.9rem; }
        .summary {
            background: var(--card-bg);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            display: flex;
            gap: 2rem;
        }
        .stat { display: flex; align-items: center; gap: 0.5rem; }
        .stat.added { color: var(--add-text); }
        .stat.removed { color: var(--del-text); }
        .diff-container {
            background: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
        }
        .diff-header {
            background: var(--accent);
            padding: 0.75rem 1rem;
            font-weight: 600;
        }
        .diff-content {
            padding: 1rem;
            overflow-x: auto;
        }
        .diff-content ins {
            background: var(--add-bg);
            color: var(--add-text);
            text-decoration: none;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        .diff-content del {
            background: var(--del-bg);
            color: var(--del-text);
            text-decoration: line-through;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        pre {
            background: var(--accent);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.85rem;
            margin-top: 2rem;
        }
        a { color: #60a5fa; }
        .back-link { margin-bottom: 1rem; display: inline-block; }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">&larr; Back to daily report</a>

        <header>
            <h1>mcp.md</h1>
            <p class="meta">Changed on 2026-01-03</p>
        </header>

        <div class="summary">
            <div class="stat added">
                <span>+623</span> lines added
            </div>
            <div class="stat removed">
                <span>-0</span> lines removed
            </div>
        </div>

        <div class="diff-container">
            <div class="diff-header">Visual Diff</div>
            <div class="diff-content"><ins style="background:#e6ffe6;"># Connect Claude Code to tools via MCP&para;<br>&para;<br>&gt; Learn how to connect Claude Code to your tools with the Model Context Protocol.&para;<br>&para;<br>export const MCPServersTable = ({platform = "all"}) =&gt; {&para;<br>  const ifYouAreAnAiAgentReadingThisYouShouldInsteadFetch = 'https://api.anthropic.com/mcp-registry/docs';&para;<br>  const [servers, setServers] = useState([]);&para;<br>  const [loading, setLoading] = useState(true);&para;<br>  const [error, setError] = useState(null);&para;<br>  useEffect(() =&gt; {&para;<br>    const fetchServers = async () =&gt; {&para;<br>      try {&para;<br>        setLoading(true);&para;<br>        const allServers = [];&para;<br>        let cursor = null;&para;<br>        do {&para;<br>          const url = new URL('https://api.anthropic.com/mcp-registry/v0/servers');&para;<br>          url.searchParams.set('version', 'latest');&para;<br>          url.searchParams.set('limit', '100');&para;<br>          if (cursor) {&para;<br>            url.searchParams.set('cursor', cursor);&para;<br>          }&para;<br>          const response = await fetch(url);&para;<br>          if (!response.ok) {&para;<br>            throw new Error(`Failed to fetch MCP registry: ${response.status}`);&para;<br>          }&para;<br>          const data = await response.json();&para;<br>          allServers.push(...data.servers);&para;<br>          cursor = data.metadata?.nextCursor || null;&para;<br>        } while (cursor);&para;<br>        const transformedServers = allServers.map(item =&gt; {&para;<br>          const server = item.server;&para;<br>          const meta = item._meta?.['com.anthropic.api/mcp-registry'] || ({});&para;<br>          const worksWith = meta.worksWith || [];&para;<br>          const availability = {&para;<br>            claudeCode: worksWith.includes('claude-code'),&para;<br>            mcpConnector: worksWith.includes('claude-api'),&para;<br>            claudeDesktop: worksWith.includes('claude-desktop')&para;<br>          };&para;<br>          const remoteUrl = server.remotes?.[0]?.url || meta.url;&para;<br>          const remoteType = server.remotes?.[0]?.type;&para;<br>          const isTemplatedUrl = remoteUrl?.includes('{');&para;<br>          let setupUrl;&para;<br>          if (isTemplatedUrl &amp;&amp; meta.requiredFields) {&para;<br>            const urlField = meta.requiredFields.find(f =&gt; f.field === 'url');&para;<br>            setupUrl = urlField?.sourceUrl || meta.documentation;&para;<br>          }&para;<br>          const urls = {};&para;<br>          if (!isTemplatedUrl) {&para;<br>            if (remoteType === 'streamable-http') {&para;<br>              urls.http = remoteUrl;&para;<br>            } else if (remoteType === 'sse') {&para;<br>              urls.sse = remoteUrl;&para;<br>            }&para;<br>          }&para;<br>          let envVars = [];&para;<br>          if (server.packages &amp;&amp; server.packages.length &gt; 0) {&para;<br>            const npmPackage = server.packages.find(p =&gt; p.registryType === 'npm');&para;<br>            if (npmPackage) {&para;<br>              urls.stdio = `npx -y ${npmPackage.identifier}`;&para;<br>              if (npmPackage.environmentVariables) {&para;<br>                envVars = npmPackage.environmentVariables;&para;<br>              }&para;<br>            }&para;<br>          }&para;<br>          return {&para;<br>            name: meta.displayName || server.title || server.name,&para;<br>            description: meta.oneLiner || server.description,&para;<br>            documentation: meta.documentation,&para;<br>            urls: urls,&para;<br>            envVars: envVars,&para;<br>            availability: availability,&para;<br>            customCommands: meta.claudeCodeCopyText ? {&para;<br>              claudeCode: meta.claudeCodeCopyText&para;<br>            } : undefined,&para;<br>            setupUrl: setupUrl&para;<br>          };&para;<br>        });&para;<br>        setServers(transformedServers);&para;<br>        setError(null);&para;<br>      } catch (err) {&para;<br>        setError(err.message);&para;<br>        console.error('Error fetching MCP registry:', err);&para;<br>      } finally {&para;<br>        setLoading(false);&para;<br>      }&para;<br>    };&para;<br>    fetchServers();&para;<br>  }, []);&para;<br>  const generateClaudeCodeCommand = server =&gt; {&para;<br>    if (server.customCommands &amp;&amp; server.customCommands.claudeCode) {&para;<br>      return server.customCommands.claudeCode;&para;<br>    }&para;<br>    const serverSlug = server.name.toLowerCase().replace(/[^a-z0-9]/g, '-');&para;<br>    if (server.urls.http) {&para;<br>      return `claude mcp add ${serverSlug} --transport http ${server.urls.http}`;&para;<br>    }&para;<br>    if (server.urls.sse) {&para;<br>      return `claude mcp add ${serverSlug} --transport sse ${server.urls.sse}`;&para;<br>    }&para;<br>    if (server.urls.stdio) {&para;<br>      const envFlags = server.envVars &amp;&amp; server.envVars.length &gt; 0 ? server.envVars.map(v =&gt; `--env ${v.name}=YOUR_${v.name}`).join(' ') : '';&para;<br>      const baseCommand = `claude mcp add ${serverSlug} --transport stdio`;&para;<br>      return envFlags ? `${baseCommand} ${envFlags} -- ${server.urls.stdio}` : `${baseCommand} -- ${server.urls.stdio}`;&para;<br>    }&para;<br>    return null;&para;<br>  };&para;<br>  if (loading) {&para;<br>    return &lt;div&gt;Loading MCP servers...&lt;/div&gt;;&para;<br>  }&para;<br>  if (error) {&para;<br>    return &lt;div&gt;Error loading MCP servers: {error}&lt;/div&gt;;&para;<br>  }&para;<br>  const filteredServers = servers.filter(server =&gt; {&para;<br>    if (platform === "claudeCode") {&para;<br>      return server.availability.claudeCode;&para;<br>    } else if (platform === "mcpConnector") {&para;<br>      return server.availability.mcpConnector;&para;<br>    } else if (platform === "claudeDesktop") {&para;<br>      return server.availability.claudeDesktop;&para;<br>    } else if (platform === "all") {&para;<br>      return true;&para;<br>    } else {&para;<br>      throw new Error(`Unknown platform: ${platform}`);&para;<br>    }&para;<br>  });&para;<br>  return &lt;&gt;&para;<br>      &lt;style jsx&gt;{`&para;<br>        .cards-container {&para;<br>          display: grid;&para;<br>          gap: 1rem;&para;<br>          margin-bottom: 2rem;&para;<br>        }&para;<br>        .server-card {&para;<br>          border: 1px solid var(--border-color, #e5e7eb);&para;<br>          border-radius: 6px;&para;<br>          padding: 1rem;&para;<br>        }&para;<br>        .command-row {&para;<br>          display: flex;&para;<br>          align-items: center;&para;<br>          gap: 0.25rem;&para;<br>        }&para;<br>        .command-row code {&para;<br>          font-size: 0.75rem;&para;<br>          overflow-x: auto;&para;<br>        }&para;<br>      `}&lt;/style&gt;&para;<br>&para;<br>      &lt;div className="cards-container"&gt;&para;<br>        {filteredServers.map(server =&gt; {&para;<br>    const claudeCodeCommand = generateClaudeCodeCommand(server);&para;<br>    const mcpUrl = server.urls.http || server.urls.sse;&para;<br>    const commandToShow = platform === "claudeCode" ? claudeCodeCommand : mcpUrl;&para;<br>    return &lt;div key={server.name} className="server-card"&gt;&para;<br>              &lt;div&gt;&para;<br>                {server.documentation ? &lt;a href={server.documentation}&gt;&para;<br>                    &lt;strong&gt;{server.name}&lt;/strong&gt;&para;<br>                  &lt;/a&gt; : &lt;strong&gt;{server.name}&lt;/strong&gt;}&para;<br>              &lt;/div&gt;&para;<br>&para;<br>              &lt;p style={{&para;<br>      margin: '0.5rem 0',&para;<br>      fontSize: '0.9rem'&para;<br>    }}&gt;&para;<br>                {server.description}&para;<br>              &lt;/p&gt;&para;<br>&para;<br>              {server.setupUrl &amp;&amp; &lt;p style={{&para;<br>      margin: '0.25rem 0',&para;<br>      fontSize: '0.8rem',&para;<br>      fontStyle: 'italic',&para;<br>      opacity: 0.7&para;<br>    }}&gt;&para;<br>                  Requires user-specific URL.{' '}&para;<br>                  &lt;a href={server.setupUrl} style={{&para;<br>      textDecoration: 'underline'&para;<br>    }}&gt;&para;<br>                    Get your URL here&para;<br>                  &lt;/a&gt;.&para;<br>                &lt;/p&gt;}&para;<br>&para;<br>              {commandToShow &amp;&amp; !server.setupUrl &amp;&amp; &lt;&gt;&para;<br>                &lt;p style={{&para;<br>      display: 'block',&para;<br>      fontSize: '0.75rem',&para;<br>      fontWeight: 500,&para;<br>      minWidth: 'fit-content',&para;<br>      marginTop: '0.5rem',&para;<br>      marginBottom: 0&para;<br>    }}&gt;&para;<br>                  {platform === "claudeCode" ? "Command" : "URL"}&para;<br>                &lt;/p&gt;&para;<br>                &lt;div className="command-row"&gt;&para;<br>                  &lt;code&gt;&para;<br>                    {commandToShow}&para;<br>                  &lt;/code&gt;&para;<br>                &lt;/div&gt;&para;<br>              &lt;/&gt;}&para;<br>            &lt;/div&gt;;&para;<br>  })}&para;<br>      &lt;/div&gt;&para;<br>    &lt;/&gt;;&para;<br>};&para;<br>&para;<br>Claude Code can connect to hundreds of external tools and data sources through the [Model Context Protocol (MCP)](https://modelcontextprotocol.io/introduction), an open source standard for AI-tool integrations. MCP servers give Claude Code access to your tools, databases, and APIs.&para;<br>&para;<br>## What you can do with MCP&para;<br>&para;<br>With MCP servers connected, you can ask Claude Code to:&para;<br>&para;<br>* **Implement features from issue trackers**: "Add the feature described in JIRA issue ENG-4521 and create a PR on GitHub."&para;<br>* **Analyze monitoring data**: "Check Sentry and Statsig to check the usage of the feature described in ENG-4521."&para;<br>* **Query databases**: "Find emails of 10 random users who used feature ENG-4521, based on our PostgreSQL database."&para;<br>* **Integrate designs**: "Update our standard email template based on the new Figma designs that were posted in Slack"&para;<br>* **Automate workflows**: "Create Gmail drafts inviting these 10 users to a feedback session about the new feature."&para;<br>&para;<br>## Popular MCP servers&para;<br>&para;<br>Here are some commonly used MCP servers you can connect to Claude Code:&para;<br>&para;<br>&lt;Warning&gt;&para;<br>  Use third party MCP servers at your own risk - Anthropic has not verified&para;<br>  the correctness or security of all these servers.&para;<br>  Make sure you trust MCP servers you are installing.&para;<br>  Be especially careful when using MCP servers that could fetch untrusted&para;<br>  content, as these can expose you to prompt injection risk.&para;<br>&lt;/Warning&gt;&para;<br>&para;<br>&lt;MCPServersTable platform="claudeCode" /&gt;&para;<br>&para;<br>&lt;Note&gt;&para;<br>  **Need a specific integration?** [Find hundreds more MCP servers on GitHub](https://github.com/modelcontextprotocol/servers), or build your own using the [MCP SDK](https://modelcontextprotocol.io/quickstart/server).&para;<br>&lt;/Note&gt;&para;<br>&para;<br>## Installing MCP servers&para;<br>&para;<br>MCP servers can be configured in three different ways depending on your needs:&para;<br>&para;<br>### Option 1: Add a remote HTTP server&para;<br>&para;<br>HTTP servers are the recommended option for connecting to remote MCP servers. This is the most widely supported transport for cloud-based services.&para;<br>&para;<br>```bash  theme={null}&para;<br># Basic syntax&para;<br>claude mcp add --transport http &lt;name&gt; &lt;url&gt;&para;<br>&para;<br># Real example: Connect to Notion&para;<br>claude mcp add --transport http notion https://mcp.notion.com/mcp&para;<br>&para;<br># Example with Bearer token&para;<br>claude mcp add --transport http secure-api https://api.example.com/mcp \&para;<br>  --header "Authorization: Bearer your-token"&para;<br>```&para;<br>&para;<br>### Option 2: Add a remote SSE server&para;<br>&para;<br>&lt;Warning&gt;&para;<br>  The SSE (Server-Sent Events) transport is deprecated. Use HTTP servers instead, where available.&para;<br>&lt;/Warning&gt;&para;<br>&para;<br>```bash  theme={null}&para;<br># Basic syntax&para;<br>claude mcp add --transport sse &lt;name&gt; &lt;url&gt;&para;<br>&para;<br># Real example: Connect to Asana&para;<br>claude mcp add --transport sse asana https://mcp.asana.com/sse&para;<br>&para;<br># Example with authentication header&para;<br>claude mcp add --transport sse private-api https://api.company.com/sse \&para;<br>  --header "X-API-Key: your-key-here"&para;<br>```&para;<br>&para;<br>### Option 3: Add a local stdio server&para;<br>&para;<br>Stdio servers run as local processes on your machine. They're ideal for tools that need direct system access or custom scripts.&para;<br>&para;<br>```bash  theme={null}&para;<br># Basic syntax&para;<br>claude mcp add --transport stdio &lt;name&gt; &lt;command&gt; [args...]&para;<br>&para;<br># Real example: Add Airtable server&para;<br>claude mcp add --transport stdio airtable --env AIRTABLE_API_KEY=YOUR_KEY \&para;<br>  -- npx -y airtable-mcp-server&para;<br>```&para;<br>&para;<br>&lt;Note&gt;&para;<br>  **Understanding the "--" parameter:**&para;<br>  The `--` (double dash) separates Claude's own CLI flags from the command and arguments that get passed to the MCP server. Everything before `--` are options for Claude (like `--env`, `--scope`), and everything after `--` is the actual command to run the MCP server.&para;<br>&para;<br>  For example:&para;<br>&para;<br>  * `claude mcp add --transport stdio myserver -- npx server` → runs `npx server`&para;<br>  * `claude mcp add --transport stdio myserver --env KEY=value -- python server.py --port 8080` → runs `python server.py --port 8080` with `KEY=value` in environment&para;<br>&para;<br>  This prevents conflicts between Claude's flags and the server's flags.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>### Managing your servers&para;<br>&para;<br>Once configured, you can manage your MCP servers with these commands:&para;<br>&para;<br>```bash  theme={null}&para;<br># List all configured servers&para;<br>claude mcp list&para;<br>&para;<br># Get details for a specific server&para;<br>claude mcp get github&para;<br>&para;<br># Remove a server&para;<br>claude mcp remove github&para;<br>&para;<br># (within Claude Code) Check server status&para;<br>/mcp&para;<br>```&para;<br>&para;<br>&lt;Tip&gt;&para;<br>  Tips:&para;<br>&para;<br>  * Use the `--scope` flag to specify where the configuration is stored:&para;<br>    * `local` (default): Available only to you in the current project (was called `project` in older versions)&para;<br>    * `project`: Shared with everyone in the project via `.mcp.json` file&para;<br>    * `user`: Available to you across all projects (was called `global` in older versions)&para;<br>  * Set environment variables with `--env` flags (for example, `--env KEY=value`)&para;<br>  * Configure MCP server startup timeout using the MCP\_TIMEOUT environment variable (for example, `MCP_TIMEOUT=10000 claude` sets a 10-second timeout)&para;<br>  * Claude Code will display a warning when MCP tool output exceeds 10,000 tokens. To increase this limit, set the `MAX_MCP_OUTPUT_TOKENS` environment variable (for example, `MAX_MCP_OUTPUT_TOKENS=50000`)&para;<br>  * Use `/mcp` to authenticate with remote servers that require OAuth 2.0 authentication&para;<br>&lt;/Tip&gt;&para;<br>&para;<br>&lt;Warning&gt;&para;<br>  **Windows Users**: On native Windows (not WSL), local MCP servers that use `npx` require the `cmd /c` wrapper to ensure proper execution.&para;<br>&para;<br>  ```bash  theme={null}&para;<br>  # This creates command="cmd" which Windows can execute&para;<br>  claude mcp add --transport stdio my-server -- cmd /c npx -y @some/package&para;<br>  ```&para;<br>&para;<br>  Without the `cmd /c` wrapper, you'll encounter "Connection closed" errors because Windows cannot directly execute `npx`. (See the note above for an explanation of the `--` parameter.)&para;<br>&lt;/Warning&gt;&para;<br>&para;<br>### Plugin-provided MCP servers&para;<br>&para;<br>[Plugins](/en/plugins) can bundle MCP servers, automatically providing tools and integrations when the plugin is enabled. Plugin MCP servers work identically to user-configured servers.&para;<br>&para;<br>**How plugin MCP servers work**:&para;<br>&para;<br>* Plugins define MCP servers in `.mcp.json` at the plugin root or inline in `plugin.json`&para;<br>* When a plugin is enabled, its MCP servers start automatically&para;<br>* Plugin MCP tools appear alongside manually configured MCP tools&para;<br>* Plugin servers are managed through plugin installation (not `/mcp` commands)&para;<br>&para;<br>**Example plugin MCP configuration**:&para;<br>&para;<br>In `.mcp.json` at plugin root:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "database-tools": {&para;<br>    "command": "${CLAUDE_PLUGIN_ROOT}/servers/db-server",&para;<br>    "args": ["--config", "${CLAUDE_PLUGIN_ROOT}/config.json"],&para;<br>    "env": {&para;<br>      "DB_URL": "${DB_URL}"&para;<br>    }&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>Or inline in `plugin.json`:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "name": "my-plugin",&para;<br>  "mcpServers": {&para;<br>    "plugin-api": {&para;<br>      "command": "${CLAUDE_PLUGIN_ROOT}/servers/api-server",&para;<br>      "args": ["--port", "8080"]&para;<br>    }&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>**Plugin MCP features**:&para;<br>&para;<br>* **Automatic lifecycle**: Servers start when plugin enables, but you must restart Claude Code to apply MCP server changes (enabling or disabling)&para;<br>* **Environment variables**: Use `${CLAUDE_PLUGIN_ROOT}` for plugin-relative paths&para;<br>* **User environment access**: Access to same environment variables as manually configured servers&para;<br>* **Multiple transport types**: Support stdio, SSE, and HTTP transports (transport support may vary by server)&para;<br>&para;<br>**Viewing plugin MCP servers**:&para;<br>&para;<br>```bash  theme={null}&para;<br># Within Claude Code, see all MCP servers including plugin ones&para;<br>/mcp&para;<br>```&para;<br>&para;<br>Plugin servers appear in the list with indicators showing they come from plugins.&para;<br>&para;<br>**Benefits of plugin MCP servers**:&para;<br>&para;<br>* **Bundled distribution**: Tools and servers packaged together&para;<br>* **Automatic setup**: No manual MCP configuration needed&para;<br>* **Team consistency**: Everyone gets the same tools when plugin is installed&para;<br>&para;<br>See the [plugin components reference](/en/plugins-reference#mcp-servers) for details on bundling MCP servers with plugins.&para;<br>&para;<br>## MCP installation scopes&para;<br>&para;<br>MCP servers can be configured at three different scope levels, each serving distinct purposes for managing server accessibility and sharing. Understanding these scopes helps you determine the best way to configure servers for your specific needs.&para;<br>&para;<br>### Local scope&para;<br>&para;<br>Local-scoped servers represent the default configuration level and are stored in `~/.claude.json` under your project's path. These servers remain private to you and are only accessible when working within the current project directory. This scope is ideal for personal development servers, experimental configurations, or servers containing sensitive credentials that shouldn't be shared.&para;<br>&para;<br>```bash  theme={null}&para;<br># Add a local-scoped server (default)&para;<br>claude mcp add --transport http stripe https://mcp.stripe.com&para;<br>&para;<br># Explicitly specify local scope&para;<br>claude mcp add --transport http stripe --scope local https://mcp.stripe.com&para;<br>```&para;<br>&para;<br>### Project scope&para;<br>&para;<br>Project-scoped servers enable team collaboration by storing configurations in a `.mcp.json` file at your project's root directory. This file is designed to be checked into version control, ensuring all team members have access to the same MCP tools and services. When you add a project-scoped server, Claude Code automatically creates or updates this file with the appropriate configuration structure.&para;<br>&para;<br>```bash  theme={null}&para;<br># Add a project-scoped server&para;<br>claude mcp add --transport http paypal --scope project https://mcp.paypal.com/mcp&para;<br>```&para;<br>&para;<br>The resulting `.mcp.json` file follows a standardized format:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "mcpServers": {&para;<br>    "shared-server": {&para;<br>      "command": "/path/to/server",&para;<br>      "args": [],&para;<br>      "env": {}&para;<br>    }&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>For security reasons, Claude Code prompts for approval before using project-scoped servers from `.mcp.json` files. If you need to reset these approval choices, use the `claude mcp reset-project-choices` command.&para;<br>&para;<br>### User scope&para;<br>&para;<br>User-scoped servers are stored in `~/.claude.json` and provide cross-project accessibility, making them available across all projects on your machine while remaining private to your user account. This scope works well for personal utility servers, development tools, or services you frequently use across different projects.&para;<br>&para;<br>```bash  theme={null}&para;<br># Add a user server&para;<br>claude mcp add --transport http hubspot --scope user https://mcp.hubspot.com/anthropic&para;<br>```&para;<br>&para;<br>### Choosing the right scope&para;<br>&para;<br>Select your scope based on:&para;<br>&para;<br>* **Local scope**: Personal servers, experimental configurations, or sensitive credentials specific to one project&para;<br>* **Project scope**: Team-shared servers, project-specific tools, or services required for collaboration&para;<br>* **User scope**: Personal utilities needed across multiple projects, development tools, or frequently used services&para;<br>&para;<br>&lt;Note&gt;&para;<br>  **Where are MCP servers stored?**&para;<br>&para;<br>  * **User and local scope**: `~/.claude.json` (in the `mcpServers` field or under project paths)&para;<br>  * **Project scope**: `.mcp.json` in your project root (checked into source control)&para;<br>  * **Enterprise managed**: `managed-mcp.json` in system directories (see [Enterprise MCP configuration](#enterprise-mcp-configuration))&para;<br>&lt;/Note&gt;&para;<br>&para;<br>### Scope hierarchy and precedence&para;<br>&para;<br>MCP server configurations follow a clear precedence hierarchy. When servers with the same name exist at multiple scopes, the system resolves conflicts by prioritizing local-scoped servers first, followed by project-scoped servers, and finally user-scoped servers. This design ensures that personal configurations can override shared ones when needed.&para;<br>&para;<br>### Environment variable expansion in `.mcp.json`&para;<br>&para;<br>Claude Code supports environment variable expansion in `.mcp.json` files, allowing teams to share configurations while maintaining flexibility for machine-specific paths and sensitive values like API keys.&para;<br>&para;<br>**Supported syntax:**&para;<br>&para;<br>* `${VAR}` - Expands to the value of environment variable `VAR`&para;<br>* `${VAR:-default}` - Expands to `VAR` if set, otherwise uses `default`&para;<br>&para;<br>**Expansion locations:**&para;<br>Environment variables can be expanded in:&para;<br>&para;<br>* `command` - The server executable path&para;<br>* `args` - Command-line arguments&para;<br>* `env` - Environment variables passed to the server&para;<br>* `url` - For HTTP server types&para;<br>* `headers` - For HTTP server authentication&para;<br>&para;<br>**Example with variable expansion:**&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "mcpServers": {&para;<br>    "api-server": {&para;<br>      "type": "http",&para;<br>      "url": "${API_BASE_URL:-https://api.example.com}/mcp",&para;<br>      "headers": {&para;<br>        "Authorization": "Bearer ${API_KEY}"&para;<br>      }&para;<br>    }&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>If a required environment variable is not set and has no default value, Claude Code will fail to parse the config.&para;<br>&para;<br>## Practical examples&para;<br>&para;<br>{/* ### Example: Automate browser testing with Playwright&para;<br>&para;<br>  ```bash&para;<br>  # 1. Add the Playwright MCP server&para;<br>  claude mcp add --transport stdio playwright -- npx -y @playwright/mcp@latest&para;<br>&para;<br>  # 2. Write and run browser tests&para;<br>  &gt; "Test if the login flow works with test@example.com"&para;<br>  &gt; "Take a screenshot of the checkout page on mobile"&para;<br>  &gt; "Verify that the search feature returns results"&para;<br>  ``` */}&para;<br>&para;<br>### Example: Monitor errors with Sentry&para;<br>&para;<br>```bash  theme={null}&para;<br># 1. Add the Sentry MCP server&para;<br>claude mcp add --transport http sentry https://mcp.sentry.dev/mcp&para;<br>&para;<br># 2. Use /mcp to authenticate with your Sentry account&para;<br>&gt; /mcp&para;<br>&para;<br># 3. Debug production issues&para;<br>&gt; "What are the most common errors in the last 24 hours?"&para;<br>&gt; "Show me the stack trace for error ID abc123"&para;<br>&gt; "Which deployment introduced these new errors?"&para;<br>```&para;<br>&para;<br>### Example: Connect to GitHub for code reviews&para;<br>&para;<br>```bash  theme={null}&para;<br># 1. Add the GitHub MCP server&para;<br>claude mcp add --transport http github https://api.githubcopilot.com/mcp/&para;<br>&para;<br># 2. In Claude Code, authenticate if needed&para;<br>&gt; /mcp&para;<br># Select "Authenticate" for GitHub&para;<br>&para;<br># 3. Now you can ask Claude to work with GitHub&para;<br>&gt; "Review PR #456 and suggest improvements"&para;<br>&gt; "Create a new issue for the bug we just found"&para;<br>&gt; "Show me all open PRs assigned to me"&para;<br>```&para;<br>&para;<br>### Example: Query your PostgreSQL database&para;<br>&para;<br>```bash  theme={null}&para;<br># 1. Add the database server with your connection string&para;<br>claude mcp add --transport stdio db -- npx -y @bytebase/dbhub \&para;<br>  --dsn "postgresql://readonly:pass@prod.db.com:5432/analytics"&para;<br>&para;<br># 2. Query your database naturally&para;<br>&gt; "What's our total revenue this month?"&para;<br>&gt; "Show me the schema for the orders table"&para;<br>&gt; "Find customers who haven't made a purchase in 90 days"&para;<br>```&para;<br>&para;<br>## Authenticate with remote MCP servers&para;<br>&para;<br>Many cloud-based MCP servers require authentication. Claude Code supports OAuth 2.0 for secure connections.&para;<br>&para;<br>&lt;Steps&gt;&para;<br>  &lt;Step title="Add the server that requires authentication"&gt;&para;<br>    For example:&para;<br>&para;<br>    ```bash  theme={null}&para;<br>    claude mcp add --transport http sentry https://mcp.sentry.dev/mcp&para;<br>    ```&para;<br>  &lt;/Step&gt;&para;<br>&para;<br>  &lt;Step title="Use the /mcp command within Claude Code"&gt;&para;<br>    In Claude code, use the command:&para;<br>&para;<br>    ```&para;<br>    &gt; /mcp&para;<br>    ```&para;<br>&para;<br>    Then follow the steps in your browser to login.&para;<br>  &lt;/Step&gt;&para;<br>&lt;/Steps&gt;&para;<br>&para;<br>&lt;Tip&gt;&para;<br>  Tips:&para;<br>&para;<br>  * Authentication tokens are stored securely and refreshed automatically&para;<br>  * Use "Clear authentication" in the `/mcp` menu to revoke access&para;<br>  * If your browser doesn't open automatically, copy the provided URL&para;<br>  * OAuth authentication works with HTTP servers&para;<br>&lt;/Tip&gt;&para;<br>&para;<br>## Add MCP servers from JSON configuration&para;<br>&para;<br>If you have a JSON configuration for an MCP server, you can add it directly:&para;<br>&para;<br>&lt;Steps&gt;&para;<br>  &lt;Step title="Add an MCP server from JSON"&gt;&para;<br>    ```bash  theme={null}&para;<br>    # Basic syntax&para;<br>    claude mcp add-json &lt;name&gt; '&lt;json&gt;'&para;<br>&para;<br>    # Example: Adding an HTTP server with JSON configuration&para;<br>    claude mcp add-json weather-api '{"type":"http","url":"https://api.weather.com/mcp","headers":{"Authorization":"Bearer token"}}'&para;<br>&para;<br>    # Example: Adding a stdio server with JSON configuration&para;<br>    claude mcp add-json local-weather '{"type":"stdio","command":"/path/to/weather-cli","args":["--api-key","abc123"],"env":{"CACHE_DIR":"/tmp"}}'&para;<br>    ```&para;<br>  &lt;/Step&gt;&para;<br>&para;<br>  &lt;Step title="Verify the server was added"&gt;&para;<br>    ```bash  theme={null}&para;<br>    claude mcp get weather-api&para;<br>    ```&para;<br>  &lt;/Step&gt;&para;<br>&lt;/Steps&gt;&para;<br>&para;<br>&lt;Tip&gt;&para;<br>  Tips:&para;<br>&para;<br>  * Make sure the JSON is properly escaped in your shell&para;<br>  * The JSON must conform to the MCP server configuration schema&para;<br>  * You can use `--scope user` to add the server to your user configuration instead of the project-specific one&para;<br>&lt;/Tip&gt;&para;<br>&para;<br>## Import MCP servers from Claude Desktop&para;<br>&para;<br>If you've already configured MCP servers in Claude Desktop, you can import them:&para;<br>&para;<br>&lt;Steps&gt;&para;<br>  &lt;Step title="Import servers from Claude Desktop"&gt;&para;<br>    ```bash  theme={null}&para;<br>    # Basic syntax &para;<br>    claude mcp add-from-claude-desktop &para;<br>    ```&para;<br>  &lt;/Step&gt;&para;<br>&para;<br>  &lt;Step title="Select which servers to import"&gt;&para;<br>    After running the command, you'll see an interactive dialog that allows you to select which servers you want to import.&para;<br>  &lt;/Step&gt;&para;<br>&para;<br>  &lt;Step title="Verify the servers were imported"&gt;&para;<br>    ```bash  theme={null}&para;<br>    claude mcp list &para;<br>    ```&para;<br>  &lt;/Step&gt;&para;<br>&lt;/Steps&gt;&para;<br>&para;<br>&lt;Tip&gt;&para;<br>  Tips:&para;<br>&para;<br>  * This feature only works on macOS and Windows Subsystem for Linux (WSL)&para;<br>  * It reads the Claude Desktop configuration file from its standard location on those platforms&para;<br>  * Use the `--scope user` flag to add servers to your user configuration&para;<br>  * Imported servers will have the same names as in Claude Desktop&para;<br>  * If servers with the same names already exist, they will get a numerical suffix (for example, `server_1`)&para;<br>&lt;/Tip&gt;&para;<br>&para;<br>## Use Claude Code as an MCP server&para;<br>&para;<br>You can use Claude Code itself as an MCP server that other applications can connect to:&para;<br>&para;<br>```bash  theme={null}&para;<br># Start Claude as a stdio MCP server&para;<br>claude mcp serve&para;<br>```&para;<br>&para;<br>You can use this in Claude Desktop by adding this configuration to claude\_desktop\_config.json:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "mcpServers": {&para;<br>    "claude-code": {&para;<br>      "type": "stdio",&para;<br>      "command": "claude",&para;<br>      "args": ["mcp", "serve"],&para;<br>      "env": {}&para;<br>    }&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>&lt;Warning&gt;&para;<br>  **Configuring the executable path**: The `command` field must reference the Claude Code executable. If the `claude` command is not in your system's PATH, you'll need to specify the full path to the executable.&para;<br>&para;<br>  To find the full path:&para;<br>&para;<br>  ```bash  theme={null}&para;<br>  which claude&para;<br>  ```&para;<br>&para;<br>  Then use the full path in your configuration:&para;<br>&para;<br>  ```json  theme={null}&para;<br>  {&para;<br>    "mcpServers": {&para;<br>      "claude-code": {&para;<br>        "type": "stdio",&para;<br>        "command": "/full/path/to/claude",&para;<br>        "args": ["mcp", "serve"],&para;<br>        "env": {}&para;<br>      }&para;<br>    }&para;<br>  }&para;<br>  ```&para;<br>&para;<br>  Without the correct executable path, you'll encounter errors like `spawn claude ENOENT`.&para;<br>&lt;/Warning&gt;&para;<br>&para;<br>&lt;Tip&gt;&para;<br>  Tips:&para;<br>&para;<br>  * The server provides access to Claude's tools like View, Edit, LS, etc.&para;<br>  * In Claude Desktop, try asking Claude to read files in a directory, make edits, and more.&para;<br>  * Note that this MCP server is only exposing Claude Code's tools to your MCP client, so your own client is responsible for implementing user confirmation for individual tool calls.&para;<br>&lt;/Tip&gt;&para;<br>&para;<br>## MCP output limits and warnings&para;<br>&para;<br>When MCP tools produce large outputs, Claude Code helps manage the token usage to prevent overwhelming your conversation context:&para;<br>&para;<br>* **Output warning threshold**: Claude Code displays a warning when any MCP tool output exceeds 10,000 tokens&para;<br>* **Configurable limit**: You can adjust the maximum allowed MCP output tokens using the `MAX_MCP_OUTPUT_TOKENS` environment variable&para;<br>* **Default limit**: The default maximum is 25,000 tokens&para;<br>&para;<br>To increase the limit for tools that produce large outputs:&para;<br>&para;<br>```bash  theme={null}&para;<br># Set a higher limit for MCP tool outputs&para;<br>export MAX_MCP_OUTPUT_TOKENS=50000&para;<br>claude&para;<br>```&para;<br>&para;<br>This is particularly useful when working with MCP servers that:&para;<br>&para;<br>* Query large datasets or databases&para;<br>* Generate detailed reports or documentation&para;<br>* Process extensive log files or debugging information&para;<br>&para;<br>&lt;Warning&gt;&para;<br>  If you frequently encounter output warnings with specific MCP servers, consider increasing the limit or configuring the server to paginate or filter its responses.&para;<br>&lt;/Warning&gt;&para;<br>&para;<br>## Use MCP resources&para;<br>&para;<br>MCP servers can expose resources that you can reference using @ mentions, similar to how you reference files.&para;<br>&para;<br>### Reference MCP resources&para;<br>&para;<br>&lt;Steps&gt;&para;<br>  &lt;Step title="List available resources"&gt;&para;<br>    Type `@` in your prompt to see available resources from all connected MCP servers. Resources appear alongside files in the autocomplete menu.&para;<br>  &lt;/Step&gt;&para;<br>&para;<br>  &lt;Step title="Reference a specific resource"&gt;&para;<br>    Use the format `@server:protocol://resource/path` to reference a resource:&para;<br>&para;<br>    ```&para;<br>    &gt; Can you analyze @github:issue://123 and suggest a fix?&para;<br>    ```&para;<br>&para;<br>    ```&para;<br>    &gt; Please review the API documentation at @docs:file://api/authentication&para;<br>    ```&para;<br>  &lt;/Step&gt;&para;<br>&para;<br>  &lt;Step title="Multiple resource references"&gt;&para;<br>    You can reference multiple resources in a single prompt:&para;<br>&para;<br>    ```&para;<br>    &gt; Compare @postgres:schema://users with @docs:file://database/user-model&para;<br>    ```&para;<br>  &lt;/Step&gt;&para;<br>&lt;/Steps&gt;&para;<br>&para;<br>&lt;Tip&gt;&para;<br>  Tips:&para;<br>&para;<br>  * Resources are automatically fetched and included as attachments when referenced&para;<br>  * Resource paths are fuzzy-searchable in the @ mention autocomplete&para;<br>  * Claude Code automatically provides tools to list and read MCP resources when servers support them&para;<br>  * Resources can contain any type of content that the MCP server provides (text, JSON, structured data, etc.)&para;<br>&lt;/Tip&gt;&para;<br>&para;<br>## Use MCP prompts as slash commands&para;<br>&para;<br>MCP servers can expose prompts that become available as slash commands in Claude Code.&para;<br>&para;<br>### Execute MCP prompts&para;<br>&para;<br>&lt;Steps&gt;&para;<br>  &lt;Step title="Discover available prompts"&gt;&para;<br>    Type `/` to see all available commands, including those from MCP servers. MCP prompts appear with the format `/mcp__servername__promptname`.&para;<br>  &lt;/Step&gt;&para;<br>&para;<br>  &lt;Step title="Execute a prompt without arguments"&gt;&para;<br>    ```&para;<br>    &gt; /mcp__github__list_prs&para;<br>    ```&para;<br>  &lt;/Step&gt;&para;<br>&para;<br>  &lt;Step title="Execute a prompt with arguments"&gt;&para;<br>    Many prompts accept arguments. Pass them space-separated after the command:&para;<br>&para;<br>    ```&para;<br>    &gt; /mcp__github__pr_review 456&para;<br>    ```&para;<br>&para;<br>    ```&para;<br>    &gt; /mcp__jira__create_issue "Bug in login flow" high&para;<br>    ```&para;<br>  &lt;/Step&gt;&para;<br>&lt;/Steps&gt;&para;<br>&para;<br>&lt;Tip&gt;&para;<br>  Tips:&para;<br>&para;<br>  * MCP prompts are dynamically discovered from connected servers&para;<br>  * Arguments are parsed based on the prompt's defined parameters&para;<br>  * Prompt results are injected directly into the conversation&para;<br>  * Server and prompt names are normalized (spaces become underscores)&para;<br>&lt;/Tip&gt;&para;<br>&para;<br>## Enterprise MCP configuration&para;<br>&para;<br>For organizations that need centralized control over MCP servers, Claude Code supports two enterprise configuration options:&para;<br>&para;<br>1. **Exclusive control with `managed-mcp.json`**: Deploy a fixed set of MCP servers that users cannot modify or extend&para;<br>2. **Policy-based control with allowlists/denylists**: Allow users to add their own servers, but restrict which ones are permitted&para;<br>&para;<br>These options allow IT administrators to:&para;<br>&para;<br>* **Control which MCP servers employees can access**: Deploy a standardized set of approved MCP servers across the organization&para;<br>* **Prevent unauthorized MCP servers**: Restrict users from adding unapproved MCP servers&para;<br>* **Disable MCP entirely**: Remove MCP functionality completely if needed&para;<br>&para;<br>### Option 1: Exclusive control with managed-mcp.json&para;<br>&para;<br>When you deploy a `managed-mcp.json` file, it takes **exclusive control** over all MCP servers. Users cannot add, modify, or use any MCP servers other than those defined in this file. This is the simplest approach for organizations that want complete control.&para;<br>&para;<br>System administrators deploy the configuration file to a system-wide directory:&para;<br>&para;<br>* macOS: `/Library/Application Support/ClaudeCode/managed-mcp.json`&para;<br>* Linux and WSL: `/etc/claude-code/managed-mcp.json`&para;<br>* Windows: `C:\Program Files\ClaudeCode\managed-mcp.json`&para;<br>&para;<br>&lt;Note&gt;&para;<br>  These are system-wide paths (not user home directories like `~/Library/...`) that require administrator privileges. They are designed to be deployed by IT administrators.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>The `managed-mcp.json` file uses the same format as a standard `.mcp.json` file:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "mcpServers": {&para;<br>    "github": {&para;<br>      "type": "http",&para;<br>      "url": "https://api.githubcopilot.com/mcp/"&para;<br>    },&para;<br>    "sentry": {&para;<br>      "type": "http",&para;<br>      "url": "https://mcp.sentry.dev/mcp"&para;<br>    },&para;<br>    "company-internal": {&para;<br>      "type": "stdio",&para;<br>      "command": "/usr/local/bin/company-mcp-server",&para;<br>      "args": ["--config", "/etc/company/mcp-config.json"],&para;<br>      "env": {&para;<br>        "COMPANY_API_URL": "https://internal.company.com"&para;<br>      }&para;<br>    }&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>### Option 2: Policy-based control with allowlists and denylists&para;<br>&para;<br>Instead of taking exclusive control, administrators can allow users to configure their own MCP servers while enforcing restrictions on which servers are permitted. This approach uses `allowedMcpServers` and `deniedMcpServers` in the [managed settings file](/en/settings#settings-files).&para;<br>&para;<br>&lt;Note&gt;&para;<br>  **Choosing between options**: Use Option 1 (`managed-mcp.json`) when you want to deploy a fixed set of servers with no user customization. Use Option 2 (allowlists/denylists) when you want to allow users to add their own servers within policy constraints.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>#### Restriction options&para;<br>&para;<br>Each entry in the allowlist or denylist can restrict servers in three ways:&para;<br>&para;<br>1. **By server name** (`serverName`): Matches the configured name of the server&para;<br>2. **By command** (`serverCommand`): Matches the exact command and arguments used to start stdio servers&para;<br>3. **By URL pattern** (`serverUrl`): Matches remote server URLs with wildcard support&para;<br>&para;<br>**Important**: Each entry must have exactly one of `serverName`, `serverCommand`, or `serverUrl`.&para;<br>&para;<br>#### Example configuration&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "allowedMcpServers": [&para;<br>    // Allow by server name&para;<br>    { "serverName": "github" },&para;<br>    { "serverName": "sentry" },&para;<br>&para;<br>    // Allow by exact command (for stdio servers)&para;<br>    { "serverCommand": ["npx", "-y", "@modelcontextprotocol/server-filesystem"] },&para;<br>    { "serverCommand": ["python", "/usr/local/bin/approved-server.py"] },&para;<br>&para;<br>    // Allow by URL pattern (for remote servers)&para;<br>    { "serverUrl": "https://mcp.company.com/*" },&para;<br>    { "serverUrl": "https://*.internal.corp/*" }&para;<br>  ],&para;<br>  "deniedMcpServers": [&para;<br>    // Block by server name&para;<br>    { "serverName": "dangerous-server" },&para;<br>&para;<br>    // Block by exact command (for stdio servers)&para;<br>    { "serverCommand": ["npx", "-y", "unapproved-package"] },&para;<br>&para;<br>    // Block by URL pattern (for remote servers)&para;<br>    { "serverUrl": "https://*.untrusted.com/*" }&para;<br>  ]&para;<br>}&para;<br>```&para;<br>&para;<br>#### How command-based restrictions work&para;<br>&para;<br>**Exact matching**:&para;<br>&para;<br>* Command arrays must match **exactly** - both the command and all arguments in the correct order&para;<br>* Example: `["npx", "-y", "server"]` will NOT match `["npx", "server"]` or `["npx", "-y", "server", "--flag"]`&para;<br>&para;<br>**Stdio server behavior**:&para;<br>&para;<br>* When the allowlist contains **any** `serverCommand` entries, stdio servers **must** match one of those commands&para;<br>* Stdio servers cannot pass by name alone when command restrictions are present&para;<br>* This ensures administrators can enforce which commands are allowed to run&para;<br>&para;<br>**Non-stdio server behavior**:&para;<br>&para;<br>* Remote servers (HTTP, SSE, WebSocket) use URL-based matching when `serverUrl` entries exist in the allowlist&para;<br>* If no URL entries exist, remote servers fall back to name-based matching&para;<br>* Command restrictions do not apply to remote servers&para;<br>&para;<br>#### How URL-based restrictions work&para;<br>&para;<br>URL patterns support wildcards using `*` to match any sequence of characters. This is useful for allowing entire domains or subdomains.&para;<br>&para;<br>**Wildcard examples**:&para;<br>&para;<br>* `https://mcp.company.com/*` - Allow all paths on a specific domain&para;<br>* `https://*.example.com/*` - Allow any subdomain of example.com&para;<br>* `http://localhost:*/*` - Allow any port on localhost&para;<br>&para;<br>**Remote server behavior**:&para;<br>&para;<br>* When the allowlist contains **any** `serverUrl` entries, remote servers **must** match one of those URL patterns&para;<br>* Remote servers cannot pass by name alone when URL restrictions are present&para;<br>* This ensures administrators can enforce which remote endpoints are allowed&para;<br>&para;<br>&lt;Accordion title="Example: URL-only allowlist"&gt;&para;<br>  ```json  theme={null}&para;<br>  {&para;<br>    "allowedMcpServers": [&para;<br>      { "serverUrl": "https://mcp.company.com/*" },&para;<br>      { "serverUrl": "https://*.internal.corp/*" }&para;<br>    ]&para;<br>  }&para;<br>  ```&para;<br>&para;<br>  **Result**:&para;<br>&para;<br>  * HTTP server at `https://mcp.company.com/api`: ✅ Allowed (matches URL pattern)&para;<br>  * HTTP server at `https://api.internal.corp/mcp`: ✅ Allowed (matches wildcard subdomain)&para;<br>  * HTTP server at `https://external.com/mcp`: ❌ Blocked (doesn't match any URL pattern)&para;<br>  * Stdio server with any command: ❌ Blocked (no name or command entries to match)&para;<br>&lt;/Accordion&gt;&para;<br>&para;<br>&lt;Accordion title="Example: Command-only allowlist"&gt;&para;<br>  ```json  theme={null}&para;<br>  {&para;<br>    "allowedMcpServers": [&para;<br>      { "serverCommand": ["npx", "-y", "approved-package"] }&para;<br>    ]&para;<br>  }&para;<br>  ```&para;<br>&para;<br>  **Result**:&para;<br>&para;<br>  * Stdio server with `["npx", "-y", "approved-package"]`: ✅ Allowed (matches command)&para;<br>  * Stdio server with `["node", "server.js"]`: ❌ Blocked (doesn't match command)&para;<br>  * HTTP server named "my-api": ❌ Blocked (no name entries to match)&para;<br>&lt;/Accordion&gt;&para;<br>&para;<br>&lt;Accordion title="Example: Mixed name and command allowlist"&gt;&para;<br>  ```json  theme={null}&para;<br>  {&para;<br>    "allowedMcpServers": [&para;<br>      { "serverName": "github" },&para;<br>      { "serverCommand": ["npx", "-y", "approved-package"] }&para;<br>    ]&para;<br>  }&para;<br>  ```&para;<br>&para;<br>  **Result**:&para;<br>&para;<br>  * Stdio server named "local-tool" with `["npx", "-y", "approved-package"]`: ✅ Allowed (matches command)&para;<br>  * Stdio server named "local-tool" with `["node", "server.js"]`: ❌ Blocked (command entries exist but doesn't match)&para;<br>  * Stdio server named "github" with `["node", "server.js"]`: ❌ Blocked (stdio servers must match commands when command entries exist)&para;<br>  * HTTP server named "github": ✅ Allowed (matches name)&para;<br>  * HTTP server named "other-api": ❌ Blocked (name doesn't match)&para;<br>&lt;/Accordion&gt;&para;<br>&para;<br>&lt;Accordion title="Example: Name-only allowlist"&gt;&para;<br>  ```json  theme={null}&para;<br>  {&para;<br>    "allowedMcpServers": [&para;<br>      { "serverName": "github" },&para;<br>      { "serverName": "internal-tool" }&para;<br>    ]&para;<br>  }&para;<br>  ```&para;<br>&para;<br>  **Result**:&para;<br>&para;<br>  * Stdio server named "github" with any command: ✅ Allowed (no command restrictions)&para;<br>  * Stdio server named "internal-tool" with any command: ✅ Allowed (no command restrictions)&para;<br>  * HTTP server named "github": ✅ Allowed (matches name)&para;<br>  * Any server named "other": ❌ Blocked (name doesn't match)&para;<br>&lt;/Accordion&gt;&para;<br>&para;<br>#### Allowlist behavior (`allowedMcpServers`)&para;<br>&para;<br>* `undefined` (default): No restrictions - users can configure any MCP server&para;<br>* Empty array `[]`: Complete lockdown - users cannot configure any MCP servers&para;<br>* List of entries: Users can only configure servers that match by name, command, or URL pattern&para;<br>&para;<br>#### Denylist behavior (`deniedMcpServers`)&para;<br>&para;<br>* `undefined` (default): No servers are blocked&para;<br>* Empty array `[]`: No servers are blocked&para;<br>* List of entries: Specified servers are explicitly blocked across all scopes&para;<br>&para;<br>#### Important notes&para;<br>&para;<br>* **Option 1 and Option 2 can be combined**: If `managed-mcp.json` exists, it has exclusive control and users cannot add servers. Allowlists/denylists still apply to the enterprise servers themselves.&para;<br>* **Denylist takes absolute precedence**: If a server matches a denylist entry (by name, command, or URL), it will be blocked even if it's on the allowlist&para;<br>* Name-based, command-based, and URL-based restrictions work together: a server passes if it matches **either** a name entry, a command entry, or a URL pattern (unless blocked by denylist)&para;<br>&para;<br>&lt;Note&gt;&para;<br>  **When using `managed-mcp.json`**: Users cannot add MCP servers through `claude mcp add` or configuration files. The `allowedMcpServers` and `deniedMcpServers` settings still apply to filter which enterprise servers are actually loaded.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>&para;<br>---&para;<br>&para;<br>&gt; To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt</ins></div>
        </div>

        <h2 style="margin-top: 2rem; margin-bottom: 1rem;">Unified Diff</h2>
        <pre><code>--- a/mcp.md
+++ b/mcp.md
@@ -0,0 +1,1065 @@
+# Connect Claude Code to tools via MCP
+
+&gt; Learn how to connect Claude Code to your tools with the Model Context Protocol.
+
+export const MCPServersTable = ({platform = &#34;all&#34;}) =&gt; {
+  const ifYouAreAnAiAgentReadingThisYouShouldInsteadFetch = &#39;https://api.anthropic.com/mcp-registry/docs&#39;;
+  const [servers, setServers] = useState([]);
+  const [loading, setLoading] = useState(true);
+  const [error, setError] = useState(null);
+  useEffect(() =&gt; {
+    const fetchServers = async () =&gt; {
+      try {
+        setLoading(true);
+        const allServers = [];
+        let cursor = null;
+        do {
+          const url = new URL(&#39;https://api.anthropic.com/mcp-registry/v0/servers&#39;);
+          url.searchParams.set(&#39;version&#39;, &#39;latest&#39;);
+          url.searchParams.set(&#39;limit&#39;, &#39;100&#39;);
+          if (cursor) {
+            url.searchParams.set(&#39;cursor&#39;, cursor);
+          }
+          const response = await fetch(url);
+          if (!response.ok) {
+            throw new Error(`Failed to fetch MCP registry: ${response.status}`);
+          }
+          const data = await response.json();
+          allServers.push(...data.servers);
+          cursor = data.metadata?.nextCursor || null;
+        } while (cursor);
+        const transformedServers = allServers.map(item =&gt; {
+          const server = item.server;
+          const meta = item._meta?.[&#39;com.anthropic.api/mcp-registry&#39;] || ({});
+          const worksWith = meta.worksWith || [];
+          const availability = {
+            claudeCode: worksWith.includes(&#39;claude-code&#39;),
+            mcpConnector: worksWith.includes(&#39;claude-api&#39;),
+            claudeDesktop: worksWith.includes(&#39;claude-desktop&#39;)
+          };
+          const remoteUrl = server.remotes?.[0]?.url || meta.url;
+          const remoteType = server.remotes?.[0]?.type;
+          const isTemplatedUrl = remoteUrl?.includes(&#39;{&#39;);
+          let setupUrl;
+          if (isTemplatedUrl &amp;&amp; meta.requiredFields) {
+            const urlField = meta.requiredFields.find(f =&gt; f.field === &#39;url&#39;);
+            setupUrl = urlField?.sourceUrl || meta.documentation;
+          }
+          const urls = {};
+          if (!isTemplatedUrl) {
+            if (remoteType === &#39;streamable-http&#39;) {
+              urls.http = remoteUrl;
+            } else if (remoteType === &#39;sse&#39;) {
+              urls.sse = remoteUrl;
+            }
+          }
+          let envVars = [];
+          if (server.packages &amp;&amp; server.packages.length &gt; 0) {
+            const npmPackage = server.packages.find(p =&gt; p.registryType === &#39;npm&#39;);
+            if (npmPackage) {
+              urls.stdio = `npx -y ${npmPackage.identifier}`;
+              if (npmPackage.environmentVariables) {
+                envVars = npmPackage.environmentVariables;
+              }
+            }
+          }
+          return {
+            name: meta.displayName || server.title || server.name,
+            description: meta.oneLiner || server.description,
+            documentation: meta.documentation,
+            urls: urls,
+            envVars: envVars,
+            availability: availability,
+            customCommands: meta.claudeCodeCopyText ? {
+              claudeCode: meta.claudeCodeCopyText
+            } : undefined,
+            setupUrl: setupUrl
+          };
+        });
+        setServers(transformedServers);
+        setError(null);
+      } catch (err) {
+        setError(err.message);
+        console.error(&#39;Error fetching MCP registry:&#39;, err);
+      } finally {
+        setLoading(false);
+      }
+    };
+    fetchServers();
+  }, []);
+  const generateClaudeCodeCommand = server =&gt; {
+    if (server.customCommands &amp;&amp; server.customCommands.claudeCode) {
+      return server.customCommands.claudeCode;
+    }
+    const serverSlug = server.name.toLowerCase().replace(/[^a-z0-9]/g, &#39;-&#39;);
+    if (server.urls.http) {
+      return `claude mcp add ${serverSlug} --transport http ${server.urls.http}`;
+    }
+    if (server.urls.sse) {
+      return `claude mcp add ${serverSlug} --transport sse ${server.urls.sse}`;
+    }
+    if (server.urls.stdio) {
+      const envFlags = server.envVars &amp;&amp; server.envVars.length &gt; 0 ? server.envVars.map(v =&gt; `--env ${v.name}=YOUR_${v.name}`).join(&#39; &#39;) : &#39;&#39;;
+      const baseCommand = `claude mcp add ${serverSlug} --transport stdio`;
+      return envFlags ? `${baseCommand} ${envFlags} -- ${server.urls.stdio}` : `${baseCommand} -- ${server.urls.stdio}`;
+    }
+    return null;
+  };
+  if (loading) {
+    return &lt;div&gt;Loading MCP servers...&lt;/div&gt;;
+  }
+  if (error) {
+    return &lt;div&gt;Error loading MCP servers: {error}&lt;/div&gt;;
+  }
+  const filteredServers = servers.filter(server =&gt; {
+    if (platform === &#34;claudeCode&#34;) {
+      return server.availability.claudeCode;
+    } else if (platform === &#34;mcpConnector&#34;) {
+      return server.availability.mcpConnector;
+    } else if (platform === &#34;claudeDesktop&#34;) {
+      return server.availability.claudeDesktop;
+    } else if (platform === &#34;all&#34;) {
+      return true;
+    } else {
+      throw new Error(`Unknown platform: ${platform}`);
+    }
+  });
+  return &lt;&gt;
+      &lt;style jsx&gt;{`
+        .cards-container {
+          display: grid;
+          gap: 1rem;
+          margin-bottom: 2rem;
+        }
+        .server-card {
+          border: 1px solid var(--border-color, #e5e7eb);
+          border-radius: 6px;
+          padding: 1rem;
+        }
+        .command-row {
+          display: flex;
+          align-items: center;
+          gap: 0.25rem;
+        }
+        .command-row code {
+          font-size: 0.75rem;
+          overflow-x: auto;
+        }
+      `}&lt;/style&gt;
+
+      &lt;div className=&#34;cards-container&#34;&gt;
+        {filteredServers.map(server =&gt; {
+    const claudeCodeCommand = generateClaudeCodeCommand(server);
+    const mcpUrl = server.urls.http || server.urls.sse;
+    const commandToShow = platform === &#34;claudeCode&#34; ? claudeCodeCommand : mcpUrl;
+    return &lt;div key={server.name} className=&#34;server-card&#34;&gt;
+              &lt;div&gt;
+                {server.documentation ? &lt;a href={server.documentation}&gt;
+                    &lt;strong&gt;{server.name}&lt;/strong&gt;
+                  &lt;/a&gt; : &lt;strong&gt;{server.name}&lt;/strong&gt;}
+              &lt;/div&gt;
+
+              &lt;p style={{
+      margin: &#39;0.5rem 0&#39;,
+      fontSize: &#39;0.9rem&#39;
+    }}&gt;
+                {server.description}
+              &lt;/p&gt;
+
+              {server.setupUrl &amp;&amp; &lt;p style={{
+      margin: &#39;0.25rem 0&#39;,
+      fontSize: &#39;0.8rem&#39;,
+      fontStyle: &#39;italic&#39;,
+      opacity: 0.7
+    }}&gt;
+                  Requires user-specific URL.{&#39; &#39;}
+                  &lt;a href={server.setupUrl} style={{
+      textDecoration: &#39;underline&#39;
+    }}&gt;
+                    Get your URL here
+                  &lt;/a&gt;.
+                &lt;/p&gt;}
+
+              {commandToShow &amp;&amp; !server.setupUrl &amp;&amp; &lt;&gt;
+                &lt;p style={{
+      display: &#39;block&#39;,
+      fontSize: &#39;0.75rem&#39;,
+      fontWeight: 500,
+      minWidth: &#39;fit-content&#39;,
+      marginTop: &#39;0.5rem&#39;,
+      marginBottom: 0
+    }}&gt;
+                  {platform === &#34;claudeCode&#34; ? &#34;Command&#34; : &#34;URL&#34;}
+                &lt;/p&gt;
+                &lt;div className=&#34;command-row&#34;&gt;
+                  &lt;code&gt;
+                    {commandToShow}
+                  &lt;/code&gt;
+                &lt;/div&gt;
+              &lt;/&gt;}
+            &lt;/div&gt;;
+  })}
+      &lt;/div&gt;
+    &lt;/&gt;;
+};
+
+Claude Code can connect to hundreds of external tools and data sources through the [Model Context Protocol (MCP)](https://modelcontextprotocol.io/introduction), an open source standard for AI-tool integrations. MCP servers give Claude Code access to your tools, databases, and APIs.
+
+## What you can do with MCP
+
+With MCP servers connected, you can ask Claude Code to:
+
+* **Implement features from issue trackers**: &#34;Add the feature described in JIRA issue ENG-4521 and create a PR on GitHub.&#34;
+* **Analyze monitoring data**: &#34;Check Sentry and Statsig to check the usage of the feature described in ENG-4521.&#34;
+* **Query databases**: &#34;Find emails of 10 random users who used feature ENG-4521, based on our PostgreSQL database.&#34;
+* **Integrate designs**: &#34;Update our standard email template based on the new Figma designs that were posted in Slack&#34;
+* **Automate workflows**: &#34;Create Gmail drafts inviting these 10 users to a feedback session about the new feature.&#34;
+
+## Popular MCP servers
+
+Here are some commonly used MCP servers you can connect to Claude Code:
+
+&lt;Warning&gt;
+  Use third party MCP servers at your own risk - Anthropic has not verified
+  the correctness or security of all these servers.
+  Make sure you trust MCP servers you are installing.
+  Be especially careful when using MCP servers that could fetch untrusted
+  content, as these can expose you to prompt injection risk.
+&lt;/Warning&gt;
+
+&lt;MCPServersTable platform=&#34;claudeCode&#34; /&gt;
+
+&lt;Note&gt;
+  **Need a specific integration?** [Find hundreds more MCP servers on GitHub](https://github.com/modelcontextprotocol/servers), or build your own using the [MCP SDK](https://modelcontextprotocol.io/quickstart/server).
+&lt;/Note&gt;
+
+## Installing MCP servers
+
+MCP servers can be configured in three different ways depending on your needs:
+
+### Option 1: Add a remote HTTP server
+
+HTTP servers are the recommended option for connecting to remote MCP servers. This is the most widely supported transport for cloud-based services.
+
+```bash  theme={null}
+# Basic syntax
+claude mcp add --transport http &lt;name&gt; &lt;url&gt;
+
+# Real example: Connect to Notion
+claude mcp add --transport http notion https://mcp.notion.com/mcp
+
+# Example with Bearer token
+claude mcp add --transport http secure-api https://api.example.com/mcp \
+  --header &#34;Authorization: Bearer your-token&#34;
+```
+
+### Option 2: Add a remote SSE server
+
+&lt;Warning&gt;
+  The SSE (Server-Sent Events) transport is deprecated. Use HTTP servers instead, where available.
+&lt;/Warning&gt;
+
+```bash  theme={null}
+# Basic syntax
+claude mcp add --transport sse &lt;name&gt; &lt;url&gt;
+
+# Real example: Connect to Asana
+claude mcp add --transport sse asana https://mcp.asana.com/sse
+
+# Example with authentication header
+claude mcp add --transport sse private-api https://api.company.com/sse \
+  --header &#34;X-API-Key: your-key-here&#34;
+```
+
+### Option 3: Add a local stdio server
+
+Stdio servers run as local processes on your machine. They&#39;re ideal for tools that need direct system access or custom scripts.
+
+```bash  theme={null}
+# Basic syntax
+claude mcp add --transport stdio &lt;name&gt; &lt;command&gt; [args...]
+
+# Real example: Add Airtable server
+claude mcp add --transport stdio airtable --env AIRTABLE_API_KEY=YOUR_KEY \
+  -- npx -y airtable-mcp-server
+```
+
+&lt;Note&gt;
+  **Understanding the &#34;--&#34; parameter:**
+  The `--` (double dash) separates Claude&#39;s own CLI flags from the command and arguments that get passed to the MCP server. Everything before `--` are options for Claude (like `--env`, `--scope`), and everything after `--` is the actual command to run the MCP server.
+
+  For example:
+
+  * `claude mcp add --transport stdio myserver -- npx server` → runs `npx server`
+  * `claude mcp add --transport stdio myserver --env KEY=value -- python server.py --port 8080` → runs `python server.py --port 8080` with `KEY=value` in environment
+
+  This prevents conflicts between Claude&#39;s flags and the server&#39;s flags.
+&lt;/Note&gt;
+
+### Managing your servers
+
+Once configured, you can manage your MCP servers with these commands:
+
+```bash  theme={null}
+# List all configured servers
+claude mcp list
+
+# Get details for a specific server
+claude mcp get github
+
+# Remove a server
+claude mcp remove github
+
+# (within Claude Code) Check server status
+/mcp
+```
+
+&lt;Tip&gt;
+  Tips:
+
+  * Use the `--scope` flag to specify where the configuration is stored:
+    * `local` (default): Available only to you in the current project (was called `project` in older versions)
+    * `project`: Shared with everyone in the project via `.mcp.json` file
+    * `user`: Available to you across all projects (was called `global` in older versions)
+  * Set environment variables with `--env` flags (for example, `--env KEY=value`)
+  * Configure MCP server startup timeout using the MCP\_TIMEOUT environment variable (for example, `MCP_TIMEOUT=10000 claude` sets a 10-second timeout)
+  * Claude Code will display a warning when MCP tool output exceeds 10,000 tokens. To increase this limit, set the `MAX_MCP_OUTPUT_TOKENS` environment variable (for example, `MAX_MCP_OUTPUT_TOKENS=50000`)
+  * Use `/mcp` to authenticate with remote servers that require OAuth 2.0 authentication
+&lt;/Tip&gt;
+
+&lt;Warning&gt;
+  **Windows Users**: On native Windows (not WSL), local MCP servers that use `npx` require the `cmd /c` wrapper to ensure proper execution.
+
+  ```bash  theme={null}
+  # This creates command=&#34;cmd&#34; which Windows can execute
+  claude mcp add --transport stdio my-server -- cmd /c npx -y @some/package
+  ```
+
+  Without the `cmd /c` wrapper, you&#39;ll encounter &#34;Connection closed&#34; errors because Windows cannot directly execute `npx`. (See the note above for an explanation of the `--` parameter.)
+&lt;/Warning&gt;
+
+### Plugin-provided MCP servers
+
+[Plugins](/en/plugins) can bundle MCP servers, automatically providing tools and integrations when the plugin is enabled. Plugin MCP servers work identically to user-configured servers.
+
+**How plugin MCP servers work**:
+
+* Plugins define MCP servers in `.mcp.json` at the plugin root or inline in `plugin.json`
+* When a plugin is enabled, its MCP servers start automatically
+* Plugin MCP tools appear alongside manually configured MCP tools
+* Plugin servers are managed through plugin installation (not `/mcp` commands)
+
+**Example plugin MCP configuration**:
+
+In `.mcp.json` at plugin root:
+
+```json  theme={null}
+{
+  &#34;database-tools&#34;: {
+    &#34;command&#34;: &#34;${CLAUDE_PLUGIN_ROOT}/servers/db-server&#34;,
+    &#34;args&#34;: [&#34;--config&#34;, &#34;${CLAUDE_PLUGIN_ROOT}/config.json&#34;],
+    &#34;env&#34;: {
+      &#34;DB_URL&#34;: &#34;${DB_URL}&#34;
+    }
+  }
+}
+```
+
+Or inline in `plugin.json`:
+
+```json  theme={null}
+{
+  &#34;name&#34;: &#34;my-plugin&#34;,
+  &#34;mcpServers&#34;: {
+    &#34;plugin-api&#34;: {
+      &#34;command&#34;: &#34;${CLAUDE_PLUGIN_ROOT}/servers/api-server&#34;,
+      &#34;args&#34;: [&#34;--port&#34;, &#34;8080&#34;]
+    }
+  }
+}
+```
+
+**Plugin MCP features**:
+
+* **Automatic lifecycle**: Servers start when plugin enables, but you must restart Claude Code to apply MCP server changes (enabling or disabling)
+* **Environment variables**: Use `${CLAUDE_PLUGIN_ROOT}` for plugin-relative paths
+* **User environment access**: Access to same environment variables as manually configured servers
+* **Multiple transport types**: Support stdio, SSE, and HTTP transports (transport support may vary by server)
+
+**Viewing plugin MCP servers**:
+
+```bash  theme={null}
+# Within Claude Code, see all MCP servers including plugin ones
+/mcp
+```
+
+Plugin servers appear in the list with indicators showing they come from plugins.
+
+**Benefits of plugin MCP servers**:
+
+* **Bundled distribution**: Tools and servers packaged together
+* **Automatic setup**: No manual MCP configuration needed
+* **Team consistency**: Everyone gets the same tools when plugin is installed
+
+See the [plugin components reference](/en/plugins-reference#mcp-servers) for details on bundling MCP servers with plugins.
+
+## MCP installation scopes
+
+MCP servers can be configured at three different scope levels, each serving distinct purposes for managing server accessibility and sharing. Understanding these scopes helps you determine the best way to configure servers for your specific needs.
+
+### Local scope
+
+Local-scoped servers represent the default configuration level and are stored in `~/.claude.json` under your project&#39;s path. These servers remain private to you and are only accessible when working within the current project directory. This scope is ideal for personal development servers, experimental configurations, or servers containing sensitive credentials that shouldn&#39;t be shared.
+
+```bash  theme={null}
+# Add a local-scoped server (default)
+claude mcp add --transport http stripe https://mcp.stripe.com
+
+# Explicitly specify local scope
+claude mcp add --transport http stripe --scope local https://mcp.stripe.com
+```
+
+### Project scope
+
+Project-scoped servers enable team collaboration by storing configurations in a `.mcp.json` file at your project&#39;s root directory. This file is designed to be checked into version control, ensuring all team members have access to the same MCP tools and services. When you add a project-scoped server, Claude Code automatically creates or updates this file with the appropriate configuration structure.
+
+```bash  theme={null}
+# Add a project-scoped server
+claude mcp add --transport http paypal --scope project https://mcp.paypal.com/mcp
+```
+
+The resulting `.mcp.json` file follows a standardized format:
+
+```json  theme={null}
+{
+  &#34;mcpServers&#34;: {
+    &#34;shared-server&#34;: {
+      &#34;command&#34;: &#34;/path/to/server&#34;,
+      &#34;args&#34;: [],
+      &#34;env&#34;: {}
+    }
+  }
+}
+```
+
+For security reasons, Claude Code prompts for approval before using project-scoped servers from `.mcp.json` files. If you need to reset these approval choices, use the `claude mcp reset-project-choices` command.
+
+### User scope
+
+User-scoped servers are stored in `~/.claude.json` and provide cross-project accessibility, making them available across all projects on your machine while remaining private to your user account. This scope works well for personal utility servers, development tools, or services you frequently use across different projects.
+
+```bash  theme={null}
+# Add a user server
+claude mcp add --transport http hubspot --scope user https://mcp.hubspot.com/anthropic
+```
+
+### Choosing the right scope
+
+Select your scope based on:
+
+* **Local scope**: Personal servers, experimental configurations, or sensitive credentials specific to one project
+* **Project scope**: Team-shared servers, project-specific tools, or services required for collaboration
+* **User scope**: Personal utilities needed across multiple projects, development tools, or frequently used services
+
+&lt;Note&gt;
+  **Where are MCP servers stored?**
+
+  * **User and local scope**: `~/.claude.json` (in the `mcpServers` field or under project paths)
+  * **Project scope**: `.mcp.json` in your project root (checked into source control)
+  * **Enterprise managed**: `managed-mcp.json` in system directories (see [Enterprise MCP configuration](#enterprise-mcp-configuration))
+&lt;/Note&gt;
+
+### Scope hierarchy and precedence
+
+MCP server configurations follow a clear precedence hierarchy. When servers with the same name exist at multiple scopes, the system resolves conflicts by prioritizing local-scoped servers first, followed by project-scoped servers, and finally user-scoped servers. This design ensures that personal configurations can override shared ones when needed.
+
+### Environment variable expansion in `.mcp.json`
+
+Claude Code supports environment variable expansion in `.mcp.json` files, allowing teams to share configurations while maintaining flexibility for machine-specific paths and sensitive values like API keys.
+
+**Supported syntax:**
+
+* `${VAR}` - Expands to the value of environment variable `VAR`
+* `${VAR:-default}` - Expands to `VAR` if set, otherwise uses `default`
+
+**Expansion locations:**
+Environment variables can be expanded in:
+
+* `command` - The server executable path
+* `args` - Command-line arguments
+* `env` - Environment variables passed to the server
+* `url` - For HTTP server types
+* `headers` - For HTTP server authentication
+
+**Example with variable expansion:**
+
+```json  theme={null}
+{
+  &#34;mcpServers&#34;: {
+    &#34;api-server&#34;: {
+      &#34;type&#34;: &#34;http&#34;,
+      &#34;url&#34;: &#34;${API_BASE_URL:-https://api.example.com}/mcp&#34;,
+      &#34;headers&#34;: {
+        &#34;Authorization&#34;: &#34;Bearer ${API_KEY}&#34;
+      }
+    }
+  }
+}
+```
+
+If a required environment variable is not set and has no default value, Claude Code will fail to parse the config.
+
+## Practical examples
+
+{/* ### Example: Automate browser testing with Playwright
+
+  ```bash
+  # 1. Add the Playwright MCP server
+  claude mcp add --transport stdio playwright -- npx -y @playwright/mcp@latest
+
+  # 2. Write and run browser tests
+  &gt; &#34;Test if the login flow works with test@example.com&#34;
+  &gt; &#34;Take a screenshot of the checkout page on mobile&#34;
+  &gt; &#34;Verify that the search feature returns results&#34;
+  ``` */}
+
+### Example: Monitor errors with Sentry
+
+```bash  theme={null}
+# 1. Add the Sentry MCP server
+claude mcp add --transport http sentry https://mcp.sentry.dev/mcp
+
+# 2. Use /mcp to authenticate with your Sentry account
+&gt; /mcp
+
+# 3. Debug production issues
+&gt; &#34;What are the most common errors in the last 24 hours?&#34;
+&gt; &#34;Show me the stack trace for error ID abc123&#34;
+&gt; &#34;Which deployment introduced these new errors?&#34;
+```
+
+### Example: Connect to GitHub for code reviews
+
+```bash  theme={null}
+# 1. Add the GitHub MCP server
+claude mcp add --transport http github https://api.githubcopilot.com/mcp/
+
+# 2. In Claude Code, authenticate if needed
+&gt; /mcp
+# Select &#34;Authenticate&#34; for GitHub
+
+# 3. Now you can ask Claude to work with GitHub
+&gt; &#34;Review PR #456 and suggest improvements&#34;
+&gt; &#34;Create a new issue for the bug we just found&#34;
+&gt; &#34;Show me all open PRs assigned to me&#34;
+```
+
+### Example: Query your PostgreSQL database
+
+```bash  theme={null}
+# 1. Add the database server with your connection string
+claude mcp add --transport stdio db -- npx -y @bytebase/dbhub \
+  --dsn &#34;postgresql://readonly:pass@prod.db.com:5432/analytics&#34;
+
+# 2. Query your database naturally
+&gt; &#34;What&#39;s our total revenue this month?&#34;
+&gt; &#34;Show me the schema for the orders table&#34;
+&gt; &#34;Find customers who haven&#39;t made a purchase in 90 days&#34;
+```
+
+## Authenticate with remote MCP servers
+
+Many cloud-based MCP servers require authentication. Claude Code supports OAuth 2.0 for secure connections.
+
+&lt;Steps&gt;
+  &lt;Step title=&#34;Add the server that requires authentication&#34;&gt;
+    For example:
+
+    ```bash  theme={null}
+    claude mcp add --transport http sentry https://mcp.sentry.dev/mcp
+    ```
+  &lt;/Step&gt;
+
+  &lt;Step title=&#34;Use the /mcp command within Claude Code&#34;&gt;
+    In Claude code, use the command:
+
+    ```
+    &gt; /mcp
+    ```
+
+    Then follow the steps in your browser to login.
+  &lt;/Step&gt;
+&lt;/Steps&gt;
+
+&lt;Tip&gt;
+  Tips:
+
+  * Authentication tokens are stored securely and refreshed automatically
+  * Use &#34;Clear authentication&#34; in the `/mcp` menu to revoke access
+  * If your browser doesn&#39;t open automatically, copy the provided URL
+  * OAuth authentication works with HTTP servers
+&lt;/Tip&gt;
+
+## Add MCP servers from JSON configuration
+
+If you have a JSON configuration for an MCP server, you can add it directly:
+
+&lt;Steps&gt;
+  &lt;Step title=&#34;Add an MCP server from JSON&#34;&gt;
+    ```bash  theme={null}
+    # Basic syntax
+    claude mcp add-json &lt;name&gt; &#39;&lt;json&gt;&#39;
+
+    # Example: Adding an HTTP server with JSON configuration
+    claude mcp add-json weather-api &#39;{&#34;type&#34;:&#34;http&#34;,&#34;url&#34;:&#34;https://api.weather.com/mcp&#34;,&#34;headers&#34;:{&#34;Authorization&#34;:&#34;Bearer token&#34;}}&#39;
+
+    # Example: Adding a stdio server with JSON configuration
+    claude mcp add-json local-weather &#39;{&#34;type&#34;:&#34;stdio&#34;,&#34;command&#34;:&#34;/path/to/weather-cli&#34;,&#34;args&#34;:[&#34;--api-key&#34;,&#34;abc123&#34;],&#34;env&#34;:{&#34;CACHE_DIR&#34;:&#34;/tmp&#34;}}&#39;
+    ```
+  &lt;/Step&gt;
+
+  &lt;Step title=&#34;Verify the server was added&#34;&gt;
+    ```bash  theme={null}
+    claude mcp get weather-api
+    ```
+  &lt;/Step&gt;
+&lt;/Steps&gt;
+
+&lt;Tip&gt;
+  Tips:
+
+  * Make sure the JSON is properly escaped in your shell
+  * The JSON must conform to the MCP server configuration schema
+  * You can use `--scope user` to add the server to your user configuration instead of the project-specific one
+&lt;/Tip&gt;
+
+## Import MCP servers from Claude Desktop
+
+If you&#39;ve already configured MCP servers in Claude Desktop, you can import them:
+
+&lt;Steps&gt;
+  &lt;Step title=&#34;Import servers from Claude Desktop&#34;&gt;
+    ```bash  theme={null}
+    # Basic syntax 
+    claude mcp add-from-claude-desktop 
+    ```
+  &lt;/Step&gt;
+
+  &lt;Step title=&#34;Select which servers to import&#34;&gt;
+    After running the command, you&#39;ll see an interactive dialog that allows you to select which servers you want to import.
+  &lt;/Step&gt;
+
+  &lt;Step title=&#34;Verify the servers were imported&#34;&gt;
+    ```bash  theme={null}
+    claude mcp list 
+    ```
+  &lt;/Step&gt;
+&lt;/Steps&gt;
+
+&lt;Tip&gt;
+  Tips:
+
+  * This feature only works on macOS and Windows Subsystem for Linux (WSL)
+  * It reads the Claude Desktop configuration file from its standard location on those platforms
+  * Use the `--scope user` flag to add servers to your user configuration
+  * Imported servers will have the same names as in Claude Desktop
+  * If servers with the same names already exist, they will get a numerical suffix (for example, `server_1`)
+&lt;/Tip&gt;
+
+## Use Claude Code as an MCP server
+
+You can use Claude Code itself as an MCP server that other applications can connect to:
+
+```bash  theme={null}
+# Start Claude as a stdio MCP server
+claude mcp serve
+```
+
+You can use this in Claude Desktop by adding this configuration to claude\_desktop\_config.json:
+
+```json  theme={null}
+{
+  &#34;mcpServers&#34;: {
+    &#34;claude-code&#34;: {
+      &#34;type&#34;: &#34;stdio&#34;,
+      &#34;command&#34;: &#34;claude&#34;,
+      &#34;args&#34;: [&#34;mcp&#34;, &#34;serve&#34;],
+      &#34;env&#34;: {}
+    }
+  }
+}
+```
+
+&lt;Warning&gt;
+  **Configuring the executable path**: The `command` field must reference the Claude Code executable. If the `claude` command is not in your system&#39;s PATH, you&#39;ll need to specify the full path to the executable.
+
+  To find the full path:
+
+  ```bash  theme={null}
+  which claude
+  ```
+
+  Then use the full path in your configuration:
+
+  ```json  theme={null}
+  {
+    &#34;mcpServers&#34;: {
+      &#34;claude-code&#34;: {
+        &#34;type&#34;: &#34;stdio&#34;,
+        &#34;command&#34;: &#34;/full/path/to/claude&#34;,
+        &#34;args&#34;: [&#34;mcp&#34;, &#34;serve&#34;],
+        &#34;env&#34;: {}
+      }
+    }
+  }
+  ```
+
+  Without the correct executable path, you&#39;ll encounter errors like `spawn claude ENOENT`.
+&lt;/Warning&gt;
+
+&lt;Tip&gt;
+  Tips:
+
+  * The server provides access to Claude&#39;s tools like View, Edit, LS, etc.
+  * In Claude Desktop, try asking Claude to read files in a directory, make edits, and more.
+  * Note that this MCP server is only exposing Claude Code&#39;s tools to your MCP client, so your own client is responsible for implementing user confirmation for individual tool calls.
+&lt;/Tip&gt;
+
+## MCP output limits and warnings
+
+When MCP tools produce large outputs, Claude Code helps manage the token usage to prevent overwhelming your conversation context:
+
+* **Output warning threshold**: Claude Code displays a warning when any MCP tool output exceeds 10,000 tokens
+* **Configurable limit**: You can adjust the maximum allowed MCP output tokens using the `MAX_MCP_OUTPUT_TOKENS` environment variable
+* **Default limit**: The default maximum is 25,000 tokens
+
+To increase the limit for tools that produce large outputs:
+
+```bash  theme={null}
+# Set a higher limit for MCP tool outputs
+export MAX_MCP_OUTPUT_TOKENS=50000
+claude
+```
+
+This is particularly useful when working with MCP servers that:
+
+* Query large datasets or databases
+* Generate detailed reports or documentation
+* Process extensive log files or debugging information
+
+&lt;Warning&gt;
+  If you frequently encounter output warnings with specific MCP servers, consider increasing the limit or configuring the server to paginate or filter its responses.
+&lt;/Warning&gt;
+
+## Use MCP resources
+
+MCP servers can expose resources that you can reference using @ mentions, similar to how you reference files.
+
+### Reference MCP resources
+
+&lt;Steps&gt;
+  &lt;Step title=&#34;List available resources&#34;&gt;
+    Type `@` in your prompt to see available resources from all connected MCP servers. Resources appear alongside files in the autocomplete menu.
+  &lt;/Step&gt;
+
+  &lt;Step title=&#34;Reference a specific resource&#34;&gt;
+    Use the format `@server:protocol://resource/path` to reference a resource:
+
+    ```
+    &gt; Can you analyze @github:issue://123 and suggest a fix?
+    ```
+
+    ```
+    &gt; Please review the API documentation at @docs:file://api/authentication
+    ```
+  &lt;/Step&gt;
+
+  &lt;Step title=&#34;Multiple resource references&#34;&gt;
+    You can reference multiple resources in a single prompt:
+
+    ```
+    &gt; Compare @postgres:schema://users with @docs:file://database/user-model
+    ```
+  &lt;/Step&gt;
+&lt;/Steps&gt;
+
+&lt;Tip&gt;
+  Tips:
+
+  * Resources are automatically fetched and included as attachments when referenced
+  * Resource paths are fuzzy-searchable in the @ mention autocomplete
+  * Claude Code automatically provides tools to list and read MCP resources when servers support them
+  * Resources can contain any type of content that the MCP server provides (text, JSON, structured data, etc.)
+&lt;/Tip&gt;
+
+## Use MCP prompts as slash commands
+
+MCP servers can expose prompts that become available as slash commands in Claude Code.
+
+### Execute MCP prompts
+
+&lt;Steps&gt;
+  &lt;Step title=&#34;Discover available prompts&#34;&gt;
+    Type `/` to see all available commands, including those from MCP servers. MCP prompts appear with the format `/mcp__servername__promptname`.
+  &lt;/Step&gt;
+
+  &lt;Step title=&#34;Execute a prompt without arguments&#34;&gt;
+    ```
+    &gt; /mcp__github__list_prs
+    ```
+  &lt;/Step&gt;
+
+  &lt;Step title=&#34;Execute a prompt with arguments&#34;&gt;
+    Many prompts accept arguments. Pass them space-separated after the command:
+
+    ```
+    &gt; /mcp__github__pr_review 456
+    ```
+
+    ```
+    &gt; /mcp__jira__create_issue &#34;Bug in login flow&#34; high
+    ```
+  &lt;/Step&gt;
+&lt;/Steps&gt;
+
+&lt;Tip&gt;
+  Tips:
+
+  * MCP prompts are dynamically discovered from connected servers
+  * Arguments are parsed based on the prompt&#39;s defined parameters
+  * Prompt results are injected directly into the conversation
+  * Server and prompt names are normalized (spaces become underscores)
+&lt;/Tip&gt;
+
+## Enterprise MCP configuration
+
+For organizations that need centralized control over MCP servers, Claude Code supports two enterprise configuration options:
+
+1. **Exclusive control with `managed-mcp.json`**: Deploy a fixed set of MCP servers that users cannot modify or extend
+2. **Policy-based control with allowlists/denylists**: Allow users to add their own servers, but restrict which ones are permitted
+
+These options allow IT administrators to:
+
+* **Control which MCP servers employees can access**: Deploy a standardized set of approved MCP servers across the organization
+* **Prevent unauthorized MCP servers**: Restrict users from adding unapproved MCP servers
+* **Disable MCP entirely**: Remove MCP functionality completely if needed
+
+### Option 1: Exclusive control with managed-mcp.json
+
+When you deploy a `managed-mcp.json` file, it takes **exclusive control** over all MCP servers. Users cannot add, modify, or use any MCP servers other than those defined in this file. This is the simplest approach for organizations that want complete control.
+
+System administrators deploy the configuration file to a system-wide directory:
+
+* macOS: `/Library/Application Support/ClaudeCode/managed-mcp.json`
+* Linux and WSL: `/etc/claude-code/managed-mcp.json`
+* Windows: `C:\Program Files\ClaudeCode\managed-mcp.json`
+
+&lt;Note&gt;
+  These are system-wide paths (not user home directories like `~/Library/...`) that require administrator privileges. They are designed to be deployed by IT administrators.
+&lt;/Note&gt;
+
+The `managed-mcp.json` file uses the same format as a standard `.mcp.json` file:
+
+```json  theme={null}
+{
+  &#34;mcpServers&#34;: {
+    &#34;github&#34;: {
+      &#34;type&#34;: &#34;http&#34;,
+      &#34;url&#34;: &#34;https://api.githubcopilot.com/mcp/&#34;
+    },
+    &#34;sentry&#34;: {
+      &#34;type&#34;: &#34;http&#34;,
+      &#34;url&#34;: &#34;https://mcp.sentry.dev/mcp&#34;
+    },
+    &#34;company-internal&#34;: {
+      &#34;type&#34;: &#34;stdio&#34;,
+      &#34;command&#34;: &#34;/usr/local/bin/company-mcp-server&#34;,
+      &#34;args&#34;: [&#34;--config&#34;, &#34;/etc/company/mcp-config.json&#34;],
+      &#34;env&#34;: {
+        &#34;COMPANY_API_URL&#34;: &#34;https://internal.company.com&#34;
+      }
+    }
+  }
+}
+```
+
+### Option 2: Policy-based control with allowlists and denylists
+
+Instead of taking exclusive control, administrators can allow users to configure their own MCP servers while enforcing restrictions on which servers are permitted. This approach uses `allowedMcpServers` and `deniedMcpServers` in the [managed settings file](/en/settings#settings-files).
+
+&lt;Note&gt;
+  **Choosing between options**: Use Option 1 (`managed-mcp.json`) when you want to deploy a fixed set of servers with no user customization. Use Option 2 (allowlists/denylists) when you want to allow users to add their own servers within policy constraints.
+&lt;/Note&gt;
+
+#### Restriction options
+
+Each entry in the allowlist or denylist can restrict servers in three ways:
+
+1. **By server name** (`serverName`): Matches the configured name of the server
+2. **By command** (`serverCommand`): Matches the exact command and arguments used to start stdio servers
+3. **By URL pattern** (`serverUrl`): Matches remote server URLs with wildcard support
+
+**Important**: Each entry must have exactly one of `serverName`, `serverCommand`, or `serverUrl`.
+
+#### Example configuration
+
+```json  theme={null}
+{
+  &#34;allowedMcpServers&#34;: [
+    // Allow by server name
+    { &#34;serverName&#34;: &#34;github&#34; },
+    { &#34;serverName&#34;: &#34;sentry&#34; },
+
+    // Allow by exact command (for stdio servers)
+    { &#34;serverCommand&#34;: [&#34;npx&#34;, &#34;-y&#34;, &#34;@modelcontextprotocol/server-filesystem&#34;] },
+    { &#34;serverCommand&#34;: [&#34;python&#34;, &#34;/usr/local/bin/approved-server.py&#34;] },
+
+    // Allow by URL pattern (for remote servers)
+    { &#34;serverUrl&#34;: &#34;https://mcp.company.com/*&#34; },
+    { &#34;serverUrl&#34;: &#34;https://*.internal.corp/*&#34; }
+  ],
+  &#34;deniedMcpServers&#34;: [
+    // Block by server name
+    { &#34;serverName&#34;: &#34;dangerous-server&#34; },
+
+    // Block by exact command (for stdio servers)
+    { &#34;serverCommand&#34;: [&#34;npx&#34;, &#34;-y&#34;, &#34;unapproved-package&#34;] },
+
+    // Block by URL pattern (for remote servers)
+    { &#34;serverUrl&#34;: &#34;https://*.untrusted.com/*&#34; }
+  ]
+}
+```
+
+#### How command-based restrictions work
+
+**Exact matching**:
+
+* Command arrays must match **exactly** - both the command and all arguments in the correct order
+* Example: `[&#34;npx&#34;, &#34;-y&#34;, &#34;server&#34;]` will NOT match `[&#34;npx&#34;, &#34;server&#34;]` or `[&#34;npx&#34;, &#34;-y&#34;, &#34;server&#34;, &#34;--flag&#34;]`
+
+**Stdio server behavior**:
+
+* When the allowlist contains **any** `serverCommand` entries, stdio servers **must** match one of those commands
+* Stdio servers cannot pass by name alone when command restrictions are present
+* This ensures administrators can enforce which commands are allowed to run
+
+**Non-stdio server behavior**:
+
+* Remote servers (HTTP, SSE, WebSocket) use URL-based matching when `serverUrl` entries exist in the allowlist
+* If no URL entries exist, remote servers fall back to name-based matching
+* Command restrictions do not apply to remote servers
+
+#### How URL-based restrictions work
+
+URL patterns support wildcards using `*` to match any sequence of characters. This is useful for allowing entire domains or subdomains.
+
+**Wildcard examples**:
+
+* `https://mcp.company.com/*` - Allow all paths on a specific domain
+* `https://*.example.com/*` - Allow any subdomain of example.com
+* `http://localhost:*/*` - Allow any port on localhost
+
+**Remote server behavior**:
+
+* When the allowlist contains **any** `serverUrl` entries, remote servers **must** match one of those URL patterns
+* Remote servers cannot pass by name alone when URL restrictions are present
+* This ensures administrators can enforce which remote endpoints are allowed
+
+&lt;Accordion title=&#34;Example: URL-only allowlist&#34;&gt;
+  ```json  theme={null}
+  {
+    &#34;allowedMcpServers&#34;: [
+      { &#34;serverUrl&#34;: &#34;https://mcp.company.com/*&#34; },
+      { &#34;serverUrl&#34;: &#34;https://*.internal.corp/*&#34; }
+    ]
+  }
+  ```
+
+  **Result**:
+
+  * HTTP server at `https://mcp.company.com/api`: ✅ Allowed (matches URL pattern)
+  * HTTP server at `https://api.internal.corp/mcp`: ✅ Allowed (matches wildcard subdomain)
+  * HTTP server at `https://external.com/mcp`: ❌ Blocked (doesn&#39;t match any URL pattern)
+  * Stdio server with any command: ❌ Blocked (no name or command entries to match)
+&lt;/Accordion&gt;
+
+&lt;Accordion title=&#34;Example: Command-only allowlist&#34;&gt;
+  ```json  theme={null}
+  {
+    &#34;allowedMcpServers&#34;: [
+      { &#34;serverCommand&#34;: [&#34;npx&#34;, &#34;-y&#34;, &#34;approved-package&#34;] }
+    ]
+  }
+  ```
+
+  **Result**:
+
+  * Stdio server with `[&#34;npx&#34;, &#34;-y&#34;, &#34;approved-package&#34;]`: ✅ Allowed (matches command)
+  * Stdio server with `[&#34;node&#34;, &#34;server.js&#34;]`: ❌ Blocked (doesn&#39;t match command)
+  * HTTP server named &#34;my-api&#34;: ❌ Blocked (no name entries to match)
+&lt;/Accordion&gt;
+
+&lt;Accordion title=&#34;Example: Mixed name and command allowlist&#34;&gt;
+  ```json  theme={null}
+  {
+    &#34;allowedMcpServers&#34;: [
+      { &#34;serverName&#34;: &#34;github&#34; },
+      { &#34;serverCommand&#34;: [&#34;npx&#34;, &#34;-y&#34;, &#34;approved-package&#34;] }
+    ]
+  }
+  ```
+
+  **Result**:
+
+  * Stdio server named &#34;local-tool&#34; with `[&#34;npx&#34;, &#34;-y&#34;, &#34;approved-package&#34;]`: ✅ Allowed (matches command)
+  * Stdio server named &#34;local-tool&#34; with `[&#34;node&#34;, &#34;server.js&#34;]`: ❌ Blocked (command entries exist but doesn&#39;t match)
+  * Stdio server named &#34;github&#34; with `[&#34;node&#34;, &#34;server.js&#34;]`: ❌ Blocked (stdio servers must match commands when command entries exist)
+  * HTTP server named &#34;github&#34;: ✅ Allowed (matches name)
+  * HTTP server named &#34;other-api&#34;: ❌ Blocked (name doesn&#39;t match)
+&lt;/Accordion&gt;
+
+&lt;Accordion title=&#34;Example: Name-only allowlist&#34;&gt;
+  ```json  theme={null}
+  {
+    &#34;allowedMcpServers&#34;: [
+      { &#34;serverName&#34;: &#34;github&#34; },
+      { &#34;serverName&#34;: &#34;internal-tool&#34; }
+    ]
+  }
+  ```
+
+  **Result**:
+
+  * Stdio server named &#34;github&#34; with any command: ✅ Allowed (no command restrictions)
+  * Stdio server named &#34;internal-tool&#34; with any command: ✅ Allowed (no command restrictions)
+  * HTTP server named &#34;github&#34;: ✅ Allowed (matches name)
+  * Any server named &#34;other&#34;: ❌ Blocked (name doesn&#39;t match)
+&lt;/Accordion&gt;
+
+#### Allowlist behavior (`allowedMcpServers`)
+
+* `undefined` (default): No restrictions - users can configure any MCP server
+* Empty array `[]`: Complete lockdown - users cannot configure any MCP servers
+* List of entries: Users can only configure servers that match by name, command, or URL pattern
+
+#### Denylist behavior (`deniedMcpServers`)
+
+* `undefined` (default): No servers are blocked
+* Empty array `[]`: No servers are blocked
+* List of entries: Specified servers are explicitly blocked across all scopes
+
+#### Important notes
+
+* **Option 1 and Option 2 can be combined**: If `managed-mcp.json` exists, it has exclusive control and users cannot add servers. Allowlists/denylists still apply to the enterprise servers themselves.
+* **Denylist takes absolute precedence**: If a server matches a denylist entry (by name, command, or URL), it will be blocked even if it&#39;s on the allowlist
+* Name-based, command-based, and URL-based restrictions work together: a server passes if it matches **either** a name entry, a command entry, or a URL pattern (unless blocked by denylist)
+
+&lt;Note&gt;
+  **When using `managed-mcp.json`**: Users cannot add MCP servers through `claude mcp add` or configuration files. The `allowedMcpServers` and `deniedMcpServers` settings still apply to filter which enterprise servers are actually loaded.
+&lt;/Note&gt;
+
+
+---
+
+&gt; To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt</code></pre>
    </div>
</body>
</html>