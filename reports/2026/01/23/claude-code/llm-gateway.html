<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>llm-gateway - Diff Report</title>
    <link rel="stylesheet" href="../../css/diff.css">
    <style>
        :root {
            --bg-color: #1a1a2e;
            --card-bg: #16213e;
            --text-color: #eee;
            --accent: #0f3460;
            --add-bg: #1a4d1a;
            --del-bg: #4d1a1a;
            --add-text: #4ade80;
            --del-text: #f87171;
        }
        @media (prefers-color-scheme: light) {
            :root {
                --bg-color: #f5f5f5;
                --card-bg: #fff;
                --text-color: #333;
                --accent: #e0e0e0;
                --add-bg: #d4edda;
                --del-bg: #f8d7da;
                --add-text: #155724;
                --del-text: #721c24;
            }
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 2rem;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { margin-bottom: 2rem; }
        h1 { font-size: 1.5rem; margin-bottom: 0.5rem; }
        .meta { color: #888; font-size: 0.9rem; }
        .summary {
            background: var(--card-bg);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            display: flex;
            gap: 2rem;
        }
        .stat { display: flex; align-items: center; gap: 0.5rem; }
        .stat.added { color: var(--add-text); }
        .stat.removed { color: var(--del-text); }
        .analysis {
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid #8b5cf6;
        }
        .analysis-header {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #8b5cf6;
        }
        .analysis-content {
            white-space: pre-wrap;
            font-size: 0.95rem;
            line-height: 1.7;
        }
        .diff-container {
            background: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
        }
        .diff-header {
            background: var(--accent);
            padding: 0.75rem 1rem;
            font-weight: 600;
        }
        .diff-content {
            padding: 1rem;
            overflow-x: auto;
        }
        .diff-content ins {
            background: var(--add-bg);
            color: var(--add-text);
            text-decoration: none;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        .diff-content del {
            background: var(--del-bg);
            color: var(--del-text);
            text-decoration: line-through;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        pre {
            background: var(--accent);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.85rem;
            margin-top: 2rem;
        }
        a { color: #60a5fa; }
        .back-link { margin-bottom: 1rem; display: inline-block; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">&larr; Back to daily report</a>

        <header>
            <h1>llm-gateway.md</h1>
            <p class="meta">Changed on 2026-01-23 22:23:14 EST</p>
        </header>

        <div class="summary">
            <div class="stat added">
                <span>+3</span> lines added
            </div>
            <div class="stat removed">
                <span>-2</span> lines removed
            </div>
        </div>

        

        <div class="diff-container">
            <div class="diff-header">Visual Diff</div>
            <div class="diff-content"><ins style="background:#e6ffe6;">&gt; ## Documentation Index&para;<br>&gt; Fetch the complete documentation index at: https://code.claude.com/docs/llms.txt&para;<br>&gt; Use this file to discover all available pages before exploring further.&para;<br>&para;<br></ins><span># LLM gateway configuration&para;<br>&para;<br>&gt; Learn how to configure Claude Code to work with LLM gateway solutions. Covers gateway requirements, authentication configuration, model selection, and provider-specific endpoint setup.&para;<br>&para;<br>LLM gateways provide a centralized proxy layer between Claude Code and model providers, often providing:&para;<br>&para;<br>* **Centralized authentication** - Single point for API key management&para;<br>* **Usage tracking** - Monitor usage across teams and projects&para;<br>* **Cost controls** - Implement budgets and rate limits&para;<br>* **Audit logging** - Track all model interactions for compliance&para;<br>* **Model routing** - Switch between providers without code changes&para;<br>&para;<br>## Gateway requirements&para;<br>&para;<br>For an LLM gateway to work with Claude Code, it must meet the following requirements:&para;<br>&para;<br>**API format**&para;<br>&para;<br>The gateway must expose to clients at least one of the following API formats:&para;<br>&para;<br>1. **Anthropic Messages**: `/v1/messages`, `/v1/messages/count_tokens`&para;<br>   * Must forward request headers: `anthropic-beta`, `anthropic-version`&para;<br>&para;<br>2. **Bedrock InvokeModel**: `/invoke`, `/invoke-with-response-stream`&para;<br>   * Must preserve request body fields: `anthropic_beta`, `anthropic_version`&para;<br>&para;<br>3. **Vertex rawPredict**: `:rawPredict`, `:streamRawPredict`, `/count-tokens:rawPredict`&para;<br>   * Must forward request headers: `anthropic-beta`, `anthropic-version`&para;<br>&para;<br>Failure to forward headers or preserve body fields may result in reduced functionality or inability to use Claude Code features.&para;<br>&para;<br>&lt;Note&gt;&para;<br>  Claude Code determines which features to enable based on the API format. When using the Anthropic Messages format with Bedrock or Vertex, you may need to set environment variable `CLAUDE_CODE_DISABLE_EXPERIMENTAL_BETAS=1`.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>## Configuration&para;<br>&para;<br>### Model selection&para;<br>&para;<br>By default, Claude Code will use standard model names for the selected API format.&para;<br>&para;<br>If you have configured custom model names in your gateway, use the environment variables documented in [Model configuration](/en/model-config) to match your custom names.&para;<br>&para;<br>## LiteLLM configuration&para;<br>&para;<br>&lt;Note&gt;&para;<br>  LiteLLM is a third-party proxy service. Anthropic doesn't endorse, maintain, or audit LiteLLM's security or functionality. This guide is provided for informational purposes and may become outdated. Use at your own discretion.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>### Prerequisites&para;<br>&para;<br>* Claude Code updated to the latest version&para;<br>* LiteLLM Proxy Server deployed and accessible&para;<br>* Access to Claude models through your chosen provider&para;<br>&para;<br>### Basic LiteLLM setup&para;<br>&para;<br>**Configure Claude Code**:&para;<br>&para;<br>#### Authentication methods&para;<br>&para;<br>##### Static API key&para;<br>&para;<br>Simplest method using a fixed API key:&para;<br>&para;<br>```bash  theme={null}&para;<br># Set in environment&para;<br>export ANTHROPIC_AUTH_TOKEN=sk-litellm-static-key&para;<br>&para;<br># Or in Claude Code settings&para;<br>{&para;<br>  "env": {&para;<br>    "ANTHROPIC_AUTH_TOKEN": "sk-litellm-static-key"&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>This value will be sent as the `Authorization` header.&para;<br>&para;<br>##### Dynamic API key with helper&para;<br>&para;<br>For rotating keys or per-user authentication:&para;<br>&para;<br>1. Create an API key helper script:&para;<br>&para;<br>```bash  theme={null}&para;<br>#!/bin/bash&para;<br># ~/bin/get-litellm-key.sh&para;<br>&para;<br># Example: Fetch key from vault&para;<br>vault kv get -field=api_key secret/litellm/claude-code&para;<br>&para;<br># Example: Generate JWT token&para;<br>jwt encode \&para;<br>  --secret="${JWT_SECRET}" \&para;<br>  --exp="+1h" \&para;<br>  '{"user":"'${USER}'","team":"engineering"}'&para;<br>```&para;<br>&para;<br>2. Configure Claude Code settings to use the helper:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "apiKeyHelper": "~/bin/get-litellm-key.sh"&para;<br>}&para;<br>```&para;<br>&para;<br>3. Set token refresh interval:&para;<br>&para;<br>```bash  theme={null}&para;<br># Refresh every hour (3600000 ms)&para;<br>export CLAUDE_CODE_API_KEY_HELPER_TTL_MS=3600000&para;<br>```&para;<br>&para;<br>This value will be sent as `Authorization` and `X-Api-Key` headers. The `apiKeyHelper` has lower precedence than `ANTHROPIC_AUTH_TOKEN` or `ANTHROPIC_API_KEY`.&para;<br>&para;<br>#### Unified endpoint (recommended)&para;<br>&para;<br>Using LiteLLM's [Anthropic format endpoint](https://docs.litellm.ai/docs/anthropic_unified):&para;<br>&para;<br>```bash  theme={null}&para;<br>export ANTHROPIC_BASE_URL=https://litellm-server:4000&para;<br>```&para;<br>&para;<br>**Benefits of the unified endpoint over pass-through endpoints:**&para;<br>&para;<br>* Load balancing&para;<br>* Fallbacks&para;<br>* Consistent support for cost tracking and end-user tracking&para;<br>&para;<br>#### Provider-specific pass-through endpoints (alternative)&para;<br>&para;<br>##### Claude API through LiteLLM&para;<br>&para;<br>Using [pass-through endpoint](https://docs.litellm.ai/docs/pass_through/anthropic_completion):&para;<br>&para;<br>```bash  theme={null}&para;<br>export ANTHROPIC_BASE_URL=https://litellm-server:4000/anthropic&para;<br>```&para;<br>&para;<br>##### Amazon Bedrock through LiteLLM&para;<br>&para;<br>Using [pass-through endpoint](https://docs.litellm.ai/docs/pass_through/bedrock):&para;<br>&para;<br>```bash  theme={null}&para;<br>export ANTHROPIC_BEDROCK_BASE_URL=https://litellm-server:4000/bedrock&para;<br>export CLAUDE_CODE_SKIP_BEDROCK_AUTH=1&para;<br>export CLAUDE_CODE_USE_BEDROCK=1&para;<br>```&para;<br>&para;<br>##### Google Vertex AI through LiteLLM&para;<br>&para;<br>Using [pass-through endpoint](https://docs.litellm.ai/docs/pass_through/vertex_ai):&para;<br>&para;<br>```bash  theme={null}&para;<br>export ANTHROPIC_VERTEX_BASE_URL=https://litellm-server:4000/vertex_ai/v1&para;<br>export ANTHROPIC_VERTEX_PROJECT_ID=your-gcp-project-id&para;<br>export CLAUDE_CODE_SKIP_VERTEX_AUTH=1&para;<br>export CLAUDE_CODE_USE_VERTEX=1&para;<br>export CLOUD_ML_REGION=us-east5&para;<br>```&para;<br>&para;<br>For more detailed information, refer to the [LiteLLM documentation](https://docs.litellm.ai/).&para;<br>&para;<br>## Additional resources&para;<br>&para;<br>* [LiteLLM documentation](https://docs.litellm.ai/)&para;<br>* [Claude Code settings](/en/settings)&para;<br>* [Enterprise network configuration](/en/network-config)&para;<br>* [Third-party integrations overview](/en/third-party-integrations)&para;<br></span><del style="background:#ffe6e6;">&para;<br>&para;<br>---&para;<br>&para;<br>&gt; To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt</del></div>
        </div>

        <h2 style="margin-top: 2rem; margin-bottom: 1rem;">Unified Diff</h2>
        <pre><code>--- a/llm-gateway.md
+++ b/llm-gateway.md
@@ -1,3 +1,7 @@
+&gt; ## Documentation Index
+&gt; Fetch the complete documentation index at: https://code.claude.com/docs/llms.txt
+&gt; Use this file to discover all available pages before exploring further.
+
 # LLM gateway configuration
 
 &gt; Learn how to configure Claude Code to work with LLM gateway solutions. Covers gateway requirements, authentication configuration, model selection, and provider-specific endpoint setup.
@@ -168,8 +172,3 @@
 * [Claude Code settings](/en/settings)
 * [Enterprise network configuration](/en/network-config)
 * [Third-party integrations overview](/en/third-party-integrations)
-
-
----
-
-&gt; To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt</code></pre>
    </div>
</body>
</html>