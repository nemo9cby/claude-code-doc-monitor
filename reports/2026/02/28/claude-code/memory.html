<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>memory - Diff Report</title>
    <link rel="stylesheet" href="../../css/diff.css">
    <style>
        :root {
            --bg-color: #1a1a2e;
            --card-bg: #16213e;
            --text-color: #eee;
            --accent: #0f3460;
            --add-bg: #1a4d1a;
            --del-bg: #4d1a1a;
            --add-text: #4ade80;
            --del-text: #f87171;
        }
        @media (prefers-color-scheme: light) {
            :root {
                --bg-color: #f5f5f5;
                --card-bg: #fff;
                --text-color: #333;
                --accent: #e0e0e0;
                --add-bg: #d4edda;
                --del-bg: #f8d7da;
                --add-text: #155724;
                --del-text: #721c24;
            }
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 2rem;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { margin-bottom: 2rem; }
        h1 { font-size: 1.5rem; margin-bottom: 0.5rem; }
        .meta { color: #888; font-size: 0.9rem; }
        .summary {
            background: var(--card-bg);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            display: flex;
            gap: 2rem;
        }
        .stat { display: flex; align-items: center; gap: 0.5rem; }
        .stat.added { color: var(--add-text); }
        .stat.removed { color: var(--del-text); }
        .analysis {
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid #8b5cf6;
        }
        .analysis-header {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #8b5cf6;
        }
        .analysis-content {
            white-space: pre-wrap;
            font-size: 0.95rem;
            line-height: 1.7;
        }
        .diff-container {
            background: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
        }
        .diff-header {
            background: var(--accent);
            padding: 0.75rem 1rem;
            font-weight: 600;
        }
        .diff-content {
            padding: 1rem;
            overflow-x: auto;
        }
        .diff-content ins {
            background: var(--add-bg);
            color: var(--add-text);
            text-decoration: none;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        .diff-content del {
            background: var(--del-bg);
            color: var(--del-text);
            text-decoration: line-through;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        pre {
            background: var(--accent);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.85rem;
            margin-top: 2rem;
        }
        a { color: #60a5fa; }
        .back-link { margin-bottom: 1rem; display: inline-block; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">&larr; Back to daily report</a>

        <header>
            <h1>memory.md</h1>
            <p class="meta">Changed on 2026-02-28 13:26:12 EST</p>
        </header>

        <div class="summary">
            <div class="stat added">
                <span>+135</span> lines added
            </div>
            <div class="stat removed">
                <span>-113</span> lines removed
            </div>
        </div>

        

        <div class="diff-container">
            <div class="diff-header">Visual Diff</div>
            <div class="diff-content"><span>&gt; ## Documentation Index&para;<br>&gt; Fetch the complete documentation index at: https://code.claude.com/docs/llms.txt&para;<br>&gt; Use this file to discover all available pages before exploring further.&para;<br>&para;<br># </span><del style="background:#ffe6e6;">Manage Claude's memory&para;<br>&para;<br>&gt; Learn how to manage Claude Code's memory across sessions with different memory locations and best practices.&para;<br>&para;<br>Claude Code has two kinds of memory that persist across sessions:&para;<br>&para;<br>* **Auto memory**: Claude automatically saves useful context like project patterns, key commands, and your preferences. This persists across sessions.&para;<br>* **CLAUDE.md files**: Markdown files you write and maintain with instructions, rules, and preferences for Claude to follow.&para;<br>&para;<br>Both are loaded into Claude's context at the start of every session, though auto memory loads only the first 200 lines of its main file.&para;<br>&para;<br>## Determine memory type&para;<br>&para;<br>Claude Code offers several memory locations in a hierarchical structure, each serving a different purpose:&para;<br>&para;<br>| Memory Type                | Location                                                                                                                                                        | Purpose                                             | Use Case Examples                                                    | Shared With                     |&para;<br>| -------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------- | -------------------------------------------------------------------- | ------------------------------- |&para;<br>| **Managed policy**         | • macOS: `/Library/Application Support/ClaudeCode/CLAUDE.md`&lt;br /&gt;• Linux: `/etc/claude-code/CLAUDE.md`&lt;br /&gt;• Windows: `C:\Program Files\ClaudeCode\CLAUDE.md` | Organization-wide instructions managed by IT/DevOps | Company coding standards, security policies, compliance requirements | All users in organization       |&para;<br>| **Project memory**         | `./CLAUDE.md` or `./.claude/CLAUDE.md`                                                                                                                          | Team-shared instructions for the project            | Project architecture, coding standards, common workflows             | Team members via source control |&para;<br>| **Project rules**          | `./.claude/rules/*.md`                                                                                                                                          | Modular, topic-specific project instructions        | Language-specific guidelines, testing conventions, API standards     | Team members via source control |&para;<br>| **User memory**            | `~/.claude/CLAUDE.md`                                                                                                                                           | Personal preferences for all projects               | Code styling preferences, personal tooling shortcuts                 | Just you (all projects)         |&para;<br>| **Project memory (local)** | `./CLAUDE.local.md`                                                                                                                                             | Personal project-specific preferences               | Your sandbox URLs, preferred test data                               | Just you (current project)      |&para;<br>| **Auto memory**            | `~/.claude/projects/&lt;project&gt;/memory/`                                                                                                                          | Claude's automatic notes and learnings              | Project patterns, debugging insights, architecture notes             | Just you (per project)          |&para;<br>&para;<br>CLAUDE.md files in the directory hierarchy above the working directory are loaded in full at launch. CLAUDE.md files in child directories load on demand when Claude reads files in those directories. Auto memory loads only the first 200 lines of `MEMORY.md`. More specific instructions take precedence over broader ones.&para;<br>&para;<br>&lt;Note&gt;&para;<br>  CLAUDE.local.md files are automatically added to .gitignore, making them ideal for private project-specific preferences that shouldn't be checked into version control.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>## Auto memory&para;<br>&para;<br>Auto memory is a persistent directory where Claude records learnings, patterns, and insights as it works. Unlike CLAUDE.md files that contain instructions you write for Claude, auto memory contains notes Claude writes for itself based on what it discovers during sessions.&para;<br>&para;<br>&lt;Note&gt;&para;<br>  Auto memory is enabled by default. To toggle it on or off, use `/memory` and select the auto-memory toggle.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>### What Claude remembers&para;<br>&para;<br>As Claude works, it may save things like:&para;<br>&para;<br>* Project patterns: build commands, test conventions, code style preferences&para;<br>* Debugging insights: solutions to tricky problems, common error causes&para;<br>* Architecture notes: key files, module relationships, important abstractions&para;<br>* Your preferences: communication style, workflow habits, tool choices&para;<br>&para;<br>### Where auto memory is stored&para;<br>&para;<br>Each project gets its own memory directory at `~/.claude/projects/&lt;project&gt;/memory/`. The `&lt;project&gt;` path is derived from the git repository root, so all subdirectories within the same repo share one auto memory directory. Git worktrees get separate memory directories. Outside a git repo, the working directory is used instead.&para;<br>&para;<br>The directory contains a `MEMORY.md` entrypoint and optional topic files:&para;<br>&para;<br>```text  theme={null}&para;<br>~/.claude/projects/&lt;project&gt;/memory/&para;<br>├── MEMORY.md          # Concise index, loaded into every session&para;<br>├── debugging.md       # Detailed notes on debugging patterns&para;<br>├── api-conventions.md # API design decisions&para;<br>└── ...                # Any other topic files Claude creates&para;<br>```&para;<br>&para;<br>`MEMORY.md` acts as an index of the memory directory. Claude reads and writes files in this directory throughout your session, using `MEMORY.md` to keep track of what's stored where.&para;<br>&para;<br>### How it works&para;<br>&para;<br>* The first 200 lines of `MEMORY.md` are loaded into Claude's system prompt at the start of every session. Content beyond 200 lines is not loaded automatically, and Claude is instructed to keep it concise by moving detailed notes into separate topic files.&para;<br>* Topic files like `debugging.md` or `patterns.md` are not loaded at startup. Claude reads them on demand using its standard file tools when it needs the information.&para;<br>* Claude reads and writes memory files during your session, so you'll see memory updates happen as you work.&para;<br>&para;<br>### Manage auto memory&para;<br>&para;<br>Auto memory files are markdown files you can edit at any time. Use `/memory` to open the file selector, which includes your auto memory entrypoint alongside your CLAUDE.md files. The `/memory` selector also includes an auto-memory toggle to turn the feature on or off.&para;<br>&para;<br>To ask Claude to save something specific, tell it directly: "remember that we use pnpm, not npm" or "save to memory that the API tests require a local Redis instance".&para;<br>&para;<br>You can also control auto memory through settings or environment variables.&para;<br>&para;<br>Disable auto memory for all projects by adding `autoMemoryEnabled` to your user settings:&para;<br>&para;<br>```json  theme={null}&para;<br>// ~/.claude/settings.json&para;<br>{ "autoMemoryEnabled": false }&para;<br>```&para;<br>&para;<br>Disable auto memory for a single project by adding `autoMemoryEnabled` to the project settings:&para;<br>&para;<br>```json  theme={null}&para;<br>// .claude/settings.json&para;<br>{ "autoMemoryEnabled": false }&para;<br>```&para;<br>&para;<br>Override all other settings with the `CLAUDE_CODE_DISABLE_AUTO_MEMORY` environment variable. This takes precedence over both the `/memory` toggle and `settings.json`, making it useful for CI or managed environments:&para;<br>&para;<br>```bash  theme={null}&para;<br>export CLAUDE_CODE_DISABLE_AUTO_MEMORY=1  # Force off&para;<br>export CLAUDE_CODE_DISABLE_AUTO_MEMORY=0  # Force on&para;<br>```&para;<br>&para;<br>## CLAUDE.md imports&para;<br>&para;<br>CLAUDE.md files can import additional files using `@path/to/import` syntax. The following example imports 3 files:&para;<br>&para;<br>```&para;<br>See @README for project overview and @package.json for available npm commands for this project.&para;<br>&para;<br># Additional Instructions&para;<br>- git workflow @docs/git-instructions.md&para;<br>```&para;<br>&para;<br>Both relative and absolute paths are allowed. Relative paths resolve relative to the file containing the import, not the working directory. For private per-project preferences that shouldn't be checked into version control, prefer</del><ins style="background:#e6ffe6;">How Claude remembers your project&para;<br>&para;<br>&gt; Give Claude persistent instructions with CLAUDE.md files, and let Claude accumulate learnings automatically with auto memory.&para;<br>&para;<br>Each Claude Code session begins with a fresh context window. Two mechanisms carry knowledge across sessions:&para;<br>&para;<br>* **CLAUDE.md files**: instructions you write to give Claude persistent context&para;<br>* **Auto memory**: notes Claude writes itself based on your corrections and preferences&para;<br>&para;<br>This page covers how to:&para;<br>&para;<br>* [Write and organize CLAUDE.md files](#claudemd-files)&para;<br>* [Scope rules to specific file types](#organize-rules-with-clauderules) with `.claude/rules/`&para;<br>* [Configure auto memory](#auto-memory) so Claude takes notes automatically&para;<br>* [Troubleshoot](#troubleshoot-memory-issues) when instructions aren't being followed&para;<br>&para;<br>## CLAUDE.md vs auto memory&para;<br>&para;<br>Claude Code has two complementary memory systems. Both are loaded at the start of every conversation. Claude treats them as context, not enforced configuration. The more specific and concise your instructions, the more consistently Claude follows them.&para;<br>&para;<br>|                      | CLAUDE.md files                                   | Auto memory                                                      |&para;<br>| :------------------- | :------------------------------------------------ | :--------------------------------------------------------------- |&para;<br>| **Who writes it**    | You                                               | Claude                                                           |&para;<br>| **What it contains** | Instructions and rules                            | Learnings and patterns                                           |&para;<br>| **Scope**            | Project, user, or org                             | Per working tree                                                 |&para;<br>| **Loaded into**      | Every session                                     | Every session (first 200 lines)                                  |&para;<br>| **Use for**          | Coding standards, workflows, project architecture | Build commands, debugging insights, preferences Claude discovers |&para;<br>&para;<br>Use CLAUDE.md files when you want to guide Claude's behavior. Auto memory lets Claude learn from your corrections without manual effort.&para;<br>&para;<br>Subagents can also maintain their own auto memory. See [subagent configuration](/en/sub-agents#enable-persistent-memory) for details.&para;<br>&para;<br>## CLAUDE.md files&para;<br>&para;<br>CLAUDE.md files are markdown files that give Claude persistent instructions for a project, your personal workflow, or your entire organization. You write these files in plain text; Claude reads them at the start of every session.&para;<br>&para;<br>### Choose where to put CLAUDE.md files&para;<br>&para;<br>CLAUDE.md files can live in several locations, each with a different scope. More specific locations take precedence over broader ones.&para;<br>&para;<br>| Scope                    | Location                                                                                                                                                                | Purpose                                                     | Use case examples                                                    | Shared with                     |&para;<br>| ------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------- | -------------------------------------------------------------------- | ------------------------------- |&para;<br>| **Managed policy**       | • macOS: `/Library/Application Support/ClaudeCode/CLAUDE.md`&lt;br /&gt;• Linux and WSL: `/etc/claude-code/CLAUDE.md`&lt;br /&gt;• Windows: `C:\Program Files\ClaudeCode\CLAUDE.md` | Organization-wide instructions managed by IT/DevOps         | Company coding standards, security policies, compliance requirements | All users in organization       |&para;<br>| **Project instructions** | `./CLAUDE.md` or `./.claude/CLAUDE.md`                                                                                                                                  | Team-shared instructions for the project                    | Project architecture, coding standards, common workflows             | Team members via source control |&para;<br>| **User instructions**    | `~/.claude/CLAUDE.md`                                                                                                                                                   | Personal preferences for all projects                       | Code styling preferences, personal tooling shortcuts                 | Just you (all projects)         |&para;<br>| **Local instructions**   | `./CLAUDE.local.md`                                                                                                                                                     | Personal project-specific preferences, not checked into git | Your sandbox URLs, preferred test data                               | Just you (current project)      |&para;<br>&para;<br>CLAUDE.md files in the directory hierarchy above the working directory are loaded in full at launch. CLAUDE.md files in subdirectories load on demand when Claude reads files in those directories. See [How CLAUDE.md files load](#how-claudemd-files-load) for the full resolution order.&para;<br>&para;<br>For large projects, you can break instructions into topic-specific files using [project rules](#organize-rules-with-clauderules). Rules let you scope instructions to specific file types or subdirectories.&para;<br>&para;<br>### Set up a project CLAUDE.md&para;<br>&para;<br>A project CLAUDE.md can be stored in either `./CLAUDE.md` or `./.claude/CLAUDE.md`. Create this file and add instructions that apply to anyone working on the project: build and test commands, coding standards, architectural decisions, naming conventions, and common workflows. These instructions are shared with your team through version control, so focus on project-level standards rather than personal preferences.&para;<br>&para;<br>&lt;Tip&gt;&para;<br>  Run `/init` to generate a starting CLAUDE.md automatically. Claude analyzes your codebase and creates a file with build commands, test instructions, and project conventions it discovers. If a CLAUDE.md already exists, `/init` suggests improvements rather than overwriting it. Refine from there with instructions Claude wouldn't discover on its own.&para;<br>&lt;/Tip&gt;&para;<br>&para;<br>### Write effective instructions&para;<br>&para;<br>CLAUDE.md files are loaded into the context window at the start of every session, consuming tokens alongside your conversation. Because they're context rather than enforced configuration, how you write instructions affects how reliably Claude follows them. Specific, concise, well-structured instructions work best.&para;<br>&para;<br>**Size**: target under 200 lines per CLAUDE.md file. Longer files consume more context and reduce adherence. If your instructions are growing large, split them using [imports](#import-additional-files) or [`.claude/rules/`](#organize-rules-with-clauderules) files.&para;<br>&para;<br>**Structure**: use markdown headers and bullets to group related instructions. Claude scans structure the same way readers do: organized sections are easier to follow than dense paragraphs.&para;<br>&para;<br>**Specificity**: write instructions that are concrete enough to verify. For example:&para;<br>&para;<br>* "Use 2-space indentation" instead of "Format code properly"&para;<br>* "Run `npm test` before committing" instead of "Test your changes"&para;<br>* "API handlers live in `src/api/handlers/`" instead of "Keep files organized"&para;<br>&para;<br>**Consistency**: if two rules contradict each other, Claude may pick one arbitrarily. Review your CLAUDE.md files, nested CLAUDE.md files in subdirectories, and [`.claude/rules/`](#organize-rules-with-clauderules) periodically to remove outdated or conflicting instructions. In monorepos, use [`claudeMdExcludes`](#exclude-specific-claudemd-files) to skip CLAUDE.md files from other teams that aren't relevant to your work.&para;<br>&para;<br>### Import additional files&para;<br>&para;<br>CLAUDE.md files can import additional files using `@path/to/import` syntax. Imported files are expanded and loaded into context at launch alongside the CLAUDE.md that references them.&para;<br>&para;<br>Both relative and absolute paths are allowed. Relative paths resolve relative to the file containing the import, not the working directory. Imported files can recursively import other files, with a maximum depth of five hops.&para;<br>&para;<br>To pull in a README, package.json, and a workflow guide, reference them with `@` syntax anywhere in your CLAUDE.md:&para;<br>&para;<br>```text  theme={null}&para;<br>See @README for project overview and @package.json for available npm commands for this project.&para;<br>&para;<br># Additional Instructions&para;<br>- git workflow @docs/git-instructions.md&para;<br>```&para;<br>&para;<br>For private per-project preferences that shouldn't be checked into version control, use</ins><span> `CLAUDE.local.md`: it is automatically loaded and added to `.gitignore`.&para;<br>&para;<br>If you work across multiple git worktrees, `CLAUDE.local.md` only exists in one. Use a home-directory import instead so all worktrees share the same personal instructions:&para;<br>&para;<br>```</span><ins style="background:#e6ffe6;">text  theme={null}</ins><span>&para;<br># Individual Preferences&para;<br>- @~/.claude/my-project-instructions.md&para;<br>```&para;<br>&para;<br>&lt;Warning&gt;&para;<br>  The first time Claude Code encounters external imports in a project, it shows an approval dialog listing the </span><del style="background:#ffe6e6;">specific files. Approve to load them; decline to skip them. This is a one-time decision per project: once declined, the dialog does not resurface and the imports remain disabled.&para;<br>&lt;/Warning&gt;&para;<br>&para;<br>To avoid potential collisions, imports are not evaluated inside markdown code spans and code blocks.&para;<br>&para;<br>```&para;<br>This code span will not be treated as an import: `@anthropic-ai/claude-code`&para;<br>```&para;<br>&para;<br>Imported files can recursively import additional files, with a max-depth of 5 hops. You can see what memory files are loaded by running `/memory` command.&para;<br>&para;<br>## How Claude looks up memories&para;<br>&para;<br>Claude Code reads memories recursively: starting in the cwd, Claude Code recurses up to (but not including) the root directory */* and reads any CLAUDE.md or CLAUDE.local.md files it finds. This is especially convenient when working in large repositories where you run Claude Code in *foo/bar/*, and have memories in both *foo/CLAUDE.md* and *foo/bar/CLAUDE.md*.&para;<br>&para;<br>Claude will also discover CLAUDE.md nested in subtrees under your current working directory. Instead of loading them at launch, they are only included when Claude reads files in those subtrees.&para;<br>&para;<br>### Load memory from additional directories&para;<br>&para;<br>The `--add-dir` flag gives Claude access to additional directories outside your main working directory. By default, CLAUDE.md files from these directories are not loaded.&para;<br>&para;<br>To also load memory files (CLAUDE.md, .claude/CLAUDE.md, and .claude/rules/\*.md) from additional directories, set the `CLAUDE_CODE_ADDITIONAL_DIRECTORIES_CLAUDE_MD` environment variable:&para;<br>&para;<br>```bash  theme={null}&para;<br>CLAUDE_CODE_ADDITIONAL_DIRECTORIES_CLAUDE_MD=1 claude --add-dir ../shared-config&para;<br>```&para;<br>&para;<br>## Directly edit memories with `/memory`&para;<br>&para;<br>Use the `/memory` command during a session to open any memory file in your system editor for more extensive additions or organization.&para;<br>&para;<br>## Set up project memory&para;<br>&para;<br>Suppose you want to set up a CLAUDE.md file to store important project information, conventions, and frequently used commands. Project memory can be stored in either `./CLAUDE.md` or `./.claude/CLAUDE.md`.&para;<br>&para;<br>Bootstrap a CLAUDE.md for your codebase with the following command:&para;<br>&para;<br>```&para;<br>&gt; /init&para;<br>```&para;<br>&para;<br>&lt;Tip&gt;&para;<br>  Tips:&para;<br>&para;<br>  * Include frequently used commands (build, test, lint) to avoid repeated searches&para;<br>  * Document code style preferences and naming conventions&para;<br>  * Add important architectural patterns specific to your project&para;<br>  * CLAUDE.md memories can be used for both instructions shared with your team and for your individual preferences.&para;<br>&lt;/Tip&gt;&para;<br>&para;<br>## Modular rules with `.claude/rules/`&para;<br>&para;<br>For larger projects, you can organize instructions into multiple files using the `.claude/rules/` directory. This allows teams to maintain focused, well-organized rule files instead of one large CLAUDE.md.&para;<br>&para;<br>### Basic structure&para;<br>&para;<br>Place markdown files in your project's `.claude/rules/` directory:&para;<br>&para;<br>```</del><ins style="background:#e6ffe6;">files. If you decline, the imports stay disabled and the dialog does not appear again.&para;<br>&lt;/Warning&gt;&para;<br>&para;<br>For a more structured approach to organizing instructions, see [`.claude/rules/`](#organize-rules-with-clauderules).&para;<br>&para;<br>### How CLAUDE.md files load&para;<br>&para;<br>Claude Code reads CLAUDE.md files by walking up the directory tree from your current working directory, checking each directory along the way for CLAUDE.md and CLAUDE.local.md files. This means if you run Claude Code in `foo/bar/`, it loads instructions from both `foo/bar/CLAUDE.md` and `foo/CLAUDE.md`.&para;<br>&para;<br>Claude also discovers CLAUDE.md files in subdirectories under your current working directory. Instead of loading them at launch, they are included when Claude reads files in those subdirectories.&para;<br>&para;<br>If you work in a large monorepo where other teams' CLAUDE.md files get picked up, use [`claudeMdExcludes`](#exclude-specific-claudemd-files) to skip them.&para;<br>&para;<br>#### Load from additional directories&para;<br>&para;<br>The `--add-dir` flag gives Claude access to additional directories outside your main working directory. By default, CLAUDE.md files from these directories are not loaded.&para;<br>&para;<br>To also load CLAUDE.md files from additional directories, including `CLAUDE.md`, `.claude/CLAUDE.md`, and `.claude/rules/*.md`, set the `CLAUDE_CODE_ADDITIONAL_DIRECTORIES_CLAUDE_MD` environment variable:&para;<br>&para;<br>```bash  theme={null}&para;<br>CLAUDE_CODE_ADDITIONAL_DIRECTORIES_CLAUDE_MD=1 claude --add-dir ../shared-config&para;<br>```&para;<br>&para;<br>### Organize rules with `.claude/rules/`&para;<br>&para;<br>For larger projects, you can organize instructions into multiple files using the `.claude/rules/` directory. This keeps instructions modular and easier for teams to maintain. Rules can also be [scoped to specific file paths](#path-specific-rules), so they only load into context when Claude works with matching files, reducing noise and saving context space.&para;<br>&para;<br>&lt;Note&gt;&para;<br>  Rules load into context every session or when matching files are opened. For task-specific instructions that don't need to be in context all the time, use [skills](/en/skills) instead, which only load when you invoke them or when Claude determines they're relevant to your prompt.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>#### Set up rules&para;<br>&para;<br>Place markdown files in your project's `.claude/rules/` directory. Each file should cover one topic, with a descriptive filename like `testing.md` or `api-design.md`. All `.md` files are discovered recursively, so you can organize rules into subdirectories like `frontend/` or `backend/`:&para;<br>&para;<br>```text  theme={null}</ins><span>&para;<br>your-project/&para;<br>├── .claude/&para;<br>│   ├── CLAUDE.md           # Main project instructions&para;<br>│   └── rules/&para;<br>│       ├── code-style.md   # Code style guidelines&para;<br>│       ├── testing.md      # Testing conventions&para;<br>│       └── security.md     # Security requirements&para;<br>```&para;<br>&para;<br></span><del style="background:#ffe6e6;">All `.md` files in `.claude/rules/` are automatically loaded as project memory, with the same priority as `.claude/CLAUDE.md`.&para;<br>&para;<br></del><ins style="background:#e6ffe6;">Rules without [`paths` frontmatter](#path-specific-rules) are loaded at launch with the same priority as `.claude/CLAUDE.md`.&para;<br>&para;<br>#</ins><span>### Path-specific rules&para;<br>&para;<br>Rules can be scoped to specific files using YAML frontmatter with the `paths` field. These conditional rules only apply when Claude is working with files matching the specified patterns.&para;<br>&para;<br>```markdown  theme={null}&para;<br>---&para;<br>paths:&para;<br>  - "src/api/**/*.ts"&para;<br>---&para;<br>&para;<br># API Development Rules&para;<br>&para;<br>- All API endpoints must include input validation&para;<br>- Use the standard error response format&para;<br>- Include OpenAPI documentation comments&para;<br>```&para;<br>&para;<br>Rules without a `paths` field are loaded unconditionally and apply to all files.</span><del style="background:#ffe6e6;">&para;<br>&para;<br>### Glob patterns&para;<br>&para;<br>The `paths` field supports standard glob patterns</del><ins style="background:#e6ffe6;"> Path-scoped rules trigger when Claude reads files matching the pattern, not on every tool use.&para;<br>&para;<br>Use glob patterns in the `paths` field to match files by extension, directory, or any combination</ins><span>:&para;<br>&para;<br>| Pattern                | Matches                                  |&para;<br>| ---------------------- | ---------------------------------------- |&para;<br>| `**/*.ts`              | All TypeScript files in any directory    |&para;<br>| `src/**/*`             | All files under `src/` directory         |&para;<br>| `*.md`                 | Markdown files in the project root       |&para;<br>| `src/components/*.tsx` | React components in a specific directory |&para;<br>&para;<br>You can specify multiple patterns</span><ins style="background:#e6ffe6;"> and use brace expansion to match multiple extensions in one pattern</ins><span>:&para;<br>&para;<br>```markdown  theme={null}&para;<br>---&para;<br>paths:&para;<br>  - "src/**/*.</span><ins style="background:#e6ffe6;">{</ins><span>ts</span><ins style="background:#e6ffe6;">,tsx}</ins><span>"&para;<br>  - "lib/**/*.ts"&para;<br>  - "tests/**/*.test.ts"&para;<br>---&para;<br>```&para;<br>&para;<br></span><del style="background:#ffe6e6;">Brace expansion is supported for matching multiple extensions or directories:&para;<br>&para;<br>```markdown  theme={null}&para;<br>---&para;<br>paths:&para;<br>  - "src/**/*.{ts,tsx}"&para;<br>  - "{src,lib}/**/*.ts"&para;<br>---&para;<br>&para;<br># TypeScript/React Rules&para;<br>```&para;<br>&para;<br>This expands `src/**/*.{ts,tsx}` to match both `.ts` and `.tsx` files.&para;<br>&para;<br>### Subdirectories&para;<br>&para;<br>Rules can be organized into subdirectories for better structure:&para;<br>&para;<br>```&para;<br>.claude/rules/&para;<br>├── frontend/&para;<br>│   ├── react.md&para;<br>│   └── styles.md&para;<br>├── backend/&para;<br>│   ├── api.md&para;<br>│   └── database.md&para;<br>└── general.md&para;<br>```&para;<br>&para;<br>All `.md` files are discovered recursively.&para;<br>&para;<br>### Symlinks&para;<br>&para;<br>The `.claude/rules/` directory supports symlinks, allowing you to share common rules across multiple projects:&para;<br>&para;<br>```bash  theme={null}&para;<br># Symlink a shared rules directory&para;<br>ln -s ~/shared-claude-rules .claude/rules/shared&para;<br>&para;<br># Symlink individual rule files&para;<br>ln -s ~/company-standards/security.md .claude/rules/security.md&para;<br>```&para;<br>&para;<br>Symlinks are resolved and their contents are loaded normally. Circular symlinks are detected and handled gracefully.&para;<br>&para;<br>### User-level rules&para;<br>&para;<br>You can create personal rules that apply to all your projects in `~/.claude/rules/`:&para;<br>&para;<br>```&para;<br>~/.claude/rules/&para;<br>├── preferences.md    # Your personal coding preferences&para;<br>└── workflows.md      # Your preferred workflows&para;<br>```&para;<br>&para;<br>User-level rules are loaded before project rules, giving project rules higher priority.&para;<br>&para;<br>&lt;Tip&gt;&para;<br>  Best practices for `.claude/rules/`:&para;<br>&para;<br>  * **Keep rules focused**: Each file should cover one topic (e.g., `testing.md`, `api-design.md`)&para;<br>  * **Use descriptive filenames**: The filename should indicate what the rules cover&para;<br>  * **Use conditional rules sparingly**: Only add `paths` frontmatter when rules truly apply to specific file types&para;<br>  * **Organize with subdirectories**: Group related rules (e.g., `frontend/`, `backend/`)&para;<br>&lt;/Tip&gt;&para;<br>&para;<br>## Organization-level memory management&para;<br>&para;<br>Organizations can deploy centrally managed CLAUDE.md files that apply to all users.&para;<br>&para;<br>To set up organization-level memory management:&para;<br>&para;<br>1. Create the managed memory file at the **Managed policy** location shown in the [memory types table above](#determine-memory-type).&para;<br>&para;<br>2. Deploy via your configuration management system (MDM, Group Policy, Ansible, etc.) to ensure consistent distribution across all developer machines.&para;<br>&para;<br>## Memory best practices&para;<br>&para;<br>* **Be specific**: "Use 2-space indentation" is better than "Format code properly".&para;<br>* **Use structure to organize**: Format each individual memory as a bullet point and group related memories under descriptive markdown headings.&para;<br>* **Review periodically**: Update memories as your project evolves to ensure Claude is always using the most up to date information and context.</del><ins style="background:#e6ffe6;">#### Share rules across projects with symlinks&para;<br>&para;<br>The `.claude/rules/` directory supports symlinks, so you can maintain a shared set of rules and link them into multiple projects. Symlinks are resolved and loaded normally, and circular symlinks are detected and handled gracefully.&para;<br>&para;<br>This example links both a shared directory and an individual file:&para;<br>&para;<br>```bash  theme={null}&para;<br>ln -s ~/shared-claude-rules .claude/rules/shared&para;<br>ln -s ~/company-standards/security.md .claude/rules/security.md&para;<br>```&para;<br>&para;<br>#### User-level rules&para;<br>&para;<br>Personal rules in `~/.claude/rules/` apply to every project on your machine. Use them for preferences that aren't project-specific:&para;<br>&para;<br>```text  theme={null}&para;<br>~/.claude/rules/&para;<br>├── preferences.md    # Your personal coding preferences&para;<br>└── workflows.md      # Your preferred workflows&para;<br>```&para;<br>&para;<br>User-level rules are loaded before project rules, giving project rules higher priority.&para;<br>&para;<br>### Manage CLAUDE.md for large teams&para;<br>&para;<br>For organizations deploying Claude Code across teams, you can centralize instructions and control which CLAUDE.md files are loaded.&para;<br>&para;<br>#### Deploy organization-wide CLAUDE.md&para;<br>&para;<br>Organizations can deploy a centrally managed CLAUDE.md that applies to all users on a machine. This file cannot be excluded by individual settings.&para;<br>&para;<br>&lt;Steps&gt;&para;<br>  &lt;Step title="Create the file at the managed policy location"&gt;&para;<br>    * macOS: `/Library/Application Support/ClaudeCode/CLAUDE.md`&para;<br>    * Linux and WSL: `/etc/claude-code/CLAUDE.md`&para;<br>    * Windows: `C:\Program Files\ClaudeCode\CLAUDE.md`&para;<br>  &lt;/Step&gt;&para;<br>&para;<br>  &lt;Step title="Deploy with your configuration management system"&gt;&para;<br>    Use MDM, Group Policy, Ansible, or similar tools to distribute the file across developer machines. See [managed settings](/en/permissions#managed-settings) for other organization-wide configuration options.&para;<br>  &lt;/Step&gt;&para;<br>&lt;/Steps&gt;&para;<br>&para;<br>#### Exclude specific CLAUDE.md files&para;<br>&para;<br>In large monorepos, ancestor CLAUDE.md files may contain instructions that aren't relevant to your work. The `claudeMdExcludes` setting lets you skip specific files by path or glob pattern.&para;<br>&para;<br>This example excludes a top-level CLAUDE.md and a rules directory from a parent folder. Add it to `.claude/settings.local.json` so the exclusion stays local to your machine:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "claudeMdExcludes": [&para;<br>    "**/monorepo/CLAUDE.md",&para;<br>    "/home/user/monorepo/other-team/.claude/rules/**"&para;<br>  ]&para;<br>}&para;<br>```&para;<br>&para;<br>Patterns are matched against absolute file paths using glob syntax. You can configure `claudeMdExcludes` at any [settings layer](/en/settings#settings-files): user, project, local, or managed policy. Arrays merge across layers.&para;<br>&para;<br>Managed policy CLAUDE.md files cannot be excluded. This ensures organization-wide instructions always apply regardless of individual settings.&para;<br>&para;<br>## Auto memory&para;<br>&para;<br>Auto memory lets Claude accumulate knowledge across sessions without you writing anything. Claude saves notes for itself as it works: build commands, debugging insights, architecture notes, code style preferences, and workflow habits. Claude doesn't save something every session. It decides what's worth remembering based on whether the information would be useful in a future conversation.&para;<br>&para;<br>### Enable or disable auto memory&para;<br>&para;<br>Auto memory is on by default. To toggle it, open `/memory` in a session and use the auto memory toggle, or set `autoMemoryEnabled` in your project settings:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "autoMemoryEnabled": false&para;<br>}&para;<br>```&para;<br>&para;<br>To disable auto memory via environment variable, set `CLAUDE_CODE_DISABLE_AUTO_MEMORY=1`.&para;<br>&para;<br>### Storage location&para;<br>&para;<br>Each project gets its own memory directory at `~/.claude/projects/&lt;project&gt;/memory/`. The `&lt;project&gt;` path is derived from the git repository, so all worktrees and subdirectories within the same repo share one auto memory directory. Outside a git repo, the project root is used instead.&para;<br>&para;<br>The directory contains a `MEMORY.md` entrypoint and optional topic files:&para;<br>&para;<br>```text  theme={null}&para;<br>~/.claude/projects/&lt;project&gt;/memory/&para;<br>├── MEMORY.md          # Concise index, loaded into every session&para;<br>├── debugging.md       # Detailed notes on debugging patterns&para;<br>├── api-conventions.md # API design decisions&para;<br>└── ...                # Any other topic files Claude creates&para;<br>```&para;<br>&para;<br>`MEMORY.md` acts as an index of the memory directory. Claude reads and writes files in this directory throughout your session, using `MEMORY.md` to keep track of what's stored where.&para;<br>&para;<br>Auto memory is machine-local and per-worktree. Files are not shared across machines, cloud environments, or worktrees.&para;<br>&para;<br>### How it works&para;<br>&para;<br>The first 200 lines of `MEMORY.md` are loaded at the start of every conversation. Content beyond line 200 is not loaded at session start. Claude keeps `MEMORY.md` concise by moving detailed notes into separate topic files.&para;<br>&para;<br>This 200-line limit applies only to `MEMORY.md`. CLAUDE.md files are loaded in full regardless of length, though shorter files produce better adherence.&para;<br>&para;<br>Topic files like `debugging.md` or `patterns.md` are not loaded at startup. Claude reads them on demand using its standard file tools when it needs the information.&para;<br>&para;<br>Claude reads and writes memory files during your session. When you see "Writing memory" or "Recalled memory" in the Claude Code interface, Claude is actively updating or reading from `~/.claude/projects/&lt;project&gt;/memory/`.&para;<br>&para;<br>### Audit and edit your memory&para;<br>&para;<br>Auto memory files are plain markdown you can edit or delete at any time. Run [`/memory`](#view-and-edit-with-memory) to browse and open memory files from within a session.&para;<br>&para;<br>## View and edit with `/memory`&para;<br>&para;<br>The `/memory` command lists all CLAUDE.md and rules files loaded in your current session, lets you toggle auto memory on or off, and provides a link to open the auto memory folder. Select any file to open it in your editor.&para;<br>&para;<br>When you ask Claude to remember something, like "always use pnpm, not npm" or "remember that the API tests require a local Redis instance," Claude saves it to auto memory. To add instructions to CLAUDE.md instead, ask Claude directly, like "add this to CLAUDE.md," or edit the file yourself via `/memory`.&para;<br>&para;<br>## Troubleshoot memory issues&para;<br>&para;<br>These are the most common issues with CLAUDE.md and auto memory, along with steps to debug them.&para;<br>&para;<br>### Claude isn't following my CLAUDE.md&para;<br>&para;<br>CLAUDE.md is context, not enforcement. Claude reads it and tries to follow it, but there's no guarantee of strict compliance, especially for vague or conflicting instructions.&para;<br>&para;<br>To debug:&para;<br>&para;<br>* Run `/memory` to verify your CLAUDE.md files are being loaded. If a file isn't listed, Claude can't see it.&para;<br>* Check that the relevant CLAUDE.md is in a location that gets loaded for your session (see [Choose where to put CLAUDE.md files](#choose-where-to-put-claudemd-files)).&para;<br>* Make instructions more specific. "Use 2-space indentation" works better than "format code nicely."&para;<br>* Look for conflicting instructions across CLAUDE.md files. If two files give different guidance for the same behavior, Claude may pick one arbitrarily.&para;<br>&para;<br>### I don't know what auto memory saved&para;<br>&para;<br>Run `/memory` and select the auto memory folder to browse what Claude has saved. Everything is plain markdown you can read, edit, or delete.&para;<br>&para;<br>### My CLAUDE.md is too large&para;<br>&para;<br>Files over 200 lines consume more context and may reduce adherence. Move detailed content into separate files referenced with `@path` imports (see [Import additional files](#import-additional-files)), or split your instructions across `.claude/rules/` files.&para;<br>&para;<br>### Instructions seem lost after `/compact`&para;<br>&para;<br>CLAUDE.md fully survives compaction. After `/compact`, Claude re-reads your CLAUDE.md from disk and re-injects it fresh into the session. If an instruction disappeared after compaction, it was given only in conversation, not written to CLAUDE.md. Add it to CLAUDE.md to make it persist across sessions.&para;<br>&para;<br>See [Write effective instructions](#write-effective-instructions) for guidance on size, structure, and specificity.&para;<br>&para;<br>## Related resources&para;<br>&para;<br>* [Skills](/en/skills): package repeatable workflows that load on demand&para;<br>* [Settings](/en/settings): configure Claude Code behavior with settings files&para;<br>* [Manage sessions](/en/sessions): manage context, resume conversations, and run parallel sessions&para;<br>* [Subagent memory](/en/sub-agents#enable-persistent-memory): let subagents maintain their own auto memory</ins><span>&para;<br></span></div>
        </div>

        <h2 style="margin-top: 2rem; margin-bottom: 1rem;">Unified Diff</h2>
        <pre><code>--- a/memory.md
+++ b/memory.md
@@ -2,184 +2,142 @@
 &gt; Fetch the complete documentation index at: https://code.claude.com/docs/llms.txt
 &gt; Use this file to discover all available pages before exploring further.
 
-# Manage Claude&#39;s memory
-
-&gt; Learn how to manage Claude Code&#39;s memory across sessions with different memory locations and best practices.
-
-Claude Code has two kinds of memory that persist across sessions:
-
-* **Auto memory**: Claude automatically saves useful context like project patterns, key commands, and your preferences. This persists across sessions.
-* **CLAUDE.md files**: Markdown files you write and maintain with instructions, rules, and preferences for Claude to follow.
-
-Both are loaded into Claude&#39;s context at the start of every session, though auto memory loads only the first 200 lines of its main file.
-
-## Determine memory type
-
-Claude Code offers several memory locations in a hierarchical structure, each serving a different purpose:
-
-| Memory Type                | Location                                                                                                                                                        | Purpose                                             | Use Case Examples                                                    | Shared With                     |
-| -------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------- | -------------------------------------------------------------------- | ------------------------------- |
-| **Managed policy**         | • macOS: `/Library/Application Support/ClaudeCode/CLAUDE.md`&lt;br /&gt;• Linux: `/etc/claude-code/CLAUDE.md`&lt;br /&gt;• Windows: `C:\Program Files\ClaudeCode\CLAUDE.md` | Organization-wide instructions managed by IT/DevOps | Company coding standards, security policies, compliance requirements | All users in organization       |
-| **Project memory**         | `./CLAUDE.md` or `./.claude/CLAUDE.md`                                                                                                                          | Team-shared instructions for the project            | Project architecture, coding standards, common workflows             | Team members via source control |
-| **Project rules**          | `./.claude/rules/*.md`                                                                                                                                          | Modular, topic-specific project instructions        | Language-specific guidelines, testing conventions, API standards     | Team members via source control |
-| **User memory**            | `~/.claude/CLAUDE.md`                                                                                                                                           | Personal preferences for all projects               | Code styling preferences, personal tooling shortcuts                 | Just you (all projects)         |
-| **Project memory (local)** | `./CLAUDE.local.md`                                                                                                                                             | Personal project-specific preferences               | Your sandbox URLs, preferred test data                               | Just you (current project)      |
-| **Auto memory**            | `~/.claude/projects/&lt;project&gt;/memory/`                                                                                                                          | Claude&#39;s automatic notes and learnings              | Project patterns, debugging insights, architecture notes             | Just you (per project)          |
-
-CLAUDE.md files in the directory hierarchy above the working directory are loaded in full at launch. CLAUDE.md files in child directories load on demand when Claude reads files in those directories. Auto memory loads only the first 200 lines of `MEMORY.md`. More specific instructions take precedence over broader ones.
-
-&lt;Note&gt;
-  CLAUDE.local.md files are automatically added to .gitignore, making them ideal for private project-specific preferences that shouldn&#39;t be checked into version control.
-&lt;/Note&gt;
-
-## Auto memory
-
-Auto memory is a persistent directory where Claude records learnings, patterns, and insights as it works. Unlike CLAUDE.md files that contain instructions you write for Claude, auto memory contains notes Claude writes for itself based on what it discovers during sessions.
-
-&lt;Note&gt;
-  Auto memory is enabled by default. To toggle it on or off, use `/memory` and select the auto-memory toggle.
-&lt;/Note&gt;
-
-### What Claude remembers
-
-As Claude works, it may save things like:
-
-* Project patterns: build commands, test conventions, code style preferences
-* Debugging insights: solutions to tricky problems, common error causes
-* Architecture notes: key files, module relationships, important abstractions
-* Your preferences: communication style, workflow habits, tool choices
-
-### Where auto memory is stored
-
-Each project gets its own memory directory at `~/.claude/projects/&lt;project&gt;/memory/`. The `&lt;project&gt;` path is derived from the git repository root, so all subdirectories within the same repo share one auto memory directory. Git worktrees get separate memory directories. Outside a git repo, the working directory is used instead.
-
-The directory contains a `MEMORY.md` entrypoint and optional topic files:
-
-```text  theme={null}
-~/.claude/projects/&lt;project&gt;/memory/
-├── MEMORY.md          # Concise index, loaded into every session
-├── debugging.md       # Detailed notes on debugging patterns
-├── api-conventions.md # API design decisions
-└── ...                # Any other topic files Claude creates
-```
-
-`MEMORY.md` acts as an index of the memory directory. Claude reads and writes files in this directory throughout your session, using `MEMORY.md` to keep track of what&#39;s stored where.
-
-### How it works
-
-* The first 200 lines of `MEMORY.md` are loaded into Claude&#39;s system prompt at the start of every session. Content beyond 200 lines is not loaded automatically, and Claude is instructed to keep it concise by moving detailed notes into separate topic files.
-* Topic files like `debugging.md` or `patterns.md` are not loaded at startup. Claude reads them on demand using its standard file tools when it needs the information.
-* Claude reads and writes memory files during your session, so you&#39;ll see memory updates happen as you work.
-
-### Manage auto memory
-
-Auto memory files are markdown files you can edit at any time. Use `/memory` to open the file selector, which includes your auto memory entrypoint alongside your CLAUDE.md files. The `/memory` selector also includes an auto-memory toggle to turn the feature on or off.
-
-To ask Claude to save something specific, tell it directly: &#34;remember that we use pnpm, not npm&#34; or &#34;save to memory that the API tests require a local Redis instance&#34;.
-
-You can also control auto memory through settings or environment variables.
-
-Disable auto memory for all projects by adding `autoMemoryEnabled` to your user settings:
-
-```json  theme={null}
-// ~/.claude/settings.json
-{ &#34;autoMemoryEnabled&#34;: false }
-```
-
-Disable auto memory for a single project by adding `autoMemoryEnabled` to the project settings:
-
-```json  theme={null}
-// .claude/settings.json
-{ &#34;autoMemoryEnabled&#34;: false }
-```
-
-Override all other settings with the `CLAUDE_CODE_DISABLE_AUTO_MEMORY` environment variable. This takes precedence over both the `/memory` toggle and `settings.json`, making it useful for CI or managed environments:
-
-```bash  theme={null}
-export CLAUDE_CODE_DISABLE_AUTO_MEMORY=1  # Force off
-export CLAUDE_CODE_DISABLE_AUTO_MEMORY=0  # Force on
-```
-
-## CLAUDE.md imports
-
-CLAUDE.md files can import additional files using `@path/to/import` syntax. The following example imports 3 files:
-
-```
+# How Claude remembers your project
+
+&gt; Give Claude persistent instructions with CLAUDE.md files, and let Claude accumulate learnings automatically with auto memory.
+
+Each Claude Code session begins with a fresh context window. Two mechanisms carry knowledge across sessions:
+
+* **CLAUDE.md files**: instructions you write to give Claude persistent context
+* **Auto memory**: notes Claude writes itself based on your corrections and preferences
+
+This page covers how to:
+
+* [Write and organize CLAUDE.md files](#claudemd-files)
+* [Scope rules to specific file types](#organize-rules-with-clauderules) with `.claude/rules/`
+* [Configure auto memory](#auto-memory) so Claude takes notes automatically
+* [Troubleshoot](#troubleshoot-memory-issues) when instructions aren&#39;t being followed
+
+## CLAUDE.md vs auto memory
+
+Claude Code has two complementary memory systems. Both are loaded at the start of every conversation. Claude treats them as context, not enforced configuration. The more specific and concise your instructions, the more consistently Claude follows them.
+
+|                      | CLAUDE.md files                                   | Auto memory                                                      |
+| :------------------- | :------------------------------------------------ | :--------------------------------------------------------------- |
+| **Who writes it**    | You                                               | Claude                                                           |
+| **What it contains** | Instructions and rules                            | Learnings and patterns                                           |
+| **Scope**            | Project, user, or org                             | Per working tree                                                 |
+| **Loaded into**      | Every session                                     | Every session (first 200 lines)                                  |
+| **Use for**          | Coding standards, workflows, project architecture | Build commands, debugging insights, preferences Claude discovers |
+
+Use CLAUDE.md files when you want to guide Claude&#39;s behavior. Auto memory lets Claude learn from your corrections without manual effort.
+
+Subagents can also maintain their own auto memory. See [subagent configuration](/en/sub-agents#enable-persistent-memory) for details.
+
+## CLAUDE.md files
+
+CLAUDE.md files are markdown files that give Claude persistent instructions for a project, your personal workflow, or your entire organization. You write these files in plain text; Claude reads them at the start of every session.
+
+### Choose where to put CLAUDE.md files
+
+CLAUDE.md files can live in several locations, each with a different scope. More specific locations take precedence over broader ones.
+
+| Scope                    | Location                                                                                                                                                                | Purpose                                                     | Use case examples                                                    | Shared with                     |
+| ------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------- | -------------------------------------------------------------------- | ------------------------------- |
+| **Managed policy**       | • macOS: `/Library/Application Support/ClaudeCode/CLAUDE.md`&lt;br /&gt;• Linux and WSL: `/etc/claude-code/CLAUDE.md`&lt;br /&gt;• Windows: `C:\Program Files\ClaudeCode\CLAUDE.md` | Organization-wide instructions managed by IT/DevOps         | Company coding standards, security policies, compliance requirements | All users in organization       |
+| **Project instructions** | `./CLAUDE.md` or `./.claude/CLAUDE.md`                                                                                                                                  | Team-shared instructions for the project                    | Project architecture, coding standards, common workflows             | Team members via source control |
+| **User instructions**    | `~/.claude/CLAUDE.md`                                                                                                                                                   | Personal preferences for all projects                       | Code styling preferences, personal tooling shortcuts                 | Just you (all projects)         |
+| **Local instructions**   | `./CLAUDE.local.md`                                                                                                                                                     | Personal project-specific preferences, not checked into git | Your sandbox URLs, preferred test data                               | Just you (current project)      |
+
+CLAUDE.md files in the directory hierarchy above the working directory are loaded in full at launch. CLAUDE.md files in subdirectories load on demand when Claude reads files in those directories. See [How CLAUDE.md files load](#how-claudemd-files-load) for the full resolution order.
+
+For large projects, you can break instructions into topic-specific files using [project rules](#organize-rules-with-clauderules). Rules let you scope instructions to specific file types or subdirectories.
+
+### Set up a project CLAUDE.md
+
+A project CLAUDE.md can be stored in either `./CLAUDE.md` or `./.claude/CLAUDE.md`. Create this file and add instructions that apply to anyone working on the project: build and test commands, coding standards, architectural decisions, naming conventions, and common workflows. These instructions are shared with your team through version control, so focus on project-level standards rather than personal preferences.
+
+&lt;Tip&gt;
+  Run `/init` to generate a starting CLAUDE.md automatically. Claude analyzes your codebase and creates a file with build commands, test instructions, and project conventions it discovers. If a CLAUDE.md already exists, `/init` suggests improvements rather than overwriting it. Refine from there with instructions Claude wouldn&#39;t discover on its own.
+&lt;/Tip&gt;
+
+### Write effective instructions
+
+CLAUDE.md files are loaded into the context window at the start of every session, consuming tokens alongside your conversation. Because they&#39;re context rather than enforced configuration, how you write instructions affects how reliably Claude follows them. Specific, concise, well-structured instructions work best.
+
+**Size**: target under 200 lines per CLAUDE.md file. Longer files consume more context and reduce adherence. If your instructions are growing large, split them using [imports](#import-additional-files) or [`.claude/rules/`](#organize-rules-with-clauderules) files.
+
+**Structure**: use markdown headers and bullets to group related instructions. Claude scans structure the same way readers do: organized sections are easier to follow than dense paragraphs.
+
+**Specificity**: write instructions that are concrete enough to verify. For example:
+
+* &#34;Use 2-space indentation&#34; instead of &#34;Format code properly&#34;
+* &#34;Run `npm test` before committing&#34; instead of &#34;Test your changes&#34;
+* &#34;API handlers live in `src/api/handlers/`&#34; instead of &#34;Keep files organized&#34;
+
+**Consistency**: if two rules contradict each other, Claude may pick one arbitrarily. Review your CLAUDE.md files, nested CLAUDE.md files in subdirectories, and [`.claude/rules/`](#organize-rules-with-clauderules) periodically to remove outdated or conflicting instructions. In monorepos, use [`claudeMdExcludes`](#exclude-specific-claudemd-files) to skip CLAUDE.md files from other teams that aren&#39;t relevant to your work.
+
+### Import additional files
+
+CLAUDE.md files can import additional files using `@path/to/import` syntax. Imported files are expanded and loaded into context at launch alongside the CLAUDE.md that references them.
+
+Both relative and absolute paths are allowed. Relative paths resolve relative to the file containing the import, not the working directory. Imported files can recursively import other files, with a maximum depth of five hops.
+
+To pull in a README, package.json, and a workflow guide, reference them with `@` syntax anywhere in your CLAUDE.md:
+
+```text  theme={null}
 See @README for project overview and @package.json for available npm commands for this project.
 
 # Additional Instructions
 - git workflow @docs/git-instructions.md
 ```
 
-Both relative and absolute paths are allowed. Relative paths resolve relative to the file containing the import, not the working directory. For private per-project preferences that shouldn&#39;t be checked into version control, prefer `CLAUDE.local.md`: it is automatically loaded and added to `.gitignore`.
+For private per-project preferences that shouldn&#39;t be checked into version control, use `CLAUDE.local.md`: it is automatically loaded and added to `.gitignore`.
 
 If you work across multiple git worktrees, `CLAUDE.local.md` only exists in one. Use a home-directory import instead so all worktrees share the same personal instructions:
 
-```
+```text  theme={null}
 # Individual Preferences
 - @~/.claude/my-project-instructions.md
 ```
 
 &lt;Warning&gt;
-  The first time Claude Code encounters external imports in a project, it shows an approval dialog listing the specific files. Approve to load them; decline to skip them. This is a one-time decision per project: once declined, the dialog does not resurface and the imports remain disabled.
+  The first time Claude Code encounters external imports in a project, it shows an approval dialog listing the files. If you decline, the imports stay disabled and the dialog does not appear again.
 &lt;/Warning&gt;
 
-To avoid potential collisions, imports are not evaluated inside markdown code spans and code blocks.
-
-```
-This code span will not be treated as an import: `@anthropic-ai/claude-code`
-```
-
-Imported files can recursively import additional files, with a max-depth of 5 hops. You can see what memory files are loaded by running `/memory` command.
-
-## How Claude looks up memories
-
-Claude Code reads memories recursively: starting in the cwd, Claude Code recurses up to (but not including) the root directory */* and reads any CLAUDE.md or CLAUDE.local.md files it finds. This is especially convenient when working in large repositories where you run Claude Code in *foo/bar/*, and have memories in both *foo/CLAUDE.md* and *foo/bar/CLAUDE.md*.
-
-Claude will also discover CLAUDE.md nested in subtrees under your current working directory. Instead of loading them at launch, they are only included when Claude reads files in those subtrees.
-
-### Load memory from additional directories
+For a more structured approach to organizing instructions, see [`.claude/rules/`](#organize-rules-with-clauderules).
+
+### How CLAUDE.md files load
+
+Claude Code reads CLAUDE.md files by walking up the directory tree from your current working directory, checking each directory along the way for CLAUDE.md and CLAUDE.local.md files. This means if you run Claude Code in `foo/bar/`, it loads instructions from both `foo/bar/CLAUDE.md` and `foo/CLAUDE.md`.
+
+Claude also discovers CLAUDE.md files in subdirectories under your current working directory. Instead of loading them at launch, they are included when Claude reads files in those subdirectories.
+
+If you work in a large monorepo where other teams&#39; CLAUDE.md files get picked up, use [`claudeMdExcludes`](#exclude-specific-claudemd-files) to skip them.
+
+#### Load from additional directories
 
 The `--add-dir` flag gives Claude access to additional directories outside your main working directory. By default, CLAUDE.md files from these directories are not loaded.
 
-To also load memory files (CLAUDE.md, .claude/CLAUDE.md, and .claude/rules/\*.md) from additional directories, set the `CLAUDE_CODE_ADDITIONAL_DIRECTORIES_CLAUDE_MD` environment variable:
+To also load CLAUDE.md files from additional directories, including `CLAUDE.md`, `.claude/CLAUDE.md`, and `.claude/rules/*.md`, set the `CLAUDE_CODE_ADDITIONAL_DIRECTORIES_CLAUDE_MD` environment variable:
 
 ```bash  theme={null}
 CLAUDE_CODE_ADDITIONAL_DIRECTORIES_CLAUDE_MD=1 claude --add-dir ../shared-config
 ```
 
-## Directly edit memories with `/memory`
-
-Use the `/memory` command during a session to open any memory file in your system editor for more extensive additions or organization.
-
-## Set up project memory
-
-Suppose you want to set up a CLAUDE.md file to store important project information, conventions, and frequently used commands. Project memory can be stored in either `./CLAUDE.md` or `./.claude/CLAUDE.md`.
-
-Bootstrap a CLAUDE.md for your codebase with the following command:
-
-```
-&gt; /init
-```
-
-&lt;Tip&gt;
-  Tips:
-
-  * Include frequently used commands (build, test, lint) to avoid repeated searches
-  * Document code style preferences and naming conventions
-  * Add important architectural patterns specific to your project
-  * CLAUDE.md memories can be used for both instructions shared with your team and for your individual preferences.
-&lt;/Tip&gt;
-
-## Modular rules with `.claude/rules/`
-
-For larger projects, you can organize instructions into multiple files using the `.claude/rules/` directory. This allows teams to maintain focused, well-organized rule files instead of one large CLAUDE.md.
-
-### Basic structure
-
-Place markdown files in your project&#39;s `.claude/rules/` directory:
-
-```
+### Organize rules with `.claude/rules/`
+
+For larger projects, you can organize instructions into multiple files using the `.claude/rules/` directory. This keeps instructions modular and easier for teams to maintain. Rules can also be [scoped to specific file paths](#path-specific-rules), so they only load into context when Claude works with matching files, reducing noise and saving context space.
+
+&lt;Note&gt;
+  Rules load into context every session or when matching files are opened. For task-specific instructions that don&#39;t need to be in context all the time, use [skills](/en/skills) instead, which only load when you invoke them or when Claude determines they&#39;re relevant to your prompt.
+&lt;/Note&gt;
+
+#### Set up rules
+
+Place markdown files in your project&#39;s `.claude/rules/` directory. Each file should cover one topic, with a descriptive filename like `testing.md` or `api-design.md`. All `.md` files are discovered recursively, so you can organize rules into subdirectories like `frontend/` or `backend/`:
+
+```text  theme={null}
 your-project/
 ├── .claude/
 │   ├── CLAUDE.md           # Main project instructions
@@ -189,9 +147,9 @@
 │       └── security.md     # Security requirements
 ```
 
-All `.md` files in `.claude/rules/` are automatically loaded as project memory, with the same priority as `.claude/CLAUDE.md`.
-
-### Path-specific rules
+Rules without [`paths` frontmatter](#path-specific-rules) are loaded at launch with the same priority as `.claude/CLAUDE.md`.
+
+#### Path-specific rules
 
 Rules can be scoped to specific files using YAML frontmatter with the `paths` field. These conditional rules only apply when Claude is working with files matching the specified patterns.
 
@@ -208,11 +166,9 @@
 - Include OpenAPI documentation comments
 ```
 
-Rules without a `paths` field are loaded unconditionally and apply to all files.
-
-### Glob patterns
-
-The `paths` field supports standard glob patterns:
+Rules without a `paths` field are loaded unconditionally and apply to all files. Path-scoped rules trigger when Claude reads files matching the pattern, not on every tool use.
+
+Use glob patterns in the `paths` field to match files by extension, directory, or any combination:
 
 | Pattern                | Matches                                  |
 | ---------------------- | ---------------------------------------- |
@@ -221,67 +177,33 @@
 | `*.md`                 | Markdown files in the project root       |
 | `src/components/*.tsx` | React components in a specific directory |
 
-You can specify multiple patterns:
-
-```markdown  theme={null}
----
-paths:
-  - &#34;src/**/*.ts&#34;
-  - &#34;lib/**/*.ts&#34;
-  - &#34;tests/**/*.test.ts&#34;
----
-```
-
-Brace expansion is supported for matching multiple extensions or directories:
+You can specify multiple patterns and use brace expansion to match multiple extensions in one pattern:
 
 ```markdown  theme={null}
 ---
 paths:
   - &#34;src/**/*.{ts,tsx}&#34;
-  - &#34;{src,lib}/**/*.ts&#34;
+  - &#34;lib/**/*.ts&#34;
+  - &#34;tests/**/*.test.ts&#34;
 ---
-
-# TypeScript/React Rules
-```
-
-This expands `src/**/*.{ts,tsx}` to match both `.ts` and `.tsx` files.
-
-### Subdirectories
-
-Rules can be organized into subdirectories for better structure:
-
-```
-.claude/rules/
-├── frontend/
-│   ├── react.md
-│   └── styles.md
-├── backend/
-│   ├── api.md
-│   └── database.md
-└── general.md
-```
-
-All `.md` files are discovered recursively.
-
-### Symlinks
-
-The `.claude/rules/` directory supports symlinks, allowing you to share common rules across multiple projects:
+```
+
+#### Share rules across projects with symlinks
+
+The `.claude/rules/` directory supports symlinks, so you can maintain a shared set of rules and link them into multiple projects. Symlinks are resolved and loaded normally, and circular symlinks are detected and handled gracefully.
+
+This example links both a shared directory and an individual file:
 
 ```bash  theme={null}
-# Symlink a shared rules directory
 ln -s ~/shared-claude-rules .claude/rules/shared
-
-# Symlink individual rule files
 ln -s ~/company-standards/security.md .claude/rules/security.md
 ```
 
-Symlinks are resolved and their contents are loaded normally. Circular symlinks are detected and handled gracefully.
-
-### User-level rules
-
-You can create personal rules that apply to all your projects in `~/.claude/rules/`:
-
-```
+#### User-level rules
+
+Personal rules in `~/.claude/rules/` apply to every project on your machine. Use them for preferences that aren&#39;t project-specific:
+
+```text  theme={null}
 ~/.claude/rules/
 ├── preferences.md    # Your personal coding preferences
 └── workflows.md      # Your preferred workflows
@@ -289,27 +211,131 @@
 
 User-level rules are loaded before project rules, giving project rules higher priority.
 
-&lt;Tip&gt;
-  Best practices for `.claude/rules/`:
-
-  * **Keep rules focused**: Each file should cover one topic (e.g., `testing.md`, `api-design.md`)
-  * **Use descriptive filenames**: The filename should indicate what the rules cover
-  * **Use conditional rules sparingly**: Only add `paths` frontmatter when rules truly apply to specific file types
-  * **Organize with subdirectories**: Group related rules (e.g., `frontend/`, `backend/`)
-&lt;/Tip&gt;
-
-## Organization-level memory management
-
-Organizations can deploy centrally managed CLAUDE.md files that apply to all users.
-
-To set up organization-level memory management:
-
-1. Create the managed memory file at the **Managed policy** location shown in the [memory types table above](#determine-memory-type).
-
-2. Deploy via your configuration management system (MDM, Group Policy, Ansible, etc.) to ensure consistent distribution across all developer machines.
-
-## Memory best practices
-
-* **Be specific**: &#34;Use 2-space indentation&#34; is better than &#34;Format code properly&#34;.
-* **Use structure to organize**: Format each individual memory as a bullet point and group related memories under descriptive markdown headings.
-* **Review periodically**: Update memories as your project evolves to ensure Claude is always using the most up to date information and context.
+### Manage CLAUDE.md for large teams
+
+For organizations deploying Claude Code across teams, you can centralize instructions and control which CLAUDE.md files are loaded.
+
+#### Deploy organization-wide CLAUDE.md
+
+Organizations can deploy a centrally managed CLAUDE.md that applies to all users on a machine. This file cannot be excluded by individual settings.
+
+&lt;Steps&gt;
+  &lt;Step title=&#34;Create the file at the managed policy location&#34;&gt;
+    * macOS: `/Library/Application Support/ClaudeCode/CLAUDE.md`
+    * Linux and WSL: `/etc/claude-code/CLAUDE.md`
+    * Windows: `C:\Program Files\ClaudeCode\CLAUDE.md`
+  &lt;/Step&gt;
+
+  &lt;Step title=&#34;Deploy with your configuration management system&#34;&gt;
+    Use MDM, Group Policy, Ansible, or similar tools to distribute the file across developer machines. See [managed settings](/en/permissions#managed-settings) for other organization-wide configuration options.
+  &lt;/Step&gt;
+&lt;/Steps&gt;
+
+#### Exclude specific CLAUDE.md files
+
+In large monorepos, ancestor CLAUDE.md files may contain instructions that aren&#39;t relevant to your work. The `claudeMdExcludes` setting lets you skip specific files by path or glob pattern.
+
+This example excludes a top-level CLAUDE.md and a rules directory from a parent folder. Add it to `.claude/settings.local.json` so the exclusion stays local to your machine:
+
+```json  theme={null}
+{
+  &#34;claudeMdExcludes&#34;: [
+    &#34;**/monorepo/CLAUDE.md&#34;,
+    &#34;/home/user/monorepo/other-team/.claude/rules/**&#34;
+  ]
+}
+```
+
+Patterns are matched against absolute file paths using glob syntax. You can configure `claudeMdExcludes` at any [settings layer](/en/settings#settings-files): user, project, local, or managed policy. Arrays merge across layers.
+
+Managed policy CLAUDE.md files cannot be excluded. This ensures organization-wide instructions always apply regardless of individual settings.
+
+## Auto memory
+
+Auto memory lets Claude accumulate knowledge across sessions without you writing anything. Claude saves notes for itself as it works: build commands, debugging insights, architecture notes, code style preferences, and workflow habits. Claude doesn&#39;t save something every session. It decides what&#39;s worth remembering based on whether the information would be useful in a future conversation.
+
+### Enable or disable auto memory
+
+Auto memory is on by default. To toggle it, open `/memory` in a session and use the auto memory toggle, or set `autoMemoryEnabled` in your project settings:
+
+```json  theme={null}
+{
+  &#34;autoMemoryEnabled&#34;: false
+}
+```
+
+To disable auto memory via environment variable, set `CLAUDE_CODE_DISABLE_AUTO_MEMORY=1`.
+
+### Storage location
+
+Each project gets its own memory directory at `~/.claude/projects/&lt;project&gt;/memory/`. The `&lt;project&gt;` path is derived from the git repository, so all worktrees and subdirectories within the same repo share one auto memory directory. Outside a git repo, the project root is used instead.
+
+The directory contains a `MEMORY.md` entrypoint and optional topic files:
+
+```text  theme={null}
+~/.claude/projects/&lt;project&gt;/memory/
+├── MEMORY.md          # Concise index, loaded into every session
+├── debugging.md       # Detailed notes on debugging patterns
+├── api-conventions.md # API design decisions
+└── ...                # Any other topic files Claude creates
+```
+
+`MEMORY.md` acts as an index of the memory directory. Claude reads and writes files in this directory throughout your session, using `MEMORY.md` to keep track of what&#39;s stored where.
+
+Auto memory is machine-local and per-worktree. Files are not shared across machines, cloud environments, or worktrees.
+
+### How it works
+
+The first 200 lines of `MEMORY.md` are loaded at the start of every conversation. Content beyond line 200 is not loaded at session start. Claude keeps `MEMORY.md` concise by moving detailed notes into separate topic files.
+
+This 200-line limit applies only to `MEMORY.md`. CLAUDE.md files are loaded in full regardless of length, though shorter files produce better adherence.
+
+Topic files like `debugging.md` or `patterns.md` are not loaded at startup. Claude reads them on demand using its standard file tools when it needs the information.
+
+Claude reads and writes memory files during your session. When you see &#34;Writing memory&#34; or &#34;Recalled memory&#34; in the Claude Code interface, Claude is actively updating or reading from `~/.claude/projects/&lt;project&gt;/memory/`.
+
+### Audit and edit your memory
+
+Auto memory files are plain markdown you can edit or delete at any time. Run [`/memory`](#view-and-edit-with-memory) to browse and open memory files from within a session.
+
+## View and edit with `/memory`
+
+The `/memory` command lists all CLAUDE.md and rules files loaded in your current session, lets you toggle auto memory on or off, and provides a link to open the auto memory folder. Select any file to open it in your editor.
+
+When you ask Claude to remember something, like &#34;always use pnpm, not npm&#34; or &#34;remember that the API tests require a local Redis instance,&#34; Claude saves it to auto memory. To add instructions to CLAUDE.md instead, ask Claude directly, like &#34;add this to CLAUDE.md,&#34; or edit the file yourself via `/memory`.
+
+## Troubleshoot memory issues
+
+These are the most common issues with CLAUDE.md and auto memory, along with steps to debug them.
+
+### Claude isn&#39;t following my CLAUDE.md
+
+CLAUDE.md is context, not enforcement. Claude reads it and tries to follow it, but there&#39;s no guarantee of strict compliance, especially for vague or conflicting instructions.
+
+To debug:
+
+* Run `/memory` to verify your CLAUDE.md files are being loaded. If a file isn&#39;t listed, Claude can&#39;t see it.
+* Check that the relevant CLAUDE.md is in a location that gets loaded for your session (see [Choose where to put CLAUDE.md files](#choose-where-to-put-claudemd-files)).
+* Make instructions more specific. &#34;Use 2-space indentation&#34; works better than &#34;format code nicely.&#34;
+* Look for conflicting instructions across CLAUDE.md files. If two files give different guidance for the same behavior, Claude may pick one arbitrarily.
+
+### I don&#39;t know what auto memory saved
+
+Run `/memory` and select the auto memory folder to browse what Claude has saved. Everything is plain markdown you can read, edit, or delete.
+
+### My CLAUDE.md is too large
+
+Files over 200 lines consume more context and may reduce adherence. Move detailed content into separate files referenced with `@path` imports (see [Import additional files](#import-additional-files)), or split your instructions across `.claude/rules/` files.
+
+### Instructions seem lost after `/compact`
+
+CLAUDE.md fully survives compaction. After `/compact`, Claude re-reads your CLAUDE.md from disk and re-injects it fresh into the session. If an instruction disappeared after compaction, it was given only in conversation, not written to CLAUDE.md. Add it to CLAUDE.md to make it persist across sessions.
+
+See [Write effective instructions](#write-effective-instructions) for guidance on size, structure, and specificity.
+
+## Related resources
+
+* [Skills](/en/skills): package repeatable workflows that load on demand
+* [Settings](/en/settings): configure Claude Code behavior with settings files
+* [Manage sessions](/en/sessions): manage context, resume conversations, and run parallel sessions
+* [Subagent memory](/en/sub-agents#enable-persistent-memory): let subagents maintain their own auto memory
</code></pre>
    </div>
</body>
</html>