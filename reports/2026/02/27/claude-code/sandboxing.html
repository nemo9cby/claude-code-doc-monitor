<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sandboxing - Diff Report</title>
    <link rel="stylesheet" href="../../css/diff.css">
    <style>
        :root {
            --bg-color: #1a1a2e;
            --card-bg: #16213e;
            --text-color: #eee;
            --accent: #0f3460;
            --add-bg: #1a4d1a;
            --del-bg: #4d1a1a;
            --add-text: #4ade80;
            --del-text: #f87171;
        }
        @media (prefers-color-scheme: light) {
            :root {
                --bg-color: #f5f5f5;
                --card-bg: #fff;
                --text-color: #333;
                --accent: #e0e0e0;
                --add-bg: #d4edda;
                --del-bg: #f8d7da;
                --add-text: #155724;
                --del-text: #721c24;
            }
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 2rem;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { margin-bottom: 2rem; }
        h1 { font-size: 1.5rem; margin-bottom: 0.5rem; }
        .meta { color: #888; font-size: 0.9rem; }
        .summary {
            background: var(--card-bg);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            display: flex;
            gap: 2rem;
        }
        .stat { display: flex; align-items: center; gap: 0.5rem; }
        .stat.added { color: var(--add-text); }
        .stat.removed { color: var(--del-text); }
        .analysis {
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid #8b5cf6;
        }
        .analysis-header {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #8b5cf6;
        }
        .analysis-content {
            white-space: pre-wrap;
            font-size: 0.95rem;
            line-height: 1.7;
        }
        .diff-container {
            background: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
        }
        .diff-header {
            background: var(--accent);
            padding: 0.75rem 1rem;
            font-weight: 600;
        }
        .diff-content {
            padding: 1rem;
            overflow-x: auto;
        }
        .diff-content ins {
            background: var(--add-bg);
            color: var(--add-text);
            text-decoration: none;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        .diff-content del {
            background: var(--del-bg);
            color: var(--del-text);
            text-decoration: line-through;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        pre {
            background: var(--accent);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.85rem;
            margin-top: 2rem;
        }
        a { color: #60a5fa; }
        .back-link { margin-bottom: 1rem; display: inline-block; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">&larr; Back to daily report</a>

        <header>
            <h1>sandboxing.md</h1>
            <p class="meta">Changed on 2026-02-27 17:18:22 EST</p>
        </header>

        <div class="summary">
            <div class="stat added">
                <span>+20</span> lines added
            </div>
            <div class="stat removed">
                <span>-1</span> lines removed
            </div>
        </div>

        

        <div class="diff-container">
            <div class="diff-header">Visual Diff</div>
            <div class="diff-content"><span>&gt; ## Documentation Index&para;<br>&gt; Fetch the complete documentation index at: https://code.claude.com/docs/llms.txt&para;<br>&gt; Use this file to discover all available pages before exploring further.&para;<br>&para;<br># Sandboxing&para;<br>&para;<br>&gt; Learn how Claude Code's sandboxed bash tool provides filesystem and network isolation for safer, more autonomous agent execution.&para;<br>&para;<br>## Overview&para;<br>&para;<br>Claude Code features native sandboxing to provide a more secure environment for agent execution while reducing the need for constant permission prompts. Instead of asking permission for each bash command, sandboxing creates defined boundaries upfront where Claude Code can work more freely with reduced risk.&para;<br>&para;<br>The sandboxed bash tool uses OS-level primitives to enforce both filesystem and network isolation.&para;<br>&para;<br>## Why sandboxing matters&para;<br>&para;<br>Traditional permission-based security requires constant user approval for bash commands. While this provides control, it can lead to:&para;<br>&para;<br>* **Approval fatigue**: Repeatedly clicking "approve" can cause users to pay less attention to what they're approving&para;<br>* **Reduced productivity**: Constant interruptions slow down development workflows&para;<br>* **Limited autonomy**: Claude Code cannot work as efficiently when waiting for approvals&para;<br>&para;<br>Sandboxing addresses these challenges by:&para;<br>&para;<br>1. **Defining clear boundaries**: Specify exactly which directories and network hosts Claude Code can access&para;<br>2. **Reducing permission prompts**: Safe commands within the sandbox don't require approval&para;<br>3. **Maintaining security**: Attempts to access resources outside the sandbox trigger immediate notifications&para;<br>4. **Enabling autonomy**: Claude Code can run more independently within defined limits&para;<br>&para;<br>&lt;Warning&gt;&para;<br>  Effective sandboxing requires **both** filesystem and network isolation. Without network isolation, a compromised agent could exfiltrate sensitive files like SSH keys. Without filesystem isolation, a compromised agent could backdoor system resources to gain network access. When configuring sandboxing it is important to ensure that your configured settings do not create bypasses in these systems.&para;<br>&lt;/Warning&gt;&para;<br>&para;<br>## How it works&para;<br>&para;<br>### Filesystem isolation&para;<br>&para;<br>The sandboxed bash tool restricts file system access to specific directories:&para;<br>&para;<br>* **Default writes behavior**: Read and write access to the current working directory and its subdirectories&para;<br>* **Default read behavior**: Read access to the entire computer, except certain denied directories&para;<br>* **Blocked access**: Cannot modify files outside the current working directory without explicit permission&para;<br>* **Configurable**: Define custom allowed and denied paths through settings&para;<br>&para;<br></span><ins style="background:#e6ffe6;">You can grant write access to additional paths using `sandbox.filesystem.allowWrite` in your settings. These restrictions are enforced at the OS level (Seatbelt on macOS, bubblewrap on Linux), so they apply to all subprocess commands, including tools like `kubectl`, `terraform`, and `npm`, not just Claude's file tools.&para;<br>&para;<br></ins><span>### Network isolation&para;<br>&para;<br>Network access is controlled through a proxy server running outside the sandbox:&para;<br>&para;<br>* **Domain restrictions**: Only approved domains can be accessed&para;<br>* **User confirmation**: New domain requests trigger permission prompts&para;<br>* **Custom proxy support**: Advanced users can implement custom rules on outgoing traffic&para;<br>* **Comprehensive coverage**: Restrictions apply to all scripts, programs, and subprocesses spawned by commands&para;<br>&para;<br>### OS-level enforcement&para;<br>&para;<br>The sandboxed bash tool leverages operating system security primitives:&para;<br>&para;<br>* **macOS**: Uses Seatbelt for sandbox enforcement&para;<br>* **Linux**: Uses [bubblewrap](https://github.com/containers/bubblewrap) for isolation&para;<br>* **WSL2**: Uses bubblewrap, same as Linux&para;<br>&para;<br>WSL1 is not supported because bubblewrap requires kernel features only available in WSL2.&para;<br>&para;<br>These OS-level restrictions ensure that all child processes spawned by Claude Code's commands inherit the same security boundaries.&para;<br>&para;<br>## Getting started&para;<br>&para;<br>### Prerequisites&para;<br>&para;<br>On **macOS**, sandboxing works out of the box using the built-in Seatbelt framework.&para;<br>&para;<br>On **Linux and WSL2**, install the required packages first:&para;<br>&para;<br>&lt;Tabs&gt;&para;<br>  &lt;Tab title="Ubuntu/Debian"&gt;&para;<br>    ```bash  theme={null}&para;<br>    sudo apt-get install bubblewrap socat&para;<br>    ```&para;<br>  &lt;/Tab&gt;&para;<br>&para;<br>  &lt;Tab title="Fedora"&gt;&para;<br>    ```bash  theme={null}&para;<br>    sudo dnf install bubblewrap socat&para;<br>    ```&para;<br>  &lt;/Tab&gt;&para;<br>&lt;/Tabs&gt;&para;<br>&para;<br>### Enable sandboxing&para;<br>&para;<br>You can enable sandboxing by running the `/sandbox` command:&para;<br>&para;<br>```text  theme={null}&para;<br>&gt; /sandbox&para;<br>```&para;<br>&para;<br>This opens a menu where you can choose between sandbox modes. If required dependencies are missing (such as `bubblewrap` or `socat` on Linux), the menu displays installation instructions for your platform.&para;<br>&para;<br>### Sandbox modes&para;<br>&para;<br>Claude Code offers two sandbox modes:&para;<br>&para;<br>**Auto-allow mode**: Bash commands will attempt to run inside the sandbox and are automatically allowed without requiring permission. Commands that cannot be sandboxed (such as those needing network access to non-allowed hosts) fall back to the regular permission flow. Explicit ask/deny rules you've configured are always respected.&para;<br>&para;<br>**Regular permissions mode**: All bash commands go through the standard permission flow, even when sandboxed. This provides more control but requires more approvals.&para;<br>&para;<br>In both modes, the sandbox enforces the same filesystem and network restrictions. The difference is only in whether sandboxed commands are auto-approved or require explicit permission.&para;<br>&para;<br>&lt;Info&gt;&para;<br>  Auto-allow mode works independently of your permission mode setting. Even if you're not in "accept edits" mode, sandboxed bash commands will run automatically when auto-allow is enabled. This means bash commands that modify files within the sandbox boundaries will execute without prompting, even when file edit tools would normally require approval.&para;<br>&lt;/Info&gt;&para;<br>&para;<br>### Configure sandboxing&para;<br>&para;<br>Customize sandbox behavior through your `settings.json` file. See [Settings](/en/settings#sandbox-settings) for complete configuration reference.&para;<br>&para;<br></span><ins style="background:#e6ffe6;">#### Granting subprocess write access to specific paths&para;<br>&para;<br>By default, sandboxed commands can only write to the current working directory. If subprocess commands like `kubectl`, `terraform`, or `npm` need to write outside the project directory, use `sandbox.filesystem.allowWrite` to grant access to specific paths:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "sandbox": {&para;<br>    "enabled": true,&para;<br>    "filesystem": {&para;<br>      "allowWrite": ["~/.kube", "//tmp/build"]&para;<br>    }&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>These paths are enforced at the OS level, so all commands running inside the sandbox, including their child processes, respect them. This is the recommended approach when a tool needs write access to a specific location, rather than excluding the tool from the sandbox entirely with `excludedCommands`.&para;<br>&para;<br>When `allowWrite` (or `denyWrite`/`denyRead`) is defined in multiple [settings scopes](/en/settings#settings-precedence), the arrays are **merged**, meaning paths from every scope are combined, not replaced. For example, if managed settings allow writes to `//opt/company-tools` and a user adds `~/.kube` in their personal settings, both paths are included in the final sandbox configuration. This means users and projects can extend the list without duplicating or overriding paths set by higher-priority scopes.&para;<br>&para;<br>Path prefixes control how paths are resolved:&para;<br>&para;<br>| Prefix            | Meaning                                     | Example                                |&para;<br>| :---------------- | :------------------------------------------ | :------------------------------------- |&para;<br>| `//`              | Absolute path from filesystem root          | `//tmp/build` becomes `/tmp/build`     |&para;<br>| `~/`              | Relative to home directory                  | `~/.kube` becomes `$HOME/.kube`        |&para;<br>| `/`               | Relative to the settings file's directory   | `/build` becomes `$SETTINGS_DIR/build` |&para;<br>| `./` or no prefix | Relative path (resolved by sandbox runtime) | `./output`                             |&para;<br>&para;<br>You can also deny write or read access using `sandbox.filesystem.denyWrite` and `sandbox.filesystem.denyRead`. These are merged with any paths from `Edit(...)` and `Read(...)` permission rules.&para;<br>&para;<br></ins><span>&lt;Tip&gt;&para;<br>  Not all commands are compatible with sandboxing out of the box. Some notes that may help you make the most out of the sandbox:&para;<br>&para;<br>  * Many CLI tools require accessing certain hosts. As you use these tools, they will request permission to access certain hosts. Granting permission will allow them to access these hosts now and in the future, enabling them to safely execute inside the sandbox.&para;<br>  * `watchman` is incompatible with running in the sandbox. If you're running `jest`, consider using `jest --no-watchman`&para;<br>  * `docker` is incompatible with running in the sandbox. Consider specifying `docker` in `excludedCommands` to force it to run outside of the sandbox.&para;<br>&lt;/Tip&gt;&para;<br>&para;<br>&lt;Note&gt;&para;<br>  Claude Code includes an intentional escape hatch mechanism that allows commands to run outside the sandbox when necessary. When a command fails due to sandbox restrictions (such as network connectivity issues or incompatible tools), Claude is prompted to analyze the failure and may retry the command with the `dangerouslyDisableSandbox` parameter. Commands that use this parameter go through the normal Claude Code permissions flow requiring user permission to execute. This allows Claude Code to handle edge cases where certain tools or network operations cannot function within sandbox constraints.&para;<br>&para;<br>  You can disable this escape hatch by setting `"allowUnsandboxedCommands": false` in your [sandbox settings](/en/settings#sandbox-settings). When disabled, the `dangerouslyDisableSandbox` parameter is completely ignored and all commands must run sandboxed or be explicitly listed in `excludedCommands`.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>## Security benefits&para;<br>&para;<br>### Protection against prompt injection&para;<br>&para;<br>Even if an attacker successfully manipulates Claude Code's behavior through prompt injection, the sandbox ensures your system remains secure:&para;<br>&para;<br>**Filesystem protection:**&para;<br>&para;<br>* Cannot modify critical config files such as `~/.bashrc`&para;<br>* Cannot modify system-level files in `/bin/`&para;<br>* Cannot read files that are denied in your [Claude permission settings](/en/permissions#manage-permissions)&para;<br>&para;<br>**Network protection:**&para;<br>&para;<br>* Cannot exfiltrate data to attacker-controlled servers&para;<br>* Cannot download malicious scripts from unauthorized domains&para;<br>* Cannot make unexpected API calls to unapproved services&para;<br>* Cannot contact any domains not explicitly allowed&para;<br>&para;<br>**Monitoring and control:**&para;<br>&para;<br>* All access attempts outside the sandbox are blocked at the OS level&para;<br>* You receive immediate notifications when boundaries are tested&para;<br>* You can choose to deny, allow once, or permanently update your configuration&para;<br>&para;<br>### Reduced attack surface&para;<br>&para;<br>Sandboxing limits the potential damage from:&para;<br>&para;<br>* **Malicious dependencies**: NPM packages or other dependencies with harmful code&para;<br>* **Compromised scripts**: Build scripts or tools with security vulnerabilities&para;<br>* **Social engineering**: Attacks that trick users into running dangerous commands&para;<br>* **Prompt injection**: Attacks that trick Claude into running dangerous commands&para;<br>&para;<br>### Transparent operation&para;<br>&para;<br>When Claude Code attempts to access network resources outside the sandbox:&para;<br>&para;<br>1. The operation is blocked at the OS level&para;<br>2. You receive an immediate notification&para;<br>3. You can choose to:&para;<br>   * Deny the request&para;<br>   * Allow it once&para;<br>   * Update your sandbox configuration to permanently allow it&para;<br>&para;<br>## Security Limitations&para;<br>&para;<br>* Network Sandboxing Limitations: The network filtering system operates by restricting the domains that processes are allowed to connect to. It does not otherwise inspect the traffic passing through the proxy and users are responsible for ensuring they only allow trusted domains in their policy.&para;<br>&para;<br>&lt;Warning&gt;&para;<br>  Users should be aware of potential risks that come from allowing broad domains like `github.com` that may allow for data exfiltration. Also, in some cases it may be possible to bypass the network filtering through [domain fronting](https://en.wikipedia.org/wiki/Domain_fronting).&para;<br>&lt;/Warning&gt;&para;<br>&para;<br>* Privilege Escalation via Unix Sockets: The `allowUnixSockets` configuration can inadvertently grant access to powerful system services that could lead to sandbox bypasses. For example, if it is used to allow access to `/var/run/docker.sock` this would effectively grant access to the host system through exploiting the docker socket. Users are encouraged to carefully consider any unix sockets that they allow through the sandbox.&para;<br>* Filesystem Permission Escalation: Overly broad filesystem write permissions can enable privilege escalation attacks. Allowing writes to directories containing executables in `$PATH`, system configuration directories, or user shell configuration files (`.bashrc`, `.zshrc`) can lead to code execution in different security contexts when other users or system processes access these files.&para;<br>* Linux Sandbox Strength: The Linux implementation provides strong filesystem and network isolation but includes an `enableWeakerNestedSandbox` mode that enables it to work inside of Docker environments without privileged namespaces. This option considerably weakens security and should only be used in cases where additional isolation is otherwise enforced.&para;<br>&para;<br>## How sandboxing relates to permissions&para;<br>&para;<br>Sandboxing and [permissions](/en/permissions) are complementary security layers that work together:&para;<br>&para;<br>* **Permissions** control which tools Claude Code can use and are evaluated before any tool runs. They apply to all tools: Bash, Read, Edit, WebFetch, MCP, and others.&para;<br>* **Sandboxing** provides OS-level enforcement that restricts what Bash commands can access at the filesystem and network level. It applies only to Bash commands and their child processes.&para;<br>&para;<br>Filesystem and network restrictions are configured through </span><del style="background:#ffe6e6;">permission rules, not sandbox settings:&para;<br></del><ins style="background:#e6ffe6;">both sandbox settings and permission rules:&para;<br>&para;<br>* Use `sandbox.filesystem.allowWrite` to grant subprocess write access to paths outside the working directory&para;<br>* Use `sandbox.filesystem.denyWrite` and `sandbox.filesystem.denyRead` to block subprocess access to specific paths</ins><span>&para;<br>* Use `Read` and `Edit` deny rules to block access to specific files or directories&para;<br>* Use `WebFetch` allow/deny rules to control domain access&para;<br>* Use sandbox `allowedDomains` to control which domains Bash commands can reach&para;<br>&para;<br></span><ins style="background:#e6ffe6;">Paths from both `sandbox.filesystem` settings and permission rules are merged together into the final sandbox configuration.&para;<br>&para;<br></ins><span>This [repository](https://github.com/anthropics/claude-code/tree/main/examples/settings) includes starter settings configurations for common deployment scenarios, including sandbox-specific examples. Use these as starting points and adjust them to fit your needs.&para;<br>&para;<br>## Advanced usage&para;<br>&para;<br>### Custom proxy configuration&para;<br>&para;<br>For organizations requiring advanced network security, you can implement a custom proxy to:&para;<br>&para;<br>* Decrypt and inspect HTTPS traffic&para;<br>* Apply custom filtering rules&para;<br>* Log all network requests&para;<br>* Integrate with existing security infrastructure&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "sandbox": {&para;<br>    "network": {&para;<br>      "httpProxyPort": 8080,&para;<br>      "socksProxyPort": 8081&para;<br>    }&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>### Integration with existing security tools&para;<br>&para;<br>The sandboxed bash tool works alongside:&para;<br>&para;<br>* **Permission rules**: Combine with [permission settings](/en/permissions) for defense-in-depth&para;<br>* **Development containers**: Use with [devcontainers](/en/devcontainer) for additional isolation&para;<br>* **Enterprise policies**: Enforce sandbox configurations through [managed settings](/en/settings#settings-precedence)&para;<br>&para;<br>## Best practices&para;<br>&para;<br>1. **Start restrictive**: Begin with minimal permissions and expand as needed&para;<br>2. **Monitor logs**: Review sandbox violation attempts to understand Claude Code's needs&para;<br>3. **Use environment-specific configs**: Different sandbox rules for development vs. production contexts&para;<br>4. **Combine with permissions**: Use sandboxing alongside IAM policies for comprehensive security&para;<br>5. **Test configurations**: Verify your sandbox settings don't block legitimate workflows&para;<br>&para;<br>## Open source&para;<br>&para;<br>The sandbox runtime is available as an open source npm package for use in your own agent projects. This enables the broader AI agent community to build safer, more secure autonomous systems. This can also be used to sandbox other programs you may wish to run. For example, to sandbox an MCP server you could run:&para;<br>&para;<br>```bash  theme={null}&para;<br>npx @anthropic-ai/sandbox-runtime &lt;command-to-sandbox&gt;&para;<br>```&para;<br>&para;<br>For implementation details and source code, visit the [GitHub repository](https://github.com/anthropic-experimental/sandbox-runtime).&para;<br>&para;<br>## Limitations&para;<br>&para;<br>* **Performance overhead**: Minimal, but some filesystem operations may be slightly slower&para;<br>* **Compatibility**: Some tools that require specific system access patterns may need configuration adjustments, or may even need to be run outside of the sandbox&para;<br>* **Platform support**: Supports macOS, Linux, and WSL2. WSL1 is not supported. Native Windows support is planned.&para;<br>&para;<br>## See also&para;<br>&para;<br>* [Security](/en/security) - Comprehensive security features and best practices&para;<br>* [Permissions](/en/permissions) - Permission configuration and access control&para;<br>* [Settings](/en/settings) - Complete configuration reference&para;<br>* [CLI reference](/en/cli-reference) - Command-line options&para;<br></span></div>
        </div>

        <h2 style="margin-top: 2rem; margin-bottom: 1rem;">Unified Diff</h2>
        <pre><code>--- a/sandboxing.md
+++ b/sandboxing.md
@@ -41,6 +41,8 @@
 * **Default read behavior**: Read access to the entire computer, except certain denied directories
 * **Blocked access**: Cannot modify files outside the current working directory without explicit permission
 * **Configurable**: Define custom allowed and denied paths through settings
+
+You can grant write access to additional paths using `sandbox.filesystem.allowWrite` in your settings. These restrictions are enforced at the OS level (Seatbelt on macOS, bubblewrap on Linux), so they apply to all subprocess commands, including tools like `kubectl`, `terraform`, and `npm`, not just Claude&#39;s file tools.
 
 ### Network isolation
 
@@ -113,6 +115,36 @@
 
 Customize sandbox behavior through your `settings.json` file. See [Settings](/en/settings#sandbox-settings) for complete configuration reference.
 
+#### Granting subprocess write access to specific paths
+
+By default, sandboxed commands can only write to the current working directory. If subprocess commands like `kubectl`, `terraform`, or `npm` need to write outside the project directory, use `sandbox.filesystem.allowWrite` to grant access to specific paths:
+
+```json  theme={null}
+{
+  &#34;sandbox&#34;: {
+    &#34;enabled&#34;: true,
+    &#34;filesystem&#34;: {
+      &#34;allowWrite&#34;: [&#34;~/.kube&#34;, &#34;//tmp/build&#34;]
+    }
+  }
+}
+```
+
+These paths are enforced at the OS level, so all commands running inside the sandbox, including their child processes, respect them. This is the recommended approach when a tool needs write access to a specific location, rather than excluding the tool from the sandbox entirely with `excludedCommands`.
+
+When `allowWrite` (or `denyWrite`/`denyRead`) is defined in multiple [settings scopes](/en/settings#settings-precedence), the arrays are **merged**, meaning paths from every scope are combined, not replaced. For example, if managed settings allow writes to `//opt/company-tools` and a user adds `~/.kube` in their personal settings, both paths are included in the final sandbox configuration. This means users and projects can extend the list without duplicating or overriding paths set by higher-priority scopes.
+
+Path prefixes control how paths are resolved:
+
+| Prefix            | Meaning                                     | Example                                |
+| :---------------- | :------------------------------------------ | :------------------------------------- |
+| `//`              | Absolute path from filesystem root          | `//tmp/build` becomes `/tmp/build`     |
+| `~/`              | Relative to home directory                  | `~/.kube` becomes `$HOME/.kube`        |
+| `/`               | Relative to the settings file&#39;s directory   | `/build` becomes `$SETTINGS_DIR/build` |
+| `./` or no prefix | Relative path (resolved by sandbox runtime) | `./output`                             |
+
+You can also deny write or read access using `sandbox.filesystem.denyWrite` and `sandbox.filesystem.denyRead`. These are merged with any paths from `Edit(...)` and `Read(...)` permission rules.
+
 &lt;Tip&gt;
   Not all commands are compatible with sandboxing out of the box. Some notes that may help you make the most out of the sandbox:
 
@@ -191,11 +223,15 @@
 * **Permissions** control which tools Claude Code can use and are evaluated before any tool runs. They apply to all tools: Bash, Read, Edit, WebFetch, MCP, and others.
 * **Sandboxing** provides OS-level enforcement that restricts what Bash commands can access at the filesystem and network level. It applies only to Bash commands and their child processes.
 
-Filesystem and network restrictions are configured through permission rules, not sandbox settings:
-
+Filesystem and network restrictions are configured through both sandbox settings and permission rules:
+
+* Use `sandbox.filesystem.allowWrite` to grant subprocess write access to paths outside the working directory
+* Use `sandbox.filesystem.denyWrite` and `sandbox.filesystem.denyRead` to block subprocess access to specific paths
 * Use `Read` and `Edit` deny rules to block access to specific files or directories
 * Use `WebFetch` allow/deny rules to control domain access
 * Use sandbox `allowedDomains` to control which domains Bash commands can reach
+
+Paths from both `sandbox.filesystem` settings and permission rules are merged together into the final sandbox configuration.
 
 This [repository](https://github.com/anthropics/claude-code/tree/main/examples/settings) includes starter settings configurations for common deployment scenarios, including sandbox-specific examples. Use these as starting points and adjust them to fit your needs.
 
</code></pre>
    </div>
</body>
</html>