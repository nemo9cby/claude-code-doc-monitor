<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>build-with-claude/pdf-support - Diff Report</title>
    <link rel="stylesheet" href="../../css/diff.css">
    <style>
        :root {
            --bg-color: #1a1a2e;
            --card-bg: #16213e;
            --text-color: #eee;
            --accent: #0f3460;
            --add-bg: #1a4d1a;
            --del-bg: #4d1a1a;
            --add-text: #4ade80;
            --del-text: #f87171;
        }
        @media (prefers-color-scheme: light) {
            :root {
                --bg-color: #f5f5f5;
                --card-bg: #fff;
                --text-color: #333;
                --accent: #e0e0e0;
                --add-bg: #d4edda;
                --del-bg: #f8d7da;
                --add-text: #155724;
                --del-text: #721c24;
            }
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 2rem;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { margin-bottom: 2rem; }
        h1 { font-size: 1.5rem; margin-bottom: 0.5rem; }
        .meta { color: #888; font-size: 0.9rem; }
        .summary {
            background: var(--card-bg);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            display: flex;
            gap: 2rem;
        }
        .stat { display: flex; align-items: center; gap: 0.5rem; }
        .stat.added { color: var(--add-text); }
        .stat.removed { color: var(--del-text); }
        .analysis {
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid #8b5cf6;
        }
        .analysis-header {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #8b5cf6;
        }
        .analysis-content {
            white-space: pre-wrap;
            font-size: 0.95rem;
            line-height: 1.7;
        }
        .diff-container {
            background: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
        }
        .diff-header {
            background: var(--accent);
            padding: 0.75rem 1rem;
            font-weight: 600;
        }
        .diff-content {
            padding: 1rem;
            overflow-x: auto;
        }
        .diff-content ins {
            background: var(--add-bg);
            color: var(--add-text);
            text-decoration: none;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        .diff-content del {
            background: var(--del-bg);
            color: var(--del-text);
            text-decoration: line-through;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        pre {
            background: var(--accent);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.85rem;
            margin-top: 2rem;
        }
        a { color: #60a5fa; }
        .back-link { margin-bottom: 1rem; display: inline-block; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../../index.html" class="back-link">&larr; Back to daily report</a>

        <header>
            <h1>build-with-claude/pdf-support.md</h1>
            <p class="meta">Changed on 2026-02-11 10:56:44 EST</p>
        </header>

        <div class="summary">
            <div class="stat added">
                <span>+162</span> lines added
            </div>
            <div class="stat removed">
                <span>-168</span> lines removed
            </div>
        </div>

        

        <div class="diff-container">
            <div class="diff-header">Visual Diff</div>
            <div class="diff-content"><span># PDF support&para;<br>&para;<br>Process PDFs with Claude. Extract text, analyze charts, and understand visual content from your documents.&para;<br>&para;<br>---&para;<br>&para;<br>You can now ask Claude about any text, pictures, charts, and tables in PDFs you provide. Some sample use cases:&para;<br>- Analyzing financial reports and understanding charts/tables&para;<br>- Extracting key information from legal documents&para;<br>- Translation assistance for documents&para;<br>- Converting document information into structured formats&para;<br>&para;<br>## Before you begin&para;<br>&para;<br>### Check PDF requirements&para;<br>Claude works with any standard PDF. However, you should ensure your request size meets these requirements when using PDF support:&para;<br>&para;<br>| Requirement | Limit |&para;<br>|------------|--------|&para;<br>| Maximum request size | 32MB |&para;<br>| Maximum pages per request | 100 |&para;<br>| Format | Standard PDF (no passwords/encryption) |&para;<br>&para;<br>Please note that both limits are on the entire request payload, including any other content sent alongside PDFs.&para;<br>&para;<br>Since PDF support relies on Claude's vision capabilities, it is subject to the same [limitations and considerations](/docs/en/build-with-claude/vision#limitations) as other vision tasks.&para;<br>&para;<br>### Supported platforms and models&para;<br>&para;<br>PDF support is currently supported via direct API access and Google Vertex AI. All [active models](/docs/en/about-claude/models/overview) support PDF processing.&para;<br>&para;<br>PDF support is now available on Amazon Bedrock with the following considerations:&para;<br>&para;<br>### Amazon Bedrock PDF Support&para;<br>&para;<br>When using PDF support through Amazon Bedrock's Converse API, there are two distinct document processing modes:&para;<br>&para;<br>&lt;Note&gt;&para;<br>**Important**: To access Claude's full visual PDF understanding capabilities in the Converse API, you must enable citations. Without citations enabled, the API falls back to basic text extraction only. Learn more about [working with citations](/docs/en/build-with-claude/citations).&para;<br>&lt;/Note&gt;&para;<br>&para;<br>#### Document Processing Modes&para;<br>&para;<br>1. **Converse Document Chat** (Original mode - Text extraction only)&para;<br>   - Provides basic text extraction from PDFs&para;<br>   - Cannot analyze images, charts, or visual layouts within PDFs&para;<br>   - Uses approximately 1,000 tokens for a 3-page PDF&para;<br>   - Automatically used when citations are not enabled&para;<br>&para;<br>2. **Claude PDF Chat** (New mode - Full visual understanding)&para;<br>   - Provides complete visual analysis of PDFs&para;<br>   - Can understand and analyze charts, graphs, images, and visual layouts&para;<br>   - Processes each page as both text and image for comprehensive understanding&para;<br>   - Uses approximately 7,000 tokens for a 3-page PDF&para;<br>   - **Requires citations to be enabled** in the Converse API&para;<br>&para;<br>#### Key Limitations&para;<br>&para;<br>- **Converse API**: Visual PDF analysis requires citations to be enabled. There is currently no option to use visual analysis without citations (unlike the InvokeModel API).&para;<br>- **InvokeModel API**: Provides full control over PDF processing without forced citations.&para;<br>&para;<br>#### Common Issues&para;<br>&para;<br>If customers report that Claude isn't seeing images or charts in their PDFs when using the Converse API, they likely need to enable the citations flag. Without it, Converse falls back to basic text extraction only.&para;<br>&para;<br>&lt;Note&gt;&para;<br>This is a known constraint with the Converse API that we're working to address. For applications that require visual PDF analysis without citations, consider using the InvokeModel API instead.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>&lt;Note&gt;&para;<br>For non-PDF files like .csv, .xlsx, .docx, .md, or .txt files, see [Working with other file formats](/docs/en/build-with-claude/files#working-with-other-file-formats).&para;<br>&lt;/Note&gt;&para;<br>&para;<br>***&para;<br>&para;<br>## Process PDFs with Claude&para;<br>&para;<br>### Send your first PDF request&para;<br>Let's start with a simple example using the Messages API. You can provide PDFs to Claude in three ways:&para;<br>&para;<br>1. As a URL reference to a PDF hosted online&para;<br>2. As a base64-encoded PDF in `document` content blocks</span><del style="background:#ffe6e6;">  </del><span>&para;<br>3. By a `file_id` from the [Files API](/docs/en/build-with-claude/files)&para;<br>&para;<br>#### Option 1: URL-based PDF document&para;<br>&para;<br>The simplest approach is to reference a PDF directly from a URL:&para;<br>&para;<br>&lt;CodeGroup&gt;&para;<br>   ```bash Shell&para;<br>    curl https://api.anthropic.com/v1/messages \&para;<br>      -H "content-type: application/json" \&para;<br>      -H "x-api-key: $ANTHROPIC_API_KEY" \&para;<br>      -H "anthropic-version: 2023-06-01" \&para;<br>      -d '{&para;<br>        "model": "claude-opus-4-6",&para;<br>        "max_tokens": 1024,&para;<br>        "messages": [{&para;<br>            "role": "user",&para;<br>            "content": [{&para;<br>                "type": "document",&para;<br>                "source": {&para;<br>                    "type": "url",&para;<br>                    "url": "https://assets.anthropic.com/m/1cd9d098ac3e6467/original/Claude-3-Model-Card-October-Addendum.pdf"&para;<br>                }&para;<br>            },&para;<br>            {&para;<br>                "type": "text",&para;<br>                "text": "What are the key findings in this document?"&para;<br>            }]&para;<br>        }]&para;<br>    }'&para;<br>    ```&para;<br>    ```python Python&para;<br>    import anthropic&para;<br>&para;<br>    client = anthropic.Anthropic()&para;<br>    message = client.messages.create(&para;<br>        model="claude-opus-4-6",&para;<br>        max_tokens=1024,&para;<br>        messages=[&para;<br>            {&para;<br>                "role": "user",&para;<br>                "content": [&para;<br>                    {&para;<br>                        "type": "document",&para;<br>                        "source": {&para;<br>                            "type": "url",&para;<br>                            "url": "https://assets.anthropic.com/m/1cd9d098ac3e6467/original/Claude-3-Model-Card-October-Addendum.pdf"</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>                        }</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>                    },&para;<br>                    {</span><del style="background:#ffe6e6;">&para;<br>                        "type": "text",&para;<br>                       </del><ins style="background:#e6ffe6;">"type": "text",</ins><span> "text": "What are the key findings in this document?"</span><del style="background:#ffe6e6;">&para;<br>                    </del><span>}</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>                ]</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>            }&para;<br>        ],&para;<br>    )&para;<br>&para;<br>    print(message.content)&para;<br>    ```&para;<br>    ```typescript TypeScript&para;<br>    import Anthropic from </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>@anthropic-ai/sdk</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>;&para;<br>&para;<br>    const anthropic = new Anthropic();&para;<br></span><del style="background:#ffe6e6;">    </del><span>&para;<br>    async function main() {&para;<br>      const response = await anthropic.messages.create({&para;<br>        model: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>claude-opus-4-6</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>        max_tokens: 1024,&para;<br>        messages: [&para;<br>          {&para;<br>            role: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>user</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>            content: [&para;<br>              {&para;<br>                type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>document</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>                source: {&para;<br>                  type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>url</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>                  url: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>https://assets.anthropic.com/m/1cd9d098ac3e6467/original/Claude-3-Model-Card-October-Addendum.pdf</span><del style="background:#ffe6e6;">',</del><ins style="background:#e6ffe6;">"</ins><span>&para;<br>                }</span><del style="background:#ffe6e6;">,</del><span>&para;<br>              },&para;<br>              {&para;<br>                type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>text</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>                text: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>What are the key findings in this document?</span><del style="background:#ffe6e6;">',</del><ins style="background:#e6ffe6;">"</ins><span>&para;<br>              }</span><del style="background:#ffe6e6;">,</del><span>&para;<br>            ]</span><del style="background:#ffe6e6;">,</del><span>&para;<br>          }</span><del style="background:#ffe6e6;">,</del><span>&para;<br>        ]</span><del style="background:#ffe6e6;">,</del><span>&para;<br>      });&para;<br></span><del style="background:#ffe6e6;">      </del><span>&para;<br>      console.log(response);&para;<br>    }&para;<br></span><del style="background:#ffe6e6;">    </del><span>&para;<br>    main();&para;<br>    ```&para;<br>    ```java Java&para;<br></span><del style="background:#ffe6e6;">    import java.util.List;&para;<br>&para;<br></del><span>    import com.anthropic.client.AnthropicClient;&para;<br>    import com.anthropic.client.okhttp.AnthropicOkHttpClient;&para;<br></span><ins style="background:#e6ffe6;">    import com.anthropic.models.messages.*;&para;<br></ins><span>    import com.anthropic.models.messages.MessageCreateParams;&para;<br>    import </span><del style="background:#ffe6e6;">com.anthropic.models.messages.*</del><ins style="background:#e6ffe6;">java.util.List</ins><span>;&para;<br>&para;<br>    public class PdfExample {&para;<br></span><del style="background:#ffe6e6;">  </del><ins style="background:#e6ffe6;">&para;<br></ins><span>      public static void main(String[] args) {&para;<br>        </span><del style="background:#ffe6e6;"> </del><del style="background:#ffe6e6;">   </del><span>AnthropicClient client = AnthropicOkHttpClient.fromEnv();&para;<br>&para;<br>        </span><del style="background:#ffe6e6;">  </del><del style="background:#ffe6e6;">  </del><span>// Create document block with URL&para;<br></span><del style="background:#ffe6e6;">    </del><span>        DocumentBlockParam documentParam = DocumentBlockParam.builder()&para;<br></span><del style="background:#ffe6e6;">          </del><span>          .urlPdfSource(</span><ins style="background:#e6ffe6;">&para;<br>            </ins><span>"https://assets.anthropic.com/m/1cd9d098ac3e6467/original/Claude-3-Model-Card-October-Addendum.pdf"</span><del style="background:#ffe6e6;">)</del><span>&para;<br>          </span><ins style="background:#e6ffe6;">)&para;<br></ins><span>          .build();&para;<br>&para;<br>        </span><del style="background:#ffe6e6;">    </del><span>// Create a message with document and text content blocks&para;<br>        </span><del style="background:#ffe6e6;"> </del><del style="background:#ffe6e6;">   </del><span>MessageCreateParams params = MessageCreateParams.builder()&para;<br>          </span><del style="background:#ffe6e6;">  </del><del style="background:#ffe6e6;">        </del><span>.model(Model.CLAUDE_OPUS_4_6)&para;<br></span><del style="background:#ffe6e6;">          </del><span>          .maxTokens(1024)&para;<br>          </span><del style="background:#ffe6e6;">   </del><del style="background:#ffe6e6;">       </del><span>.addUserMessageOfBlockParams(&para;<br>            </span><del style="background:#ffe6e6;">                List.of(&para;<br>                      </del><ins style="background:#e6ffe6;">List.of(&para;<br></ins><span>              ContentBlockParam.ofDocument(documentParam),&para;<br></span><del style="background:#ffe6e6;">                      </del><span>              ContentBlockParam.ofText(&para;<br>                </span><del style="background:#ffe6e6;">                            TextBlockParam.builder()&para;<br>                                  </del><ins style="background:#e6ffe6;">TextBlockParam.builder()&para;<br></ins><span>                  .text("What are the key findings in this document?")&para;<br>                  </span><del style="background:#ffe6e6;">                                  .build()&para;<br>                                    )&para;<br>                </del><ins style="background:#e6ffe6;">.build()&para;<br>              )&para;<br></ins><span>            )&para;<br>          </span><del style="background:#ffe6e6;">         </del><del style="background:#ffe6e6;"> </del><span>)&para;<br></span><del style="background:#ffe6e6;">          </del><span>          .build();&para;<br>&para;<br>        </span><del style="background:#ffe6e6;">    </del><span>Message message = client.messages().create(params);&para;<br>        </span><del style="background:#ffe6e6;">    </del><span>System.out.println(message.content());&para;<br></span><del style="background:#ffe6e6;">  </del><span>      }&para;<br>    }&para;<br>    ```&para;<br>&lt;/CodeGroup&gt;&para;<br>&para;<br>#### Option 2: Base64-encoded PDF document&para;<br>&para;<br>If you need to send PDFs from your local system or when a URL isn't available:&para;<br>&para;<br>&lt;CodeGroup&gt;&para;<br>    ```bash Shell&para;<br>    # Method 1: Fetch and encode a remote PDF&para;<br>    curl -s "https://assets.anthropic.com/m/1cd9d098ac3e6467/original/Claude-3-Model-Card-October-Addendum.pdf" | base64 | tr -d '\n' &gt; pdf_base64.txt&para;<br>&para;<br>    # Method 2: Encode a local PDF file&para;<br>    # base64 document.pdf | tr -d '\n' &gt; pdf_base64.txt&para;<br>&para;<br>    # Create a JSON request file using the pdf_base64.txt content&para;<br>    jq -n --rawfile PDF_BASE64 pdf_base64.txt '{&para;<br>        "model": "claude-opus-4-6",&para;<br>        "max_tokens": 1024,&para;<br>        "messages": [{&para;<br>            "role": "user",&para;<br>            "content": [{&para;<br>                "type": "document",&para;<br>                "source": {&para;<br>                    "type": "base64",&para;<br>                    "media_type": "application/pdf",&para;<br>                    "data": $PDF_BASE64&para;<br>                }&para;<br>            },&para;<br>            {&para;<br>                "type": "text",&para;<br>                "text": "What are the key findings in this document?"&para;<br>            }]&para;<br>        }]&para;<br>    }' &gt; request.json&para;<br>&para;<br>    # Send the API request using the JSON file&para;<br>    curl https://api.anthropic.com/v1/messages \&para;<br>      -H "content-type: application/json" \&para;<br>      -H "x-api-key: $ANTHROPIC_API_KEY" \&para;<br>      -H "anthropic-version: 2023-06-01" \&para;<br>      -d @request.json&para;<br>    ```&para;<br>    ```python Python&para;<br>    import anthropic&para;<br>    import base64&para;<br>    import httpx&para;<br>&para;<br>    # First, load and encode the PDF</span><del style="background:#ffe6e6;"> </del><span>&para;<br>    pdf_url = "https://assets.anthropic.com/m/1cd9d098ac3e6467/original/Claude-3-Model-Card-October-Addendum.pdf"&para;<br>    pdf_data = base64.standard_b64encode(httpx.get(pdf_url).content).decode("utf-8")&para;<br>&para;<br>    # Alternative: Load from a local file&para;<br>    # with open("document.pdf", "rb") as f:&para;<br>    #     pdf_data = base64.standard_b64encode(f.read()).decode("utf-8")&para;<br>&para;<br>    # Send to Claude using base64 encoding&para;<br>    client = anthropic.Anthropic()&para;<br>    message = client.messages.create(&para;<br>        model="claude-opus-4-6",&para;<br>        max_tokens=1024,&para;<br>        messages=[&para;<br>            {&para;<br>                "role": "user",&para;<br>                "content": [&para;<br>                    {&para;<br>                        "type": "document",&para;<br>                        "source": {&para;<br>                            "type": "base64",&para;<br>                            "media_type": "application/pdf",&para;<br>                            "data": pdf_data</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>                        }</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>                    },&para;<br>                    {</span><del style="background:#ffe6e6;">&para;<br>                        "type": "text",&para;<br>                       </del><ins style="background:#e6ffe6;">"type": "text",</ins><span> "text": "What are the key findings in this document?"</span><del style="background:#ffe6e6;">&para;<br>                    </del><span>}</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>                ]</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>            }&para;<br>        ],&para;<br>    )&para;<br>&para;<br>    print(message.content)&para;<br>    ```&para;<br>    ```typescript TypeScript&para;<br>    import Anthropic from </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>@anthropic-ai/sdk</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>;&para;<br>    import fetch from </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>node-fetch</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>;&para;<br>    import fs from </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>fs</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>;&para;<br>&para;<br>    async function main() {&para;<br>      // Method 1: Fetch and encode a remote PDF&para;<br>      const pdfURL = "https://assets.anthropic.com/m/1cd9d098ac3e6467/original/Claude-3-Model-Card-October-Addendum.pdf";&para;<br>      const pdfResponse = await fetch(pdfURL);&para;<br>      const arrayBuffer = await pdfResponse.arrayBuffer();&para;<br>      const pdfBase64 = Buffer.from(arrayBuffer).toString(</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>base64</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>);&para;<br></span><del style="background:#ffe6e6;">      </del><span>&para;<br>      // Method 2: Load from a local file&para;<br>      // const pdfBase64 =</span><ins style="background:#e6ffe6;"> (await</ins><span> fs.readFile</span><del style="background:#ffe6e6;">Sync</del><span>('document.pdf')</span><ins style="background:#e6ffe6;">)</ins><span>.toString('base64');&para;<br></span><del style="background:#ffe6e6;">      </del><span>&para;<br>      // Send the API request with base64-encoded PDF&para;<br>      const anthropic = new Anthropic();&para;<br>      const response = await anthropic.messages.create({&para;<br>        model: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>claude-opus-4-6</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>        max_tokens: 1024,&para;<br>        messages: [&para;<br>          {&para;<br>            role: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>user</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>            content: [&para;<br>              {&para;<br>                type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>document</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>                source: {&para;<br>                  type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>base64</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>                  media_type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>application/pdf</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>                  data: pdfBase64</span><del style="background:#ffe6e6;">,</del><span>&para;<br>                }</span><del style="background:#ffe6e6;">,</del><span>&para;<br>              },&para;<br>              {&para;<br>                type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>text</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>                text: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>What are the key findings in this document?</span><del style="background:#ffe6e6;">',</del><ins style="background:#e6ffe6;">"</ins><span>&para;<br>              }</span><del style="background:#ffe6e6;">,</del><span>&para;<br>            ]</span><del style="background:#ffe6e6;">,</del><span>&para;<br>          }</span><del style="background:#ffe6e6;">,</del><span>&para;<br>        ]</span><del style="background:#ffe6e6;">,</del><span>&para;<br>      });&para;<br></span><del style="background:#ffe6e6;">      </del><span>&para;<br>      console.log(response);&para;<br>    }&para;<br></span><del style="background:#ffe6e6;">    </del><span>&para;<br>    main();&para;<br>    ```&para;<br>&para;<br>    ```java Java&para;<br></span><del style="background:#ffe6e6;">    import java.io.IOException;&para;<br>    import java.net.URI;&para;<br>    import java.net.http.HttpClient;&para;<br>    import java.net.http.HttpRequest;&para;<br>    import java.net.http.HttpResponse;&para;<br>    import java.util.Base64;&para;<br>    import java.util.List;&para;<br>&para;<br></del><span>    import com.anthropic.client.AnthropicClient;&para;<br>    import com.anthropic.client.okhttp.AnthropicOkHttpClient;&para;<br>    import com.anthropic.models.messages.ContentBlockParam;&para;<br>    import com.anthropic.models.messages.DocumentBlockParam;&para;<br>    import com.anthropic.models.messages.Message;&para;<br>    import com.anthropic.models.messages.MessageCreateParams;&para;<br>    import com.anthropic.models.messages.Model;&para;<br>    import com.anthropic.models.messages.TextBlockParam;</span><ins style="background:#e6ffe6;">&para;<br>    import java.io.IOException;&para;<br>    import java.net.URI;&para;<br>    import java.net.http.HttpClient;&para;<br>    import java.net.http.HttpRequest;&para;<br>    import java.net.http.HttpResponse;&para;<br>    import java.util.Base64;&para;<br>    import java.util.List;</ins><span>&para;<br>&para;<br>    public class PdfExample {&para;<br></span><del style="background:#ffe6e6;">  </del><ins style="background:#e6ffe6;">&para;<br></ins><span>      public static void main(String[] args) throws IOException, InterruptedException {&para;<br></span><del style="background:#ffe6e6;">    </del><span>        AnthropicClient client = AnthropicOkHttpClient.fromEnv();&para;<br>&para;<br>        </span><del style="background:#ffe6e6;">    </del><span>// Method 1: Download and encode a remote PDF&para;<br>        </span><del style="background:#ffe6e6;"> </del><del style="background:#ffe6e6;">   </del><span>String pdfUrl =</span><ins style="background:#e6ffe6;">&para;<br>         </ins><span> "https://assets.anthropic.com/m/1cd9d098ac3e6467/original/Claude-3-Model-Card-October-Addendum.pdf";&para;<br>        </span><del style="background:#ffe6e6;">    </del><span>HttpClient httpClient = HttpClient.newHttpClient();&para;<br>        </span><del style="background:#ffe6e6;">  </del><del style="background:#ffe6e6;">  </del><span>HttpRequest request = HttpRequest.newBuilder()</span><del style="background:#ffe6e6;">&para;<br>                    </del><span>.uri(URI.create(pdfUrl))</span><del style="background:#ffe6e6;">&para;<br>                    .GET()&para;<br>                    </del><ins style="background:#e6ffe6;">.GET()</ins><span>.build();&para;<br>&para;<br></span><del style="background:#ffe6e6;">    </del><span>        HttpResponse&lt;byte[]&gt; response = httpClient.send(</span><del style="background:#ffe6e6;">request,</del><ins style="background:#e6ffe6;">&para;<br>          request,&para;<br>         </ins><span> HttpResponse.BodyHandlers.ofByteArray()</span><del style="background:#ffe6e6;">);</del><span>&para;<br>       </span><ins style="background:#e6ffe6;"> );&para;<br></ins><span>     </span><ins style="background:#e6ffe6;">   </ins><span>String pdfBase64 = Base64.getEncoder().encodeToString(response.body());&para;<br>&para;<br>        </span><del style="background:#ffe6e6;">    </del><span>// Method 2: Load from a local file&para;<br>        </span><del style="background:#ffe6e6;">  </del><del style="background:#ffe6e6;">  </del><span>// byte[] fileBytes = Files.readAllBytes(Path.of("document.pdf"));&para;<br></span><del style="background:#ffe6e6;">    </del><span>        // String pdfBase64 = Base64.getEncoder().encodeToString(fileBytes);&para;<br>&para;<br></span><del style="background:#ffe6e6;">    </del><span>        // Create document block with base64 data&para;<br>        </span><del style="background:#ffe6e6;">    </del><span>DocumentBlockParam documentParam = DocumentBlockParam.builder()&para;<br>          </span><del style="background:#ffe6e6;">     </del><del style="background:#ffe6e6;">     </del><span>.base64PdfSource(pdfBase64)&para;<br></span><del style="background:#ffe6e6;">          </del><span>          .build();&para;<br>&para;<br></span><del style="background:#ffe6e6;">    </del><span>        // Create a message with document and text content blocks&para;<br>        </span><del style="background:#ffe6e6;">    </del><span>MessageCreateParams params = MessageCreateParams.builder()&para;<br></span><del style="background:#ffe6e6;">          </del><span>          .model(Model.CLAUDE_OPUS_4_6)&para;<br>          </span><del style="background:#ffe6e6;">     </del><del style="background:#ffe6e6;">     </del><span>.maxTokens(1024)&para;<br></span><del style="background:#ffe6e6;">          </del><span>          .addUserMessageOfBlockParams(&para;<br></span><del style="background:#ffe6e6;">                </del><span>            List.of(&para;<br></span><del style="background:#ffe6e6;">                      </del><span>              ContentBlockParam.ofDocument(documentParam),&para;<br></span><del style="background:#ffe6e6;">                      </del><span>              ContentBlockParam.ofText(</span><ins style="background:#e6ffe6;">&para;<br>                </ins><span>TextBlockParam.builder()</span><ins style="background:#e6ffe6;">&para;<br>                  </ins><span>.text("What are the key findings in this document?")</span><del style="background:#ffe6e6;">.build())</del><span>&para;<br>                  </span><del style="background:#ffe6e6;">  </del><ins style="background:#e6ffe6;">.build()&para;<br></ins><span>        </span><del style="background:#ffe6e6;">)&para;<br></del><span>      </span><del style="background:#ffe6e6;">  </del><ins style="background:#e6ffe6;">)&para;<br></ins><span>            )&para;<br>          </span><ins style="background:#e6ffe6;">)&para;<br></ins><span>          .build();&para;<br>&para;<br></span><del style="background:#ffe6e6;">    </del><span>        Message message = client.messages().create(params);&para;<br>        </span><del style="background:#ffe6e6;">    </del><span>message</span><ins style="background:#e6ffe6;">&para;<br>          </ins><span>.content()</span><del style="background:#ffe6e6;">.stream()</del><span>&para;<br>          </span><ins style="background:#e6ffe6;">.stream()&para;<br></ins><span>          .flatMap(contentBlock -&gt; contentBlock.text().stream())&para;<br></span><del style="background:#ffe6e6;">          </del><span>          .forEach(textBlock -&gt; System.out.println(textBlock.text()));&para;<br></span><del style="background:#ffe6e6;">  </del><span>      }&para;<br>    }&para;<br>    ```&para;<br>&para;<br>&lt;/CodeGroup&gt;&para;<br>&para;<br>#### Option 3: Files API&para;<br>&para;<br>For PDFs you'll use repeatedly, or when you want to avoid encoding overhead, use the [Files API](/docs/en/build-with-claude/files):</span><del style="background:#ffe6e6;"> </del><span>&para;<br>&para;<br>&lt;CodeGroup&gt;&para;<br>```bash Shell&para;<br># First, upload your PDF to the Files API&para;<br>curl -X POST https://api.anthropic.com/v1/files \&para;<br>  -H "x-api-key: $ANTHROPIC_API_KEY" \&para;<br>  -H "anthropic-version: 2023-06-01" \&para;<br>  -H "anthropic-beta: files-api-2025-04-14" \&para;<br>  -F "file=@document.pdf"&para;<br>&para;<br># Then use the returned file_id in your message&para;<br>curl https://api.anthropic.com/v1/messages \&para;<br>  -H "content-type: application/json" \&para;<br>  -H "x-api-key: $ANTHROPIC_API_KEY" \&para;<br>  -H "anthropic-version: 2023-06-01" \&para;<br>  -H "anthropic-beta: files-api-2025-04-14" \&para;<br>  -d '{&para;<br>    "model": "claude-opus-4-6",</span><del style="background:#ffe6e6;"> </del><span>&para;<br>    "max_tokens": 1024,&para;<br>    "messages": [{&para;<br>      "role": "user",&para;<br>      "content": [{&para;<br>        "type": "document",&para;<br>        "source": {&para;<br>          "type": "file",&para;<br>          "file_id": "file_abc123"&para;<br>        }&para;<br>      },&para;<br>      {&para;<br>        "type": "text",&para;<br>        "text": "What are the key findings in this document?"&para;<br>      }]&para;<br>    }]&para;<br>  }'&para;<br>```&para;<br>&para;<br>```python Python&para;<br>import anthropic&para;<br>&para;<br>client = anthropic.Anthropic()&para;<br>&para;<br># Upload the PDF file&para;<br>with open("document.pdf", "rb") as f:&para;<br>    file_upload = client.beta.files.upload(file=("document.pdf", f, "application/pdf"))&para;<br>&para;<br># Use the uploaded file in a message&para;<br>message = client.beta.messages.create(&para;<br>    model="claude-opus-4-6",&para;<br>    max_tokens=1024,&para;<br>    betas=["files-api-2025-04-14"],&para;<br>    messages=[&para;<br>        {&para;<br>            "role": "user",&para;<br>            "content": [&para;<br>                {&para;<br>                    "type": "document",&para;<br>                    "source": {</span><del style="background:#ffe6e6;">&para;<br>                        "type": "file",&para;<br>                       </del><ins style="background:#e6ffe6;">"type": "file",</ins><span> "file_id": file_upload.id</span><del style="background:#ffe6e6;">&para;<br>                    </del><span>}</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>                },&para;<br>                {</span><del style="background:#ffe6e6;">&para;<br>                    "type": "text",&para;<br>                   </del><ins style="background:#e6ffe6;">"type": "text",</ins><span> "text": "What are the key findings in this document?"</span><del style="background:#ffe6e6;">&para;<br>                </del><span>}</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>            ]</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>        }&para;<br>    ],&para;<br>)&para;<br>&para;<br>print(message.content)&para;<br>```&para;<br>&para;<br>```typescript TypeScript&para;<br>import { Anthropic, toFile } from </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>@anthropic-ai/sdk</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>;&para;<br>import fs from </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>fs</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>;&para;<br>&para;<br>const anthropic = new Anthropic();&para;<br>&para;<br>async function main() {&para;<br>  // Upload the PDF file&para;<br>  const fileUpload = await anthropic.beta.files.upload({&para;<br>    file: toFile(fs.createReadStream(</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>document.pdf</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>), undefined, { type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>application/pdf</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span> })&para;<br>  }, {&para;<br>    betas: [</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>files-api-2025-04-14</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>]&para;<br>  });&para;<br>&para;<br>  // Use the uploaded file in a message&para;<br>  const response = await anthropic.beta.messages.create({&para;<br>    model: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>claude-opus-4-6</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>    max_tokens: 1024,&para;<br>    betas: [</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>files-api-2025-04-14</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>],&para;<br>    messages: [&para;<br>      {&para;<br>        role: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>user</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>        content: [&para;<br>          {&para;<br>            type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>document</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>            source: {&para;<br>              type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>file</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>              file_id: fileUpload.id&para;<br>            }&para;<br>          },&para;<br>          {&para;<br>            type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>text</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>            text: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>What are the key findings in this document?</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>&para;<br>          }&para;<br>        ]&para;<br>      }&para;<br>    ]&para;<br>  });&para;<br>&para;<br>  console.log(response);&para;<br>}&para;<br>&para;<br>main();&para;<br>```&para;<br>&para;<br>```java Java&para;<br></span><del style="background:#ffe6e6;">import java.io.IOException;&para;<br>import java.nio.file.Files;&para;<br>import java.nio.file.Path;&para;<br>import java.util.List;&para;<br>&para;<br></del><span>import com.anthropic.client.AnthropicClient;&para;<br>import com.anthropic.client.okhttp.AnthropicOkHttpClient;&para;<br>import com.anthropic.models.File;&para;<br>import com.anthropic.models.files.FileUploadParams;&para;<br>import com.anthropic.models.messages.*;</span><ins style="background:#e6ffe6;">&para;<br>import java.io.IOException;&para;<br>import java.nio.file.Files;&para;<br>import java.nio.file.Path;&para;<br>import java.util.List;</ins><span>&para;<br>&para;<br>public class PdfFilesExample {&para;<br></span><del style="background:#ffe6e6;">  </del><ins style="background:#e6ffe6;">&para;<br></ins><span>  public static void main(String[] args) throws IOException {&para;<br>    </span><del style="background:#ffe6e6;">   </del><del style="background:#ffe6e6;"> </del><span>AnthropicClient client = AnthropicOkHttpClient.fromEnv();&para;<br>&para;<br></span><del style="background:#ffe6e6;">    </del><span>    // Upload the PDF file&para;<br></span><del style="background:#ffe6e6;">    </del><span>    File file = client</span><del style="background:#ffe6e6;">.beta()</del><ins style="background:#e6ffe6;">&para;<br>      .beta()&para;<br>      </ins><span>.files()</span><ins style="background:#e6ffe6;">&para;<br>      </ins><span>.upload(</span><ins style="background:#e6ffe6;">&para;<br>        </ins><span>FileUploadParams.builder()</span><del style="background:#ffe6e6;">&para;<br>                </del><span>.file(Files.newInputStream(Path.of("document.pdf")))</span><del style="background:#ffe6e6;">&para;<br>                .build());&para;<br>&para;<br>    </del><ins style="background:#e6ffe6;">.build()&para;<br>      );&para;<br>&para;<br></ins><span>    // Use the uploaded file in a message&para;<br>    </span><del style="background:#ffe6e6;">  </del><del style="background:#ffe6e6;">  </del><span>DocumentBlockParam documentParam = DocumentBlockParam.builder()&para;<br></span><del style="background:#ffe6e6;">          </del><span>      .fileSource(file.id())&para;<br></span><del style="background:#ffe6e6;">          </del><span>      .build();&para;<br>&para;<br></span><del style="background:#ffe6e6;">    </del><span>    MessageCreateParams params = MessageCreateParams.builder()&para;<br></span><del style="background:#ffe6e6;">          </del><span>      .model(Model.CLAUDE_OPUS_4_6)&para;<br></span><del style="background:#ffe6e6;">          </del><span>      .maxTokens(1024)&para;<br></span><del style="background:#ffe6e6;">          </del><span>      .addUserMessageOfBlockParams(&para;<br>        </span><del style="background:#ffe6e6;">                List.of(&para;<br>                      </del><ins style="background:#e6ffe6;">List.of(&para;<br></ins><span>          ContentBlockParam.ofDocument(documentParam),&para;<br></span><del style="background:#ffe6e6;">                      </del><span>          ContentBlockParam.ofText(&para;<br></span><del style="background:#ffe6e6;">                            </del><span>            TextBlockParam.builder()&para;<br></span><del style="background:#ffe6e6;">                                  </del><span>              .text("What are the key findings in this document?")&para;<br>              </span><del style="background:#ffe6e6;">                                  .build()&para;<br>                                )&para;<br>                        )&para;<br>                )&para;<br>          </del><ins style="background:#e6ffe6;">.build()&para;<br>          )&para;<br>        )&para;<br>      )&para;<br></ins><span>      .build();&para;<br>&para;<br>    </span><del style="background:#ffe6e6;"> </del><del style="background:#ffe6e6;">   </del><span>Message message = client.messages().create(params);&para;<br></span><del style="background:#ffe6e6;">    </del><span>    System.out.println(message.content());&para;<br></span><del style="background:#ffe6e6;">  </del><span>  }&para;<br>}&para;<br>```&para;<br>&lt;/CodeGroup&gt;&para;<br>&para;<br>### How PDF support works&para;<br>When you send a PDF to Claude, the following steps occur:&para;<br>&lt;Steps&gt;&para;<br>  &lt;Step title="The system extracts the contents of the document."&gt;&para;<br>    - The system converts each page of the document into an image.&para;<br>    - The text from each page is extracted and provided alongside each page's image.&para;<br>  &lt;/Step&gt;&para;<br>  &lt;Step title="Claude analyzes both the text and images to better understand the document."&gt;&para;<br>    - Documents are provided as a combination of text and images for analysis.&para;<br>    - This allows users to ask for insights on visual elements of a PDF, such as charts, diagrams, and other non-textual content.&para;<br>  &lt;/Step&gt;&para;<br>  &lt;Step title="Claude responds, referencing the PDF's contents if relevant."&gt;&para;<br>    Claude can reference both textual and visual content when it responds. You can further improve performance by integrating PDF support with:&para;<br>    - **Prompt caching**: To improve performance for repeated analysis.&para;<br>    - **Batch processing**: For high-volume document processing.&para;<br>    - **Tool use**: To extract specific information from documents for use as tool inputs.&para;<br>  &lt;/Step&gt;&para;<br>&lt;/Steps&gt;&para;<br>&para;<br>### Estimate your costs&para;<br>The token count of a PDF file depends on the total text extracted from the document as well as the number of pages:&para;<br>- Text token costs: Each page typically uses 1,500-3,000 tokens per page depending on content density. Standard API pricing applies with no additional PDF fees.&para;<br>- Image token costs: Since each page is converted into an image, the same [image-based cost calculations](/docs/en/build-with-claude/vision#evaluate-image-size) are applied.&para;<br>&para;<br>You can use [token counting](/docs/en/build-with-claude/token-counting) to estimate costs for your specific PDFs.&para;<br>&para;<br>***&para;<br>&para;<br>## Optimize PDF processing&para;<br>&para;<br>### Improve performance&para;<br>Follow these best practices for optimal results:&para;<br>- Place PDFs before text in your requests&para;<br>- Use standard fonts&para;<br>- Ensure text is clear and legible&para;<br>- Rotate pages to proper upright orientation&para;<br>- Use logical page numbers (from PDF viewer) in prompts&para;<br>- Split large PDFs into chunks when needed&para;<br>- Enable prompt caching for repeated analysis&para;<br>&para;<br>### Scale your implementation&para;<br>For high-volume processing, consider these approaches:&para;<br>&para;<br>#### Use prompt caching&para;<br>Cache PDFs to improve performance on repeated queries:&para;<br>&lt;CodeGroup&gt;&para;<br>```bash Shell&para;<br># Create a JSON request file using the pdf_base64.txt content&para;<br>jq -n --rawfile PDF_BASE64 pdf_base64.txt '{&para;<br>    "model": "claude-opus-4-6",&para;<br>    "max_tokens": 1024,&para;<br>    "messages": [{&para;<br>        "role": "user",&para;<br>        "content": [{&para;<br>            "type": "document",&para;<br>            "source": {&para;<br>                "type": "base64",&para;<br>                "media_type": "application/pdf",&para;<br>                "data": $PDF_BASE64&para;<br>            },&para;<br>            "cache_control": {&para;<br>              "type": "ephemeral"&para;<br>            }&para;<br>        },&para;<br>        {&para;<br>            "type": "text",&para;<br>            "text": "Which model has the highest human preference win rates across each use-case?"&para;<br>        }]&para;<br>    }]&para;<br>}' &gt; request.json&para;<br>&para;<br># Then make the API call using the JSON file&para;<br>curl https://api.anthropic.com/v1/messages \&para;<br>  -H "content-type: application/json" \&para;<br>  -H "x-api-key: $ANTHROPIC_API_KEY" \&para;<br>  -H "anthropic-version: 2023-06-01" \&para;<br>  -d @request.json&para;<br>```&para;<br>```python Python&para;<br>message = client.messages.create(&para;<br>    model="claude-opus-4-6",&para;<br>    max_tokens=1024,&para;<br>    messages=[&para;<br>        {&para;<br>            "role": "user",&para;<br>            "content": [&para;<br>                {&para;<br>                    "type": "document",&para;<br>                    "source": {&para;<br>                        "type": "base64",&para;<br>                        "media_type": "application/pdf",&para;<br>                        "data": pdf_data</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>                    },&para;<br>                    "cache_control": {"type": "ephemeral"}</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>                },&para;<br>                {</span><del style="background:#ffe6e6;">&para;<br>                    "type": "text",&para;<br>                   </del><ins style="background:#e6ffe6;">"type": "text",</ins><span> "text": "Analyze this document."</span><del style="background:#ffe6e6;">&para;<br>                </del><span>}</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>            ]</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>        }&para;<br>    ],&para;<br>)&para;<br>```&para;<br>&para;<br>```typescript TypeScript&para;<br>const response = await anthropic.messages.create({&para;<br>  model: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>claude-opus-4-6</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>  max_tokens: 1024,&para;<br>  messages: [&para;<br>    {&para;<br>      content: [&para;<br>        {&para;<br>          type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>document</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>          source: {&para;<br>            media_type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>application/pdf</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>            type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>base64</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>            data: pdfBase64</span><del style="background:#ffe6e6;">,</del><span>&para;<br>          },&para;<br>          cache_control: { type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>ephemeral</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span> }</span><del style="background:#ffe6e6;">,</del><span>&para;<br>        },&para;<br>        {&para;<br>          type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>text</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>          text: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>Which model has the highest human preference win rates across each use-case?</span><del style="background:#ffe6e6;">',</del><ins style="background:#e6ffe6;">"</ins><span>&para;<br>        }</span><del style="background:#ffe6e6;">,</del><span>&para;<br>      ],&para;<br>      role: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>user</span><del style="background:#ffe6e6;">',</del><ins style="background:#e6ffe6;">"</ins><span>&para;<br>    }</span><del style="background:#ffe6e6;">,</del><span>&para;<br>  ]</span><del style="background:#ffe6e6;">,</del><span>&para;<br>});&para;<br>console.log(response);&para;<br>```&para;<br>&para;<br>```java Java&para;<br></span><del style="background:#ffe6e6;">import java.io.IOException;&para;<br>import java.nio.file.Files;&para;<br>import java.nio.file.Paths;&para;<br>import java.util.List;&para;<br>&para;<br></del><span>import com.anthropic.client.AnthropicClient;&para;<br>import com.anthropic.client.okhttp.AnthropicOkHttpClient;&para;<br>import com.anthropic.models.messages.Base64PdfSource;&para;<br>import com.anthropic.models.messages.CacheControlEphemeral;&para;<br>import com.anthropic.models.messages.ContentBlockParam;&para;<br>import com.anthropic.models.messages.DocumentBlockParam;&para;<br>import com.anthropic.models.messages.Message;&para;<br>import com.anthropic.models.messages.MessageCreateParams;&para;<br>import com.anthropic.models.messages.Model;&para;<br>import com.anthropic.models.messages.TextBlockParam;</span><ins style="background:#e6ffe6;">&para;<br>import java.io.IOException;&para;<br>import java.nio.file.Files;&para;<br>import java.nio.file.Paths;&para;<br>import java.util.List;</ins><span>&para;<br>&para;<br>public class MessagesDocumentExample {&para;<br>&para;<br></span><del style="background:#ffe6e6;">  </del><span>  public static void main(String[] args) throws IOException {&para;<br>    </span><del style="background:#ffe6e6;">  </del><del style="background:#ffe6e6;">  </del><span>AnthropicClient client = AnthropicOkHttpClient.fromEnv();&para;<br>&para;<br>    </span><del style="background:#ffe6e6;">   </del><del style="background:#ffe6e6;"> </del><span>// Read PDF file as base64&para;<br></span><del style="background:#ffe6e6;">    </del><span>    byte[] pdfBytes = Files.readAllBytes(Paths.get("pdf_base64.txt"));&para;<br></span><del style="background:#ffe6e6;">    </del><span>    String pdfBase64 = new String(pdfBytes);&para;<br>&para;<br></span><del style="background:#ffe6e6;">    </del><span>    MessageCreateParams params = MessageCreateParams.builder()&para;<br></span><del style="background:#ffe6e6;">          </del><span>      .model(Model.CLAUDE_OPUS_4_6)&para;<br>      </span><del style="background:#ffe6e6;">     </del><del style="background:#ffe6e6;">     </del><span>.maxTokens(1024)&para;<br></span><del style="background:#ffe6e6;">          </del><span>      .addUserMessageOfBlockParams(</span><ins style="background:#e6ffe6;">&para;<br>        </ins><span>List.of(&para;<br></span><del style="background:#ffe6e6;">              </del><span>          ContentBlockParam.ofDocument(&para;<br></span><del style="background:#ffe6e6;">                    </del><span>            DocumentBlockParam.builder()&para;<br></span><del style="background:#ffe6e6;">                          </del><span>              .source(Base64PdfSource.builder()</span><del style="background:#ffe6e6;">&para;<br>                                                .data(pdfBase64)&para;<br>                                                .build())&para;<br>                          </del><ins style="background:#e6ffe6;">.data(pdfBase64).build())&para;<br></ins><span>              .cacheControl(CacheControlEphemeral.builder().build())&para;<br></span><del style="background:#ffe6e6;">                          </del><span>              .build()</span><del style="background:#ffe6e6;">),</del><span>&para;<br>          </span><del style="background:#ffe6e6;">    </del><ins style="background:#e6ffe6;">),&para;<br></ins><span>          ContentBlockParam.ofText(&para;<br></span><del style="background:#ffe6e6;">                    </del><span>            TextBlockParam.builder()&para;<br>              </span><del style="background:#ffe6e6;">    </del><del style="background:#ffe6e6;">      </del><ins style="background:#e6ffe6;">.text(&para;<br></ins><span>                </span><del style="background:#ffe6e6;">.text(</del><span>"Which model has the highest human preference win rates across each use-case?"</span><del style="background:#ffe6e6;">)</del><span>&para;<br>              </span><del style="background:#ffe6e6;">       </del><ins style="background:#e6ffe6;">)&para;<br></ins><span>              </span><del style="background:#ffe6e6;">     </del><span>.build()</span><del style="background:#ffe6e6;">)</del><span>&para;<br>          </span><del style="background:#ffe6e6;">  </del><ins style="background:#e6ffe6;">)&para;<br></ins><span>    </span><del style="background:#ffe6e6;">))&para;<br></del><span>    </span><ins style="background:#e6ffe6;">)&para;<br></ins><span>      </span><ins style="background:#e6ffe6;">)&para;<br></ins><span>      .build();&para;<br>&para;<br></span><del style="background:#ffe6e6;">&para;<br> </del><span>    </span><del style="background:#ffe6e6;">   </del><span>Message message = client.messages().create(params);&para;<br></span><del style="background:#ffe6e6;">    </del><span>    System.out.println(message);&para;<br></span><del style="background:#ffe6e6;">  </del><span>  }&para;<br>}&para;<br>```&para;<br>&lt;/CodeGroup&gt;&para;<br>&para;<br>#### Process document batches&para;<br>Use the Message Batches API for high-volume workflows:&para;<br>&lt;CodeGroup&gt;&para;<br>```bash Shell&para;<br># Create a JSON request file using the pdf_base64.txt content&para;<br>jq -n --rawfile PDF_BASE64 pdf_base64.txt '&para;<br>{&para;<br>  "requests": [&para;<br>      {&para;<br>          "custom_id": "my-first-request",&para;<br>          "params": {&para;<br>              "model": "claude-opus-4-6",&para;<br>              "max_tokens": 1024,&para;<br>              "messages": [&para;<br>                {&para;<br>                    "role": "user",&para;<br>                    "content": [&para;<br>                        {&para;<br>                            "type": "document",&para;<br>                            "source": {&para;<br>                                "type": "base64",&para;<br>                                "media_type": "application/pdf",&para;<br>                                "data": $PDF_BASE64&para;<br>                            }&para;<br>                        },&para;<br>                        {&para;<br>                            "type": "text",&para;<br>                            "text": "Which model has the highest human preference win rates across each use-case?"&para;<br>                        }&para;<br>                    ]&para;<br>                }&para;<br>              ]&para;<br>          }&para;<br>      },&para;<br>      {&para;<br>          "custom_id": "my-second-request",&para;<br>          "params": {&para;<br>              "model": "claude-opus-4-6",&para;<br>              "max_tokens": 1024,&para;<br>              "messages": [&para;<br>                {&para;<br>                    "role": "user",&para;<br>                    "content": [&para;<br>                        {&para;<br>                            "type": "document",&para;<br>                            "source": {&para;<br>                                "type": "base64",&para;<br>                                "media_type": "application/pdf",&para;<br>                                "data": $PDF_BASE64&para;<br>                            }&para;<br>                        },&para;<br>                        {&para;<br>                            "type": "text",&para;<br>                            "text": "Extract 5 key insights from this document."&para;<br>                        }&para;<br>                    ]&para;<br>                }&para;<br>              ]&para;<br>          }&para;<br>      }&para;<br>  ]&para;<br>}&para;<br>' &gt; request.json&para;<br>&para;<br># Then make the API call using the JSON file&para;<br>curl https://api.anthropic.com/v1/messages/batches \&para;<br>  -H "content-type: application/json" \&para;<br>  -H "x-api-key: $ANTHROPIC_API_KEY" \&para;<br>  -H "anthropic-version: 2023-06-01" \&para;<br>  -d @request.json&para;<br>```&para;<br>```python Python&para;<br>message_batch = client.messages.batches.create(&para;<br>    requests=[&para;<br>        {&para;<br>            "custom_id": "doc1",&para;<br>            "params": {&para;<br>                "model": "claude-opus-4-6",&para;<br>                "max_tokens": 1024,&para;<br>                "messages": [&para;<br>                    {&para;<br>                        "role": "user",&para;<br>                        "content": [&para;<br>                            {&para;<br>                                "type": "document",&para;<br>                                "source": {&para;<br>                                    "type": "base64",&para;<br>                                    "media_type": "application/pdf",&para;<br>                                    "data": pdf_data</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>                                }</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>                            },&para;<br>                            {</span><del style="background:#ffe6e6;">&para;<br>                                "type": "text",&para;<br>                               </del><ins style="background:#e6ffe6;">"type": "text",</ins><span> "text": "Summarize this document."</span><del style="background:#ffe6e6;">&para;<br>                            </del><span>}</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>                        ]</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>                    }&para;<br>                ]</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>            }</span><ins style="background:#e6ffe6;">,</ins><span>&para;<br>        }&para;<br>    ]&para;<br>)&para;<br>```&para;<br>&para;<br>```typescript TypeScript&para;<br>const response = await anthropic.messages.batches.create({&para;<br>  requests: [&para;<br>    {&para;<br>      custom_id: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>my-first-request</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>      params: {&para;<br>        max_tokens: 1024,&para;<br>        messages: [&para;<br>          {&para;<br>            content: [&para;<br>              {&para;<br>                type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>document</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>                source: {&para;<br>                  media_type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>application/pdf</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>                  type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>base64</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>                  data: pdfBase64</span><del style="background:#ffe6e6;">,</del><span>&para;<br>                }</span><del style="background:#ffe6e6;">,</del><span>&para;<br>              },&para;<br>              {&para;<br>                type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>text</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>                text: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>Which model has the highest human preference win rates across each use-case?</span><del style="background:#ffe6e6;">',</del><ins style="background:#e6ffe6;">"</ins><span>&para;<br>              }</span><del style="background:#ffe6e6;">,</del><span>&para;<br>            ],&para;<br>            role: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>user</span><del style="background:#ffe6e6;">',</del><ins style="background:#e6ffe6;">"</ins><span>&para;<br>          }</span><del style="background:#ffe6e6;">,</del><span>&para;<br>        ],&para;<br>        model: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>claude-opus-4-6</span><del style="background:#ffe6e6;">',</del><ins style="background:#e6ffe6;">"</ins><span>&para;<br>      }</span><del style="background:#ffe6e6;">,</del><span>&para;<br>    },&para;<br>    {&para;<br>      custom_id: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>my-second-request</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>      params: {&para;<br>        max_tokens: 1024,&para;<br>        messages: [&para;<br>          {&para;<br>            content: [&para;<br>              {&para;<br>                type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>document</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>                source: {&para;<br>                  media_type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>application/pdf</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>                  type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>base64</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>                  data: pdfBase64</span><del style="background:#ffe6e6;">,</del><span>&para;<br>                }</span><del style="background:#ffe6e6;">,</del><span>&para;<br>              },&para;<br>              {&para;<br>                type: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>text</span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>,&para;<br>                text: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>Extract 5 key insights from this document.</span><del style="background:#ffe6e6;">',</del><ins style="background:#e6ffe6;">"</ins><span>&para;<br>              }</span><del style="background:#ffe6e6;">,</del><span>&para;<br>            ],&para;<br>            role: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>user</span><del style="background:#ffe6e6;">',</del><ins style="background:#e6ffe6;">"</ins><span>&para;<br>          }</span><del style="background:#ffe6e6;">,</del><span>&para;<br>        ],&para;<br>        model: </span><del style="background:#ffe6e6;">'</del><ins style="background:#e6ffe6;">"</ins><span>claude-opus-4-6</span><del style="background:#ffe6e6;">',</del><ins style="background:#e6ffe6;">"</ins><span>&para;<br>      }</span><del style="background:#ffe6e6;">,</del><span>&para;<br>    }&para;<br>  ]</span><del style="background:#ffe6e6;">,</del><span>&para;<br>});&para;<br>console.log(response);&para;<br>```&para;<br>&para;<br>```java Java&para;<br></span><del style="background:#ffe6e6;">import java.io.IOException;&para;<br>import java.nio.file.Files;&para;<br>import java.nio.file.Paths;&para;<br>import java.util.List;&para;<br>&para;<br></del><span>import com.anthropic.client.AnthropicClient;&para;<br>import com.anthropic.client.okhttp.AnthropicOkHttpClient;&para;<br>import com.anthropic.models.messages.*;&para;<br>import com.anthropic.models.messages.batches.*;</span><ins style="background:#e6ffe6;">&para;<br>import java.io.IOException;&para;<br>import java.nio.file.Files;&para;<br>import java.nio.file.Paths;&para;<br>import java.util.List;</ins><span>&para;<br>&para;<br>public class MessagesBatchDocumentExample {&para;<br>&para;<br></span><del style="background:#ffe6e6;">  </del><span>  public static void main(String[] args) throws IOException {&para;<br>    </span><del style="background:#ffe6e6;">   </del><del style="background:#ffe6e6;"> </del><span>AnthropicClient client = AnthropicOkHttpClient.fromEnv();&para;<br>&para;<br></span><del style="background:#ffe6e6;">    </del><span>    // Read PDF file as base64&para;<br></span><del style="background:#ffe6e6;">    </del><span>    byte[] pdfBytes = Files.readAllBytes(Paths.get("pdf_base64.txt"));&para;<br>    </span><del style="background:#ffe6e6;"> </del><del style="background:#ffe6e6;">   </del><span>String pdfBase64 = new String(pdfBytes);&para;<br>&para;<br></span><del style="background:#ffe6e6;">    </del><span>    BatchCreateParams params = BatchCreateParams.builder()&para;<br></span><del style="background:#ffe6e6;">          </del><span>      .addRequest(</span><ins style="background:#e6ffe6;">&para;<br>        </ins><span>BatchCreateParams.Request.builder()&para;<br></span><del style="background:#ffe6e6;">              </del><span>          .customId("my-first-request")&para;<br>          </span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">.params(&para;<br></ins><span>            </span><del style="background:#ffe6e6;"> .params(</del><span>BatchCreateParams.Request.Params.builder()&para;<br>              </span><del style="background:#ffe6e6;">           </del><del style="background:#ffe6e6;">       </del><span>.model(Model.CLAUDE_OPUS_4_6)&para;<br>              </span><del style="background:#ffe6e6;">            </del><del style="background:#ffe6e6;">      </del><span>.maxTokens(1024)&para;<br></span><del style="background:#ffe6e6;">                  </del><span>              .addUserMessageOfBlockParams(</span><del style="background:#ffe6e6;">List.of(</del><span>&para;<br>                </span><del style="background:#ffe6e6;">      </del><ins style="background:#e6ffe6;">List.of(&para;<br></ins><span>                  ContentBlockParam.ofDocument(&para;<br></span><del style="background:#ffe6e6;">                            </del><span>                    DocumentBlockParam.builder()&para;<br></span><del style="background:#ffe6e6;">                                  </del><span>                      .source(Base64PdfSource.builder()</span><del style="background:#ffe6e6;">&para;<br>                                                                .data(pdfBase64)&para;<br>                                                                .build())&para;<br>                                  </del><ins style="background:#e6ffe6;">.data(pdfBase64).build())&para;<br></ins><span>                      .build()&para;<br>                  </span><del style="background:#ffe6e6;">       </del><del style="background:#ffe6e6;">               ),&para;<br>                      </del><ins style="background:#e6ffe6;">),&para;<br></ins><span>                  ContentBlockParam.ofText(&para;<br></span><del style="background:#ffe6e6;">                            </del><span>                    TextBlockParam.builder()&para;<br>                      </span><del style="background:#ffe6e6;">          </del><ins style="background:#e6ffe6;">.text(&para;<br></ins><span>                        </span><del style="background:#ffe6e6;">.text(</del><span>"Which model has the highest human preference win rates across each use-case?"</span><del style="background:#ffe6e6;">)&para;<br>          </del><ins style="background:#e6ffe6;">&para;<br></ins><span>                      </span><del style="background:#ffe6e6;">  </del><ins style="background:#e6ffe6;">)&para;<br></ins><span>                      .build()&para;<br>                  </span><del style="background:#ffe6e6;">                </del><del style="background:#ffe6e6;">      )&para;<br>              </del><ins style="background:#e6ffe6;">)&para;<br></ins><span>                </span><del style="background:#ffe6e6;">  ))&para;<br>  </del><ins style="background:#e6ffe6;">)&para;<br></ins><span>              </span><del style="background:#ffe6e6;">  </del><ins style="background:#e6ffe6;">)&para;<br></ins><span>              .build()</span><del style="background:#ffe6e6;">)</del><span>&para;<br>          </span><del style="background:#ffe6e6;">    </del><ins style="background:#e6ffe6;">)&para;<br></ins><span>          .build()</span><del style="background:#ffe6e6;">)&para;<br>   </del><ins style="background:#e6ffe6;">&para;<br></ins><span>      </span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">)&para;<br></ins><span>      .addRequest(</span><ins style="background:#e6ffe6;">&para;<br>        </ins><span>BatchCreateParams.Request.builder()&para;<br>          </span><del style="background:#ffe6e6;">        </del><del style="background:#ffe6e6;">      </del><span>.customId("my-second-request")&para;<br>          </span><ins style="background:#e6ffe6;">.params(&para;<br></ins><span>            </span><del style="background:#ffe6e6;">  .params(</del><span>BatchCreateParams.Request.Params.builder()&para;<br></span><del style="background:#ffe6e6;">                  </del><span>              .model(Model.CLAUDE_OPUS_4_6)&para;<br>              </span><del style="background:#ffe6e6;">                  .maxTokens(1024)&para;<br>                  </del><ins style="background:#e6ffe6;">.maxTokens(1024)&para;<br></ins><span>              .addUserMessageOfBlockParams(</span><del style="background:#ffe6e6;">List.of(</del><span>&para;<br>                </span><del style="background:#ffe6e6;">    </del><ins style="background:#e6ffe6;">List.of(&para;<br></ins><span>                  </span><del style="background:#ffe6e6;">  </del><span>ContentBlockParam.ofDocument(&para;<br>                    </span><del style="background:#ffe6e6;">                  </del><del style="background:#ffe6e6;">  </del><span>DocumentBlockParam.builder()&para;<br>                      </span><del style="background:#ffe6e6;">                  </del><del style="background:#ffe6e6;">        </del><span>.source(Base64PdfSource.builder()</span><del style="background:#ffe6e6;">&para;<br>                                                        .data(pdfBase64)&para;<br>                                                        .build())&para;<br>                                                .build()&para;<br>                                        ),&para;<br>                      </del><ins style="background:#e6ffe6;">.data(pdfBase64).build())&para;<br>                      .build()&para;<br>                  ),&para;<br></ins><span>                  ContentBlockParam.ofText(&para;<br></span><del style="background:#ffe6e6;">                            </del><span>                    TextBlockParam.builder()&para;<br>                      </span><del style="background:#ffe6e6;">                  </del><del style="background:#ffe6e6;">                </del><span>.text("Extract 5 key insights from this document.")&para;<br>                      </span><del style="background:#ffe6e6;">                                  .build()&para;<br>          </del><ins style="background:#e6ffe6;">.build()&para;<br></ins><span>              </span><ins style="background:#e6ffe6;">    )&para;<br></ins><span>                )&para;<br>              </span><del style="background:#ffe6e6;">                  ))&para;<br>                  </del><ins style="background:#e6ffe6;">)&para;<br></ins><span>              .build()</span><del style="background:#ffe6e6;">)</del><span>&para;<br>          </span><del style="background:#ffe6e6;">  </del><ins style="background:#e6ffe6;">)&para;<br></ins><span>          </span><del style="background:#ffe6e6;">  </del><span>.build()</span><del style="background:#ffe6e6;">)&para;<br>  </del><ins style="background:#e6ffe6;">&para;<br></ins><span>      </span><del style="background:#ffe6e6;">  </del><ins style="background:#e6ffe6;">)&para;<br></ins><span>      .build();&para;<br>&para;<br>    </span><del style="background:#ffe6e6;"> </del><del style="background:#ffe6e6;">   </del><span>MessageBatch batch = client.messages().batches().create(params);&para;<br></span><del style="background:#ffe6e6;">    </del><span>    System.out.println(batch);&para;<br></span><del style="background:#ffe6e6;">  </del><span>  }&para;<br>}&para;<br>```&para;<br>&lt;/CodeGroup&gt;&para;<br>&para;<br>## Next steps&para;<br>&para;<br>&lt;CardGroup cols={2}&gt;&para;<br>  &lt;Card&para;<br>    title="Try PDF examples"&para;<br>    icon="file"&para;<br>    href="https://platform.claude.com/cookbook/multimodal-getting-started-with-vision"&para;<br>  &gt;&para;<br>    Explore practical examples of PDF processing in our cookbook recipe.&para;<br>  &lt;/Card&gt;&para;<br>&para;<br>  &lt;Card&para;<br>    title="View API reference"&para;<br>    icon="code"&para;<br>    href="/docs/en/api/messages"&para;<br>  &gt;&para;<br>    See complete API documentation for PDF support.&para;<br>  &lt;/Card&gt;&para;<br>&lt;/CardGroup&gt;</span></div>
        </div>

        <h2 style="margin-top: 2rem; margin-bottom: 1rem;">Unified Diff</h2>
        <pre><code>--- a/build-with-claude/pdf-support.md
+++ b/build-with-claude/pdf-support.md
@@ -79,7 +79,7 @@
 Let&#39;s start with a simple example using the Messages API. You can provide PDFs to Claude in three ways:
 
 1. As a URL reference to a PDF hosted online
-2. As a base64-encoded PDF in `document` content blocks  
+2. As a base64-encoded PDF in `document` content blocks
 3. By a `file_id` from the [Files API](/docs/en/build-with-claude/files)
 
 #### Option 1: URL-based PDF document
@@ -126,14 +126,11 @@
                         &#34;type&#34;: &#34;document&#34;,
                         &#34;source&#34;: {
                             &#34;type&#34;: &#34;url&#34;,
-                            &#34;url&#34;: &#34;https://assets.anthropic.com/m/1cd9d098ac3e6467/original/Claude-3-Model-Card-October-Addendum.pdf&#34;
-                        }
+                            &#34;url&#34;: &#34;https://assets.anthropic.com/m/1cd9d098ac3e6467/original/Claude-3-Model-Card-October-Addendum.pdf&#34;,
+                        },
                     },
-                    {
-                        &#34;type&#34;: &#34;text&#34;,
-                        &#34;text&#34;: &#34;What are the key findings in this document?&#34;
-                    }
-                ]
+                    {&#34;type&#34;: &#34;text&#34;, &#34;text&#34;: &#34;What are the key findings in this document?&#34;},
+                ],
             }
         ],
     )
@@ -141,75 +138,77 @@
     print(message.content)
     ```
     ```typescript TypeScript
-    import Anthropic from &#39;@anthropic-ai/sdk&#39;;
+    import Anthropic from &#34;@anthropic-ai/sdk&#34;;
 
     const anthropic = new Anthropic();
-    
+
     async function main() {
       const response = await anthropic.messages.create({
-        model: &#39;claude-opus-4-6&#39;,
+        model: &#34;claude-opus-4-6&#34;,
         max_tokens: 1024,
         messages: [
           {
-            role: &#39;user&#39;,
+            role: &#34;user&#34;,
             content: [
               {
-                type: &#39;document&#39;,
+                type: &#34;document&#34;,
                 source: {
-                  type: &#39;url&#39;,
-                  url: &#39;https://assets.anthropic.com/m/1cd9d098ac3e6467/original/Claude-3-Model-Card-October-Addendum.pdf&#39;,
-                },
+                  type: &#34;url&#34;,
+                  url: &#34;https://assets.anthropic.com/m/1cd9d098ac3e6467/original/Claude-3-Model-Card-October-Addendum.pdf&#34;
+                }
               },
               {
-                type: &#39;text&#39;,
-                text: &#39;What are the key findings in this document?&#39;,
-              },
-            ],
-          },
-        ],
+                type: &#34;text&#34;,
+                text: &#34;What are the key findings in this document?&#34;
+              }
+            ]
+          }
+        ]
       });
-      
+
       console.log(response);
     }
-    
+
     main();
     ```
     ```java Java
-    import java.util.List;
-
     import com.anthropic.client.AnthropicClient;
     import com.anthropic.client.okhttp.AnthropicOkHttpClient;
+    import com.anthropic.models.messages.*;
     import com.anthropic.models.messages.MessageCreateParams;
-    import com.anthropic.models.messages.*;
+    import java.util.List;
 
     public class PdfExample {
-        public static void main(String[] args) {
-            AnthropicClient client = AnthropicOkHttpClient.fromEnv();
-
-            // Create document block with URL
-            DocumentBlockParam documentParam = DocumentBlockParam.builder()
-                    .urlPdfSource(&#34;https://assets.anthropic.com/m/1cd9d098ac3e6467/original/Claude-3-Model-Card-October-Addendum.pdf&#34;)
-                    .build();
-
-            // Create a message with document and text content blocks
-            MessageCreateParams params = MessageCreateParams.builder()
-                    .model(Model.CLAUDE_OPUS_4_6)
-                    .maxTokens(1024)
-                    .addUserMessageOfBlockParams(
-                            List.of(
-                                    ContentBlockParam.ofDocument(documentParam),
-                                    ContentBlockParam.ofText(
-                                            TextBlockParam.builder()
-                                                    .text(&#34;What are the key findings in this document?&#34;)
-                                                    .build()
-                                    )
-                            )
-                    )
-                    .build();
-
-            Message message = client.messages().create(params);
-            System.out.println(message.content());
-        }
+
+      public static void main(String[] args) {
+        AnthropicClient client = AnthropicOkHttpClient.fromEnv();
+
+        // Create document block with URL
+        DocumentBlockParam documentParam = DocumentBlockParam.builder()
+          .urlPdfSource(
+            &#34;https://assets.anthropic.com/m/1cd9d098ac3e6467/original/Claude-3-Model-Card-October-Addendum.pdf&#34;
+          )
+          .build();
+
+        // Create a message with document and text content blocks
+        MessageCreateParams params = MessageCreateParams.builder()
+          .model(Model.CLAUDE_OPUS_4_6)
+          .maxTokens(1024)
+          .addUserMessageOfBlockParams(
+            List.of(
+              ContentBlockParam.ofDocument(documentParam),
+              ContentBlockParam.ofText(
+                TextBlockParam.builder()
+                  .text(&#34;What are the key findings in this document?&#34;)
+                  .build()
+              )
+            )
+          )
+          .build();
+
+        Message message = client.messages().create(params);
+        System.out.println(message.content());
+      }
     }
     ```
 &lt;/CodeGroup&gt;
@@ -259,7 +258,7 @@
     import base64
     import httpx
 
-    # First, load and encode the PDF 
+    # First, load and encode the PDF
     pdf_url = &#34;https://assets.anthropic.com/m/1cd9d098ac3e6467/original/Claude-3-Model-Card-October-Addendum.pdf&#34;
     pdf_data = base64.standard_b64encode(httpx.get(pdf_url).content).decode(&#34;utf-8&#34;)
 
@@ -281,14 +280,11 @@
                         &#34;source&#34;: {
                             &#34;type&#34;: &#34;base64&#34;,
                             &#34;media_type&#34;: &#34;application/pdf&#34;,
-                            &#34;data&#34;: pdf_data
-                        }
+                            &#34;data&#34;: pdf_data,
+                        },
                     },
-                    {
-                        &#34;type&#34;: &#34;text&#34;,
-                        &#34;text&#34;: &#34;What are the key findings in this document?&#34;
-                    }
-                ]
+                    {&#34;type&#34;: &#34;text&#34;, &#34;text&#34;: &#34;What are the key findings in this document?&#34;},
+                ],
             }
         ],
     )
@@ -296,61 +292,53 @@
     print(message.content)
     ```
     ```typescript TypeScript
-    import Anthropic from &#39;@anthropic-ai/sdk&#39;;
-    import fetch from &#39;node-fetch&#39;;
-    import fs from &#39;fs&#39;;
+    import Anthropic from &#34;@anthropic-ai/sdk&#34;;
+    import fetch from &#34;node-fetch&#34;;
+    import fs from &#34;fs&#34;;
 
     async function main() {
       // Method 1: Fetch and encode a remote PDF
       const pdfURL = &#34;https://assets.anthropic.com/m/1cd9d098ac3e6467/original/Claude-3-Model-Card-October-Addendum.pdf&#34;;
       const pdfResponse = await fetch(pdfURL);
       const arrayBuffer = await pdfResponse.arrayBuffer();
-      const pdfBase64 = Buffer.from(arrayBuffer).toString(&#39;base64&#39;);
-      
+      const pdfBase64 = Buffer.from(arrayBuffer).toString(&#34;base64&#34;);
+
       // Method 2: Load from a local file
-      // const pdfBase64 = fs.readFileSync(&#39;document.pdf&#39;).toString(&#39;base64&#39;);
-      
+      // const pdfBase64 = (await fs.readFile(&#39;document.pdf&#39;)).toString(&#39;base64&#39;);
+
       // Send the API request with base64-encoded PDF
       const anthropic = new Anthropic();
       const response = await anthropic.messages.create({
-        model: &#39;claude-opus-4-6&#39;,
+        model: &#34;claude-opus-4-6&#34;,
         max_tokens: 1024,
         messages: [
           {
-            role: &#39;user&#39;,
+            role: &#34;user&#34;,
             content: [
               {
-                type: &#39;document&#39;,
+                type: &#34;document&#34;,
                 source: {
-                  type: &#39;base64&#39;,
-                  media_type: &#39;application/pdf&#39;,
-                  data: pdfBase64,
-                },
+                  type: &#34;base64&#34;,
+                  media_type: &#34;application/pdf&#34;,
+                  data: pdfBase64
+                }
               },
               {
-                type: &#39;text&#39;,
-                text: &#39;What are the key findings in this document?&#39;,
-              },
-            ],
-          },
-        ],
+                type: &#34;text&#34;,
+                text: &#34;What are the key findings in this document?&#34;
+              }
+            ]
+          }
+        ]
       });
-      
+
       console.log(response);
     }
-    
+
     main();
     ```
 
     ```java Java
-    import java.io.IOException;
-    import java.net.URI;
-    import java.net.http.HttpClient;
-    import java.net.http.HttpRequest;
-    import java.net.http.HttpResponse;
-    import java.util.Base64;
-    import java.util.List;
-
     import com.anthropic.client.AnthropicClient;
     import com.anthropic.client.okhttp.AnthropicOkHttpClient;
     import com.anthropic.models.messages.ContentBlockParam;
@@ -359,48 +347,63 @@
     import com.anthropic.models.messages.MessageCreateParams;
     import com.anthropic.models.messages.Model;
     import com.anthropic.models.messages.TextBlockParam;
+    import java.io.IOException;
+    import java.net.URI;
+    import java.net.http.HttpClient;
+    import java.net.http.HttpRequest;
+    import java.net.http.HttpResponse;
+    import java.util.Base64;
+    import java.util.List;
 
     public class PdfExample {
-        public static void main(String[] args) throws IOException, InterruptedException {
-            AnthropicClient client = AnthropicOkHttpClient.fromEnv();
-
-            // Method 1: Download and encode a remote PDF
-            String pdfUrl = &#34;https://assets.anthropic.com/m/1cd9d098ac3e6467/original/Claude-3-Model-Card-October-Addendum.pdf&#34;;
-            HttpClient httpClient = HttpClient.newHttpClient();
-            HttpRequest request = HttpRequest.newBuilder()
-                    .uri(URI.create(pdfUrl))
-                    .GET()
-                    .build();
-
-            HttpResponse&lt;byte[]&gt; response = httpClient.send(request, HttpResponse.BodyHandlers.ofByteArray());
-            String pdfBase64 = Base64.getEncoder().encodeToString(response.body());
-
-            // Method 2: Load from a local file
-            // byte[] fileBytes = Files.readAllBytes(Path.of(&#34;document.pdf&#34;));
-            // String pdfBase64 = Base64.getEncoder().encodeToString(fileBytes);
-
-            // Create document block with base64 data
-            DocumentBlockParam documentParam = DocumentBlockParam.builder()
-                    .base64PdfSource(pdfBase64)
-                    .build();
-
-            // Create a message with document and text content blocks
-            MessageCreateParams params = MessageCreateParams.builder()
-                    .model(Model.CLAUDE_OPUS_4_6)
-                    .maxTokens(1024)
-                    .addUserMessageOfBlockParams(
-                            List.of(
-                                    ContentBlockParam.ofDocument(documentParam),
-                                    ContentBlockParam.ofText(TextBlockParam.builder().text(&#34;What are the key findings in this document?&#34;).build())
-                            )
-                    )
-                    .build();
-
-            Message message = client.messages().create(params);
-            message.content().stream()
-                    .flatMap(contentBlock -&gt; contentBlock.text().stream())
-                    .forEach(textBlock -&gt; System.out.println(textBlock.text()));
-        }
+
+      public static void main(String[] args) throws IOException, InterruptedException {
+        AnthropicClient client = AnthropicOkHttpClient.fromEnv();
+
+        // Method 1: Download and encode a remote PDF
+        String pdfUrl =
+          &#34;https://assets.anthropic.com/m/1cd9d098ac3e6467/original/Claude-3-Model-Card-October-Addendum.pdf&#34;;
+        HttpClient httpClient = HttpClient.newHttpClient();
+        HttpRequest request = HttpRequest.newBuilder().uri(URI.create(pdfUrl)).GET().build();
+
+        HttpResponse&lt;byte[]&gt; response = httpClient.send(
+          request,
+          HttpResponse.BodyHandlers.ofByteArray()
+        );
+        String pdfBase64 = Base64.getEncoder().encodeToString(response.body());
+
+        // Method 2: Load from a local file
+        // byte[] fileBytes = Files.readAllBytes(Path.of(&#34;document.pdf&#34;));
+        // String pdfBase64 = Base64.getEncoder().encodeToString(fileBytes);
+
+        // Create document block with base64 data
+        DocumentBlockParam documentParam = DocumentBlockParam.builder()
+          .base64PdfSource(pdfBase64)
+          .build();
+
+        // Create a message with document and text content blocks
+        MessageCreateParams params = MessageCreateParams.builder()
+          .model(Model.CLAUDE_OPUS_4_6)
+          .maxTokens(1024)
+          .addUserMessageOfBlockParams(
+            List.of(
+              ContentBlockParam.ofDocument(documentParam),
+              ContentBlockParam.ofText(
+                TextBlockParam.builder()
+                  .text(&#34;What are the key findings in this document?&#34;)
+                  .build()
+              )
+            )
+          )
+          .build();
+
+        Message message = client.messages().create(params);
+        message
+          .content()
+          .stream()
+          .flatMap(contentBlock -&gt; contentBlock.text().stream())
+          .forEach(textBlock -&gt; System.out.println(textBlock.text()));
+      }
     }
     ```
 
@@ -408,7 +411,7 @@
 
 #### Option 3: Files API
 
-For PDFs you&#39;ll use repeatedly, or when you want to avoid encoding overhead, use the [Files API](/docs/en/build-with-claude/files): 
+For PDFs you&#39;ll use repeatedly, or when you want to avoid encoding overhead, use the [Files API](/docs/en/build-with-claude/files):
 
 &lt;CodeGroup&gt;
 ```bash Shell
@@ -426,7 +429,7 @@
   -H &#34;anthropic-version: 2023-06-01&#34; \
   -H &#34;anthropic-beta: files-api-2025-04-14&#34; \
   -d &#39;{
-    &#34;model&#34;: &#34;claude-opus-4-6&#34;, 
+    &#34;model&#34;: &#34;claude-opus-4-6&#34;,
     &#34;max_tokens&#34;: 1024,
     &#34;messages&#34;: [{
       &#34;role&#34;: &#34;user&#34;,
@@ -465,16 +468,10 @@
             &#34;content&#34;: [
                 {
                     &#34;type&#34;: &#34;document&#34;,
-                    &#34;source&#34;: {
-                        &#34;type&#34;: &#34;file&#34;,
-                        &#34;file_id&#34;: file_upload.id
-                    }
+                    &#34;source&#34;: {&#34;type&#34;: &#34;file&#34;, &#34;file_id&#34;: file_upload.id},
                 },
-                {
-                    &#34;type&#34;: &#34;text&#34;,
-                    &#34;text&#34;: &#34;What are the key findings in this document?&#34;
-                }
-            ]
+                {&#34;type&#34;: &#34;text&#34;, &#34;text&#34;: &#34;What are the key findings in this document?&#34;},
+            ],
         }
     ],
 )
@@ -483,38 +480,38 @@
 ```
 
 ```typescript TypeScript
-import { Anthropic, toFile } from &#39;@anthropic-ai/sdk&#39;;
-import fs from &#39;fs&#39;;
+import { Anthropic, toFile } from &#34;@anthropic-ai/sdk&#34;;
+import fs from &#34;fs&#34;;
 
 const anthropic = new Anthropic();
 
 async function main() {
   // Upload the PDF file
   const fileUpload = await anthropic.beta.files.upload({
-    file: toFile(fs.createReadStream(&#39;document.pdf&#39;), undefined, { type: &#39;application/pdf&#39; })
+    file: toFile(fs.createReadStream(&#34;document.pdf&#34;), undefined, { type: &#34;application/pdf&#34; })
   }, {
-    betas: [&#39;files-api-2025-04-14&#39;]
+    betas: [&#34;files-api-2025-04-14&#34;]
   });
 
   // Use the uploaded file in a message
   const response = await anthropic.beta.messages.create({
-    model: &#39;claude-opus-4-6&#39;,
+    model: &#34;claude-opus-4-6&#34;,
     max_tokens: 1024,
-    betas: [&#39;files-api-2025-04-14&#39;],
+    betas: [&#34;files-api-2025-04-14&#34;],
     messages: [
       {
-        role: &#39;user&#39;,
+        role: &#34;user&#34;,
         content: [
           {
-            type: &#39;document&#39;,
+            type: &#34;document&#34;,
             source: {
-              type: &#39;file&#39;,
+              type: &#34;file&#34;,
               file_id: fileUpload.id
             }
           },
           {
-            type: &#39;text&#39;,
-            text: &#39;What are the key findings in this document?&#39;
+            type: &#34;text&#34;,
+            text: &#34;What are the key findings in this document?&#34;
           }
         ]
       }
@@ -528,49 +525,52 @@
 ```
 
 ```java Java
-import java.io.IOException;
-import java.nio.file.Files;
-import java.nio.file.Path;
-import java.util.List;
-
 import com.anthropic.client.AnthropicClient;
 import com.anthropic.client.okhttp.AnthropicOkHttpClient;
 import com.anthropic.models.File;
 import com.anthropic.models.files.FileUploadParams;
 import com.anthropic.models.messages.*;
+import java.io.IOException;
+import java.nio.file.Files;
+import java.nio.file.Path;
+import java.util.List;
 
 public class PdfFilesExample {
-    public static void main(String[] args) throws IOException {
-        AnthropicClient client = AnthropicOkHttpClient.fromEnv();
-
-        // Upload the PDF file
-        File file = client.beta().files().upload(FileUploadParams.builder()
-                .file(Files.newInputStream(Path.of(&#34;document.pdf&#34;)))
-                .build());
-
-        // Use the uploaded file in a message
-        DocumentBlockParam documentParam = DocumentBlockParam.builder()
-                .fileSource(file.id())
-                .build();
-
-        MessageCreateParams params = MessageCreateParams.builder()
-                .model(Model.CLAUDE_OPUS_4_6)
-                .maxTokens(1024)
-                .addUserMessageOfBlockParams(
-                        List.of(
-                                ContentBlockParam.ofDocument(documentParam),
-                                ContentBlockParam.ofText(
-                                        TextBlockParam.builder()
-                                                .text(&#34;What are the key findings in this document?&#34;)
-                                                .build()
-                                )
-                        )
-                )
-                .build();
-
-        Message message = client.messages().create(params);
-        System.out.println(message.content());
-    }
+
+  public static void main(String[] args) throws IOException {
+    AnthropicClient client = AnthropicOkHttpClient.fromEnv();
+
+    // Upload the PDF file
+    File file = client
+      .beta()
+      .files()
+      .upload(
+        FileUploadParams.builder().file(Files.newInputStream(Path.of(&#34;document.pdf&#34;))).build()
+      );
+
+    // Use the uploaded file in a message
+    DocumentBlockParam documentParam = DocumentBlockParam.builder()
+      .fileSource(file.id())
+      .build();
+
+    MessageCreateParams params = MessageCreateParams.builder()
+      .model(Model.CLAUDE_OPUS_4_6)
+      .maxTokens(1024)
+      .addUserMessageOfBlockParams(
+        List.of(
+          ContentBlockParam.ofDocument(documentParam),
+          ContentBlockParam.ofText(
+            TextBlockParam.builder()
+              .text(&#34;What are the key findings in this document?&#34;)
+              .build()
+          )
+        )
+      )
+      .build();
+
+    Message message = client.messages().create(params);
+    System.out.println(message.content());
+  }
 }
 ```
 &lt;/CodeGroup&gt;
@@ -666,15 +666,12 @@
                     &#34;source&#34;: {
                         &#34;type&#34;: &#34;base64&#34;,
                         &#34;media_type&#34;: &#34;application/pdf&#34;,
-                        &#34;data&#34;: pdf_data
+                        &#34;data&#34;: pdf_data,
                     },
-                    &#34;cache_control&#34;: {&#34;type&#34;: &#34;ephemeral&#34;}
+                    &#34;cache_control&#34;: {&#34;type&#34;: &#34;ephemeral&#34;},
                 },
-                {
-                    &#34;type&#34;: &#34;text&#34;,
-                    &#34;text&#34;: &#34;Analyze this document.&#34;
-                }
-            ]
+                {&#34;type&#34;: &#34;text&#34;, &#34;text&#34;: &#34;Analyze this document.&#34;},
+            ],
         }
     ],
 )
@@ -682,38 +679,33 @@
 
 ```typescript TypeScript
 const response = await anthropic.messages.create({
-  model: &#39;claude-opus-4-6&#39;,
+  model: &#34;claude-opus-4-6&#34;,
   max_tokens: 1024,
   messages: [
     {
       content: [
         {
-          type: &#39;document&#39;,
+          type: &#34;document&#34;,
           source: {
-            media_type: &#39;application/pdf&#39;,
-            type: &#39;base64&#39;,
-            data: pdfBase64,
+            media_type: &#34;application/pdf&#34;,
+            type: &#34;base64&#34;,
+            data: pdfBase64
           },
-          cache_control: { type: &#39;ephemeral&#39; },
+          cache_control: { type: &#34;ephemeral&#34; }
         },
         {
-          type: &#39;text&#39;,
-          text: &#39;Which model has the highest human preference win rates across each use-case?&#39;,
-        },
+          type: &#34;text&#34;,
+          text: &#34;Which model has the highest human preference win rates across each use-case?&#34;
+        }
       ],
-      role: &#39;user&#39;,
-    },
-  ],
+      role: &#34;user&#34;
+    }
+  ]
 });
 console.log(response);
 ```
 
 ```java Java
-import java.io.IOException;
-import java.nio.file.Files;
-import java.nio.file.Paths;
-import java.util.List;
-
 import com.anthropic.client.AnthropicClient;
 import com.anthropic.client.okhttp.AnthropicOkHttpClient;
 import com.anthropic.models.messages.Base64PdfSource;
@@ -724,38 +716,45 @@
 import com.anthropic.models.messages.MessageCreateParams;
 import com.anthropic.models.messages.Model;
 import com.anthropic.models.messages.TextBlockParam;
+import java.io.IOException;
+import java.nio.file.Files;
+import java.nio.file.Paths;
+import java.util.List;
 
 public class MessagesDocumentExample {
 
-    public static void main(String[] args) throws IOException {
-        AnthropicClient client = AnthropicOkHttpClient.fromEnv();
-
-        // Read PDF file as base64
-        byte[] pdfBytes = Files.readAllBytes(Paths.get(&#34;pdf_base64.txt&#34;));
-        String pdfBase64 = new String(pdfBytes);
-
-        MessageCreateParams params = MessageCreateParams.builder()
-                .model(Model.CLAUDE_OPUS_4_6)
-                .maxTokens(1024)
-                .addUserMessageOfBlockParams(List.of(
-                        ContentBlockParam.ofDocument(
-                                DocumentBlockParam.builder()
-                                        .source(Base64PdfSource.builder()
-                                                .data(pdfBase64)
-                                                .build())
-                                        .cacheControl(CacheControlEphemeral.builder().build())
-                                        .build()),
-                        ContentBlockParam.ofText(
-                                TextBlockParam.builder()
-                                        .text(&#34;Which model has the highest human preference win rates across each use-case?&#34;)
-                                        .build())
-                ))
-                .build();
-
-
-        Message message = client.messages().create(params);
-        System.out.println(message);
-    }
+  public static void main(String[] args) throws IOException {
+    AnthropicClient client = AnthropicOkHttpClient.fromEnv();
+
+    // Read PDF file as base64
+    byte[] pdfBytes = Files.readAllBytes(Paths.get(&#34;pdf_base64.txt&#34;));
+    String pdfBase64 = new String(pdfBytes);
+
+    MessageCreateParams params = MessageCreateParams.builder()
+      .model(Model.CLAUDE_OPUS_4_6)
+      .maxTokens(1024)
+      .addUserMessageOfBlockParams(
+        List.of(
+          ContentBlockParam.ofDocument(
+            DocumentBlockParam.builder()
+              .source(Base64PdfSource.builder().data(pdfBase64).build())
+              .cacheControl(CacheControlEphemeral.builder().build())
+              .build()
+          ),
+          ContentBlockParam.ofText(
+            TextBlockParam.builder()
+              .text(
+                &#34;Which model has the highest human preference win rates across each use-case?&#34;
+              )
+              .build()
+          )
+        )
+      )
+      .build();
+
+    Message message = client.messages().create(params);
+    System.out.println(message);
+  }
 }
 ```
 &lt;/CodeGroup&gt;
@@ -848,17 +847,14 @@
                                 &#34;source&#34;: {
                                     &#34;type&#34;: &#34;base64&#34;,
                                     &#34;media_type&#34;: &#34;application/pdf&#34;,
-                                    &#34;data&#34;: pdf_data
-                                }
+                                    &#34;data&#34;: pdf_data,
+                                },
                             },
-                            {
-                                &#34;type&#34;: &#34;text&#34;,
-                                &#34;text&#34;: &#34;Summarize this document.&#34;
-                            }
-                        ]
+                            {&#34;type&#34;: &#34;text&#34;, &#34;text&#34;: &#34;Summarize this document.&#34;},
+                        ],
                     }
-                ]
-            }
+                ],
+            },
         }
     ]
 )
@@ -868,130 +864,139 @@
 const response = await anthropic.messages.batches.create({
   requests: [
     {
-      custom_id: &#39;my-first-request&#39;,
+      custom_id: &#34;my-first-request&#34;,
       params: {
         max_tokens: 1024,
         messages: [
           {
             content: [
               {
-                type: &#39;document&#39;,
+                type: &#34;document&#34;,
                 source: {
-                  media_type: &#39;application/pdf&#39;,
-                  type: &#39;base64&#39;,
-                  data: pdfBase64,
-                },
+                  media_type: &#34;application/pdf&#34;,
+                  type: &#34;base64&#34;,
+                  data: pdfBase64
+                }
               },
               {
-                type: &#39;text&#39;,
-                text: &#39;Which model has the highest human preference win rates across each use-case?&#39;,
-              },
+                type: &#34;text&#34;,
+                text: &#34;Which model has the highest human preference win rates across each use-case?&#34;
+              }
             ],
-            role: &#39;user&#39;,
-          },
+            role: &#34;user&#34;
+          }
         ],
-        model: &#39;claude-opus-4-6&#39;,
-      },
+        model: &#34;claude-opus-4-6&#34;
+      }
     },
     {
-      custom_id: &#39;my-second-request&#39;,
+      custom_id: &#34;my-second-request&#34;,
       params: {
         max_tokens: 1024,
         messages: [
           {
             content: [
               {
-                type: &#39;document&#39;,
+                type: &#34;document&#34;,
                 source: {
-                  media_type: &#39;application/pdf&#39;,
-                  type: &#39;base64&#39;,
-                  data: pdfBase64,
-                },
+                  media_type: &#34;application/pdf&#34;,
+                  type: &#34;base64&#34;,
+                  data: pdfBase64
+                }
               },
               {
-                type: &#39;text&#39;,
-                text: &#39;Extract 5 key insights from this document.&#39;,
-              },
+                type: &#34;text&#34;,
+                text: &#34;Extract 5 key insights from this document.&#34;
+              }
             ],
-            role: &#39;user&#39;,
-          },
+            role: &#34;user&#34;
+          }
         ],
-        model: &#39;claude-opus-4-6&#39;,
-      },
+        model: &#34;claude-opus-4-6&#34;
+      }
     }
-  ],
+  ]
 });
 console.log(response);
 ```
 
 ```java Java
+import com.anthropic.client.AnthropicClient;
+import com.anthropic.client.okhttp.AnthropicOkHttpClient;
+import com.anthropic.models.messages.*;
+import com.anthropic.models.messages.batches.*;
 import java.io.IOException;
 import java.nio.file.Files;
 import java.nio.file.Paths;
 import java.util.List;
 
-import com.anthropic.client.AnthropicClient;
-import com.anthropic.client.okhttp.AnthropicOkHttpClient;
-import com.anthropic.models.messages.*;
-import com.anthropic.models.messages.batches.*;
-
 public class MessagesBatchDocumentExample {
 
-    public static void main(String[] args) throws IOException {
-        AnthropicClient client = AnthropicOkHttpClient.fromEnv();
-
-        // Read PDF file as base64
-        byte[] pdfBytes = Files.readAllBytes(Paths.get(&#34;pdf_base64.txt&#34;));
-        String pdfBase64 = new String(pdfBytes);
-
-        BatchCreateParams params = BatchCreateParams.builder()
-                .addRequest(BatchCreateParams.Request.builder()
-                        .customId(&#34;my-first-request&#34;)
-                        .params(BatchCreateParams.Request.Params.builder()
-                                .model(Model.CLAUDE_OPUS_4_6)
-                                .maxTokens(1024)
-                                .addUserMessageOfBlockParams(List.of(
-                                        ContentBlockParam.ofDocument(
-                                                DocumentBlockParam.builder()
-                                                        .source(Base64PdfSource.builder()
-                                                                .data(pdfBase64)
-                                                                .build())
-                                                        .build()
-                                        ),
-                                        ContentBlockParam.ofText(
-                                                TextBlockParam.builder()
-                                                        .text(&#34;Which model has the highest human preference win rates across each use-case?&#34;)
-                                                        .build()
-                                        )
-                                ))
-                                .build())
-                        .build())
-                .addRequest(BatchCreateParams.Request.builder()
-                        .customId(&#34;my-second-request&#34;)
-                        .params(BatchCreateParams.Request.Params.builder()
-                                .model(Model.CLAUDE_OPUS_4_6)
-                                .maxTokens(1024)
-                                .addUserMessageOfBlockParams(List.of(
-                                        ContentBlockParam.ofDocument(
-                                        DocumentBlockParam.builder()
-                                                .source(Base64PdfSource.builder()
-                                                        .data(pdfBase64)
-                                                        .build())
-                                                .build()
-                                        ),
-                                        ContentBlockParam.ofText(
-                                                TextBlockParam.builder()
-                                                        .text(&#34;Extract 5 key insights from this document.&#34;)
-                                                        .build()
-                                        )
-                                ))
-                                .build())
-                        .build())
-                .build();
-
-        MessageBatch batch = client.messages().batches().create(params);
-        System.out.println(batch);
-    }
+  public static void main(String[] args) throws IOException {
+    AnthropicClient client = AnthropicOkHttpClient.fromEnv();
+
+    // Read PDF file as base64
+    byte[] pdfBytes = Files.readAllBytes(Paths.get(&#34;pdf_base64.txt&#34;));
+    String pdfBase64 = new String(pdfBytes);
+
+    BatchCreateParams params = BatchCreateParams.builder()
+      .addRequest(
+        BatchCreateParams.Request.builder()
+          .customId(&#34;my-first-request&#34;)
+          .params(
+            BatchCreateParams.Request.Params.builder()
+              .model(Model.CLAUDE_OPUS_4_6)
+              .maxTokens(1024)
+              .addUserMessageOfBlockParams(
+                List.of(
+                  ContentBlockParam.ofDocument(
+                    DocumentBlockParam.builder()
+                      .source(Base64PdfSource.builder().data(pdfBase64).build())
+                      .build()
+                  ),
+                  ContentBlockParam.ofText(
+                    TextBlockParam.builder()
+                      .text(
+                        &#34;Which model has the highest human preference win rates across each use-case?&#34;
+                      )
+                      .build()
+                  )
+                )
+              )
+              .build()
+          )
+          .build()
+      )
+      .addRequest(
+        BatchCreateParams.Request.builder()
+          .customId(&#34;my-second-request&#34;)
+          .params(
+            BatchCreateParams.Request.Params.builder()
+              .model(Model.CLAUDE_OPUS_4_6)
+              .maxTokens(1024)
+              .addUserMessageOfBlockParams(
+                List.of(
+                  ContentBlockParam.ofDocument(
+                    DocumentBlockParam.builder()
+                      .source(Base64PdfSource.builder().data(pdfBase64).build())
+                      .build()
+                  ),
+                  ContentBlockParam.ofText(
+                    TextBlockParam.builder()
+                      .text(&#34;Extract 5 key insights from this document.&#34;)
+                      .build()
+                  )
+                )
+              )
+              .build()
+          )
+          .build()
+      )
+      .build();
+
+    MessageBatch batch = client.messages().batches().create(params);
+    System.out.println(batch);
+  }
 }
 ```
 &lt;/CodeGroup&gt;
</code></pre>
    </div>
</body>
</html>