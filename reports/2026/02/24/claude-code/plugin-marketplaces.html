<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>plugin-marketplaces - Diff Report</title>
    <link rel="stylesheet" href="../../css/diff.css">
    <style>
        :root {
            --bg-color: #1a1a2e;
            --card-bg: #16213e;
            --text-color: #eee;
            --accent: #0f3460;
            --add-bg: #1a4d1a;
            --del-bg: #4d1a1a;
            --add-text: #4ade80;
            --del-text: #f87171;
        }
        @media (prefers-color-scheme: light) {
            :root {
                --bg-color: #f5f5f5;
                --card-bg: #fff;
                --text-color: #333;
                --accent: #e0e0e0;
                --add-bg: #d4edda;
                --del-bg: #f8d7da;
                --add-text: #155724;
                --del-text: #721c24;
            }
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 2rem;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { margin-bottom: 2rem; }
        h1 { font-size: 1.5rem; margin-bottom: 0.5rem; }
        .meta { color: #888; font-size: 0.9rem; }
        .summary {
            background: var(--card-bg);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            display: flex;
            gap: 2rem;
        }
        .stat { display: flex; align-items: center; gap: 0.5rem; }
        .stat.added { color: var(--add-text); }
        .stat.removed { color: var(--del-text); }
        .analysis {
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid #8b5cf6;
        }
        .analysis-header {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #8b5cf6;
        }
        .analysis-content {
            white-space: pre-wrap;
            font-size: 0.95rem;
            line-height: 1.7;
        }
        .diff-container {
            background: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
        }
        .diff-header {
            background: var(--accent);
            padding: 0.75rem 1rem;
            font-weight: 600;
        }
        .diff-content {
            padding: 1rem;
            overflow-x: auto;
        }
        .diff-content ins {
            background: var(--add-bg);
            color: var(--add-text);
            text-decoration: none;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        .diff-content del {
            background: var(--del-bg);
            color: var(--del-text);
            text-decoration: line-through;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        pre {
            background: var(--accent);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.85rem;
            margin-top: 2rem;
        }
        a { color: #60a5fa; }
        .back-link { margin-bottom: 1rem; display: inline-block; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">&larr; Back to daily report</a>

        <header>
            <h1>plugin-marketplaces.md</h1>
            <p class="meta">Changed on 2026-02-24 23:16:22 EST</p>
        </header>

        <div class="summary">
            <div class="stat added">
                <span>+21</span> lines added
            </div>
            <div class="stat removed">
                <span>-1</span> lines removed
            </div>
        </div>

        

        <div class="diff-container">
            <div class="diff-header">Visual Diff</div>
            <div class="diff-content"><span>&gt; ## Documentation Index&para;<br>&gt; Fetch the complete documentation index at: https://code.claude.com/docs/llms.txt&para;<br>&gt; Use this file to discover all available pages before exploring further.&para;<br>&para;<br># Create and distribute a plugin marketplace&para;<br>&para;<br>&gt; Build and host plugin marketplaces to distribute Claude Code extensions across teams and communities.&para;<br>&para;<br>A **plugin marketplace** is a catalog that lets you distribute plugins to others. Marketplaces provide centralized discovery, version tracking, automatic updates, and support for multiple source types (git repositories, local paths, and more). This guide shows you how to create your own marketplace to share plugins with your team or community.&para;<br>&para;<br>Looking to install plugins from an existing marketplace? See [Discover and install prebuilt plugins](/en/discover-plugins).&para;<br>&para;<br>## Overview&para;<br>&para;<br>Creating and distributing a marketplace involves:&para;<br>&para;<br>1. **Creating plugins**: build one or more plugins with commands, agents, hooks, MCP servers, or LSP servers. This guide assumes you already have plugins to distribute; see [Create plugins](/en/plugins) for details on how to create them.&para;<br>2. **Creating a marketplace file**: define a `marketplace.json` that lists your plugins and where to find them (see [Create the marketplace file](#create-the-marketplace-file)).&para;<br>3. **Host the marketplace**: push to GitHub, GitLab, or another git host (see [Host and distribute marketplaces](#host-and-distribute-marketplaces)).&para;<br>4. **Share with users**: users add your marketplace with `/plugin marketplace add` and install individual plugins (see [Discover and install plugins](/en/discover-plugins)).&para;<br>&para;<br>Once your marketplace is live, you can update it by pushing changes to your repository. Users refresh their local copy with `/plugin marketplace update`.&para;<br>&para;<br>## Walkthrough: create a local marketplace&para;<br>&para;<br>This example creates a marketplace with one plugin: a `/review` skill for code reviews. You'll create the directory structure, add a skill, create the plugin manifest and marketplace catalog, then install and test it.&para;<br>&para;<br>&lt;Steps&gt;&para;<br>  &lt;Step title="Create the directory structure"&gt;&para;<br>    ```bash  theme={null}&para;<br>    mkdir -p my-marketplace/.claude-plugin&para;<br>    mkdir -p my-marketplace/plugins/review-plugin/.claude-plugin&para;<br>    mkdir -p my-marketplace/plugins/review-plugin/skills/review&para;<br>    ```&para;<br>  &lt;/Step&gt;&para;<br>&para;<br>  &lt;Step title="Create the skill"&gt;&para;<br>    Create a `SKILL.md` file that defines what the `/review` skill does.&para;<br>&para;<br>    ```markdown my-marketplace/plugins/review-plugin/skills/review/SKILL.md theme={null}&para;<br>    ---&para;<br>    description: Review code for bugs, security, and performance&para;<br>    disable-model-invocation: true&para;<br>    ---&para;<br>&para;<br>    Review the code I've selected or the recent changes for:&para;<br>    - Potential bugs or edge cases&para;<br>    - Security concerns&para;<br>    - Performance issues&para;<br>    - Readability improvements&para;<br>&para;<br>    Be concise and actionable.&para;<br>    ```&para;<br>  &lt;/Step&gt;&para;<br>&para;<br>  &lt;Step title="Create the plugin manifest"&gt;&para;<br>    Create a `plugin.json` file that describes the plugin. The manifest goes in the `.claude-plugin/` directory.&para;<br>&para;<br>    ```json my-marketplace/plugins/review-plugin/.claude-plugin/plugin.json theme={null}&para;<br>    {&para;<br>      "name": "review-plugin",&para;<br>      "description": "Adds a /review skill for quick code reviews",&para;<br>      "version": "1.0.0"&para;<br>    }&para;<br>    ```&para;<br>  &lt;/Step&gt;&para;<br>&para;<br>  &lt;Step title="Create the marketplace file"&gt;&para;<br>    Create the marketplace catalog that lists your plugin.&para;<br>&para;<br>    ```json my-marketplace/.claude-plugin/marketplace.json theme={null}&para;<br>    {&para;<br>      "name": "my-plugins",&para;<br>      "owner": {&para;<br>        "name": "Your Name"&para;<br>      },&para;<br>      "plugins": [&para;<br>        {&para;<br>          "name": "review-plugin",&para;<br>          "source": "./plugins/review-plugin",&para;<br>          "description": "Adds a /review skill for quick code reviews"&para;<br>        }&para;<br>      ]&para;<br>    }&para;<br>    ```&para;<br>  &lt;/Step&gt;&para;<br>&para;<br>  &lt;Step title="Add and install"&gt;&para;<br>    Add the marketplace and install the plugin.&para;<br>&para;<br>    ```shell  theme={null}&para;<br>    /plugin marketplace add ./my-marketplace&para;<br>    /plugin install review-plugin@my-plugins&para;<br>    ```&para;<br>  &lt;/Step&gt;&para;<br>&para;<br>  &lt;Step title="Try it out"&gt;&para;<br>    Select some code in your editor and run your new command.&para;<br>&para;<br>    ```shell  theme={null}&para;<br>    /review&para;<br>    ```&para;<br>  &lt;/Step&gt;&para;<br>&lt;/Steps&gt;&para;<br>&para;<br>To learn more about what plugins can do, including hooks, agents, MCP servers, and LSP servers, see [Plugins](/en/plugins).&para;<br>&para;<br>&lt;Note&gt;&para;<br>  **How plugins are installed**: When users install a plugin, Claude Code copies the plugin directory to a cache location. This means plugins can't reference files outside their directory using paths like `../shared-utils`, because those files won't be copied.&para;<br>&para;<br>  If you need to share files across plugins, use symlinks (which are followed during copying). See [Plugin caching and file resolution](/en/plugins-reference#plugin-caching-and-file-resolution) for details.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>## Create the marketplace file&para;<br>&para;<br>Create `.claude-plugin/marketplace.json` in your repository root. This file defines your marketplace's name, owner information, and a list of plugins with their sources.&para;<br>&para;<br>Each plugin entry needs at minimum a `name` and `source` (where to fetch it from). See the [full schema](#marketplace-schema) below for all available fields.&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "name": "company-tools",&para;<br>  "owner": {&para;<br>    "name": "DevTools Team",&para;<br>    "email": "devtools@example.com"&para;<br>  },&para;<br>  "plugins": [&para;<br>    {&para;<br>      "name": "code-formatter",&para;<br>      "source": "./plugins/formatter",&para;<br>      "description": "Automatic code formatting on save",&para;<br>      "version": "2.1.0",&para;<br>      "author": {&para;<br>        "name": "DevTools Team"&para;<br>      }&para;<br>    },&para;<br>    {&para;<br>      "name": "deployment-tools",&para;<br>      "source": {&para;<br>        "source": "github",&para;<br>        "repo": "company/deploy-plugin"&para;<br>      },&para;<br>      "description": "Deployment automation tools"&para;<br>    }&para;<br>  ]&para;<br>}&para;<br>```&para;<br>&para;<br>## Marketplace schema&para;<br>&para;<br>### Required fields&para;<br>&para;<br>| Field     | Type   | Description                                                                                                                                                            | Example        |&para;<br>| :-------- | :----- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------- |&para;<br>| `name`    | string | Marketplace identifier (kebab-case, no spaces). This is public-facing: users see it when installing plugins (for example, `/plugin install my-tool@your-marketplace`). | `"acme-tools"` |&para;<br>| `owner`   | object | Marketplace maintainer information ([see fields below](#owner-fields))                                                                                                 |                |&para;<br>| `plugins` | array  | List of available plugins                                                                                                                                              | See below      |&para;<br>&para;<br>&lt;Note&gt;&para;<br>  **Reserved names**: The following marketplace names are reserved for official Anthropic use and cannot be used by third-party marketplaces: `claude-code-marketplace`, `claude-code-plugins`, `claude-plugins-official`, `anthropic-marketplace`, `anthropic-plugins`, `agent-skills`, `life-sciences`. Names that impersonate official marketplaces (like `official-claude-plugins` or `anthropic-tools-v2`) are also blocked.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>### Owner fields&para;<br>&para;<br>| Field   | Type   | Required | Description                      |&para;<br>| :------ | :----- | :------- | :------------------------------- |&para;<br>| `name`  | string | Yes      | Name of the maintainer or team   |&para;<br>| `email` | string | No       | Contact email for the maintainer |&para;<br>&para;<br>### Optional metadata&para;<br>&para;<br>| Field                  | Type   | Description                                                                                                                                                               |&para;<br>| :--------------------- | :----- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |&para;<br>| `metadata.description` | string | Brief marketplace description                                                                                                                                             |&para;<br>| `metadata.version`     | string | Marketplace version                                                                                                                                                       |&para;<br>| `metadata.pluginRoot`  | string | Base directory prepended to relative plugin source paths (for example, `"./plugins"` lets you write `"source": "formatter"` instead of `"source": "./plugins/formatter"`) |&para;<br>&para;<br>## Plugin entries&para;<br>&para;<br>Each plugin entry in the `plugins` array describes a plugin and where to find it. You can include any field from the [plugin manifest schema](/en/plugins-reference#plugin-manifest-schema) (like `description`, `version`, `author`, `commands`, `hooks`, etc.), plus these marketplace-specific fields: `source`, `category`, `tags`, and `strict`.&para;<br>&para;<br>### Required fields&para;<br>&para;<br>| Field    | Type           | Description                                                                                                                                            |&para;<br>| :------- | :------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------- |&para;<br>| `name`   | string         | Plugin identifier (kebab-case, no spaces). This is public-facing: users see it when installing (for example, `/plugin install my-plugin@marketplace`). |&para;<br>| `source` | string\|object | Where to fetch the plugin from (see [Plugin sources](#plugin-sources) below)                                                                           |&para;<br>&para;<br>### Optional plugin fields&para;<br>&para;<br>**Standard metadata fields:**&para;<br>&para;<br>| Field         | Type    | Description                                                                                                                       |&para;<br>| :------------ | :------ | :-------------------------------------------------------------------------------------------------------------------------------- |&para;<br>| `description` | string  | Brief plugin description                                                                                                          |&para;<br>| `version`     | string  | Plugin version                                                                                                                    |&para;<br>| `author`      | object  | Plugin author information (`name` required, `email` optional)                                                                     |&para;<br>| `homepage`    | string  | Plugin homepage or documentation URL                                                                                              |&para;<br>| `repository`  | string  | Source code repository URL                                                                                                        |&para;<br>| `license`     | string  | SPDX license identifier (for example, MIT, Apache-2.0)                                                                            |&para;<br>| `keywords`    | array   | Tags for plugin discovery and categorization                                                                                      |&para;<br>| `category`    | string  | Plugin category for organization                                                                                                  |&para;<br>| `tags`        | array   | Tags for searchability                                                                                                            |&para;<br>| `strict`      | boolean | Controls whether `plugin.json` is the authority for component definitions (default: true). See [Strict mode](#strict-mode) below. |&para;<br>&para;<br>**Component configuration fields:**&para;<br>&para;<br>| Field        | Type           | Description                                      |&para;<br>| :----------- | :------------- | :----------------------------------------------- |&para;<br>| `commands`   | string\|array  | Custom paths to command files or directories     |&para;<br>| `agents`     | string\|array  | Custom paths to agent files                      |&para;<br>| `hooks`      | string\|object | Custom hooks configuration or path to hooks file |&para;<br>| `mcpServers` | string\|object | MCP server configurations or path to MCP config  |&para;<br>| `lspServers` | string\|object | LSP server configurations or path to LSP config  |&para;<br>&para;<br>## Plugin sources&para;<br>&para;<br>Plugin sources tell Claude Code where to fetch each individual plugin listed in your marketplace. These are set in the `source` field of each plugin entry in `marketplace.json`.&para;<br>&para;<br>Once a plugin is cloned or copied into the local machine, it is copied into the local versioned plugin cache at `~/.claude/plugins/cache`.&para;<br>&para;<br>| Source        | Type                            | Fields                                | Notes                                                             |&para;<br>| ------------- | ------------------------------- | ------------------------------------- | ----------------------------------------------------------------- |&para;<br>| Relative path | `string` (e.g. `"./my-plugin"`) | —                                     | Local directory within the marketplace repo. Must start with `./` |&para;<br>| `github`      | object                          | `repo`, `ref?`, `sha?`                |                                                                   |&para;<br>| `url`         | object                          | `url` (must end .git), `ref?`, `sha?` | Git URL source                                                    |&para;<br>| `npm`         | object                          | `package`, `version?`, `registry?`    | Installed via `npm install`                                       |&para;<br>| `pip`         | object                          | `package`, `version?`, `registry?`    | Installed via pip                                                 |&para;<br>&para;<br>&lt;Note&gt;&para;<br>  **Marketplace sources vs plugin sources**: These are different concepts that control different things.&para;<br>&para;<br>  * **Marketplace source** — where to fetch the `marketplace.json` catalog itself. Set when users run `/plugin marketplace add` or in `extraKnownMarketplaces` settings. Supports `ref` (branch/tag) but not `sha`.&para;<br>  * **Plugin source** — where to fetch an individual plugin listed in the marketplace. Set in the `source` field of each plugin entry inside `marketplace.json`. Supports both `ref` (branch/tag) and `sha` (exact commit).&para;<br>&para;<br>  For example, a marketplace hosted at `acme-corp/plugin-catalog` (marketplace source) can list a plugin fetched from `acme-corp/code-formatter` (plugin source). The marketplace source and plugin source point to different repositories and are pinned independently.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>### Relative paths&para;<br>&para;<br>For plugins in the same repository:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "name": "my-plugin",&para;<br>  "source": "./plugins/my-plugin"&para;<br>}&para;<br>```&para;<br>&para;<br>&lt;Note&gt;&para;<br>  Relative paths only work when users add your marketplace via Git (GitHub, GitLab, or git URL). If users add your marketplace via a direct URL to the `marketplace.json` file, relative paths will not resolve correctly. For URL-based distribution, use GitHub, npm, or git URL sources instead. See [Troubleshooting](#plugins-with-relative-paths-fail-in-url-based-marketplaces) for details.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>### GitHub repositories&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "name": "github-plugin",&para;<br>  "source": {&para;<br>    "source": "github",&para;<br>    "repo": "owner/plugin-repo"&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>You can pin to a specific branch, tag, or commit:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "name": "github-plugin",&para;<br>  "source": {&para;<br>    "source": "github",&para;<br>    "repo": "owner/plugin-repo",&para;<br>    "ref": "v2.0.0",&para;<br>    "sha": "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0"&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>| Field  | Type   | Description                                                           |&para;<br>| :----- | :----- | :-------------------------------------------------------------------- |&para;<br>| `repo` | string | Required. GitHub repository in `owner/repo` format                    |&para;<br>| `ref`  | string | Optional. Git branch or tag (defaults to repository default branch)   |&para;<br>| `sha`  | string | Optional. Full 40-character git commit SHA to pin to an exact version |&para;<br>&para;<br>### Git repositories&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "name": "git-plugin",&para;<br>  "source": {&para;<br>    "source": "url",&para;<br>    "url": "https://gitlab.com/team/plugin.git"&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>You can pin to a specific branch, tag, or commit:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "name": "git-plugin",&para;<br>  "source": {&para;<br>    "source": "url",&para;<br>    "url": "https://gitlab.com/team/plugin.git",&para;<br>    "ref": "main",&para;<br>    "sha": "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0"&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>| Field | Type   | Description                                                           |&para;<br>| :---- | :----- | :-------------------------------------------------------------------- |&para;<br>| `url` | string | Required. Full git repository URL (must end with `.git`)              |&para;<br>| `ref` | string | Optional. Git branch or tag (defaults to repository default branch)   |&para;<br>| `sha` | string | Optional. Full 40-character git commit SHA to pin to an exact version |&para;<br>&para;<br></span><ins style="background:#e6ffe6;">### npm packages&para;<br>&para;<br>Plugins distributed as npm packages are installed using `npm install`. This works with any package on the public npm registry or a private registry your team hosts.&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "name": "my-npm-plugin",&para;<br>  "source": {&para;<br>    "source": "npm",&para;<br>    "package": "@acme/claude-plugin"&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>To pin to a specific version, add the `version` field:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "name": "my-npm-plugin",&para;<br>  "source": {&para;<br>    "source": "npm",&para;<br>    "package": "@acme/claude-plugin",&para;<br>    "version": "2.1.0"&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>To install from a private or internal registry, add the `registry` field:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "name": "my-npm-plugin",&para;<br>  "source": {&para;<br>    "source": "npm",&para;<br>    "package": "@acme/claude-plugin",&para;<br>    "version": "^2.0.0",&para;<br>    "registry": "https://npm.example.com"&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>| Field      | Type   | Description                                                                                  |&para;<br>| :--------- | :----- | :------------------------------------------------------------------------------------------- |&para;<br>| `package`  | string | Required. Package name or scoped package (for example, `@org/plugin`)                        |&para;<br>| `version`  | string | Optional. Version or version range (for example, `2.1.0`, `^2.0.0`, `~1.5.0`)                |&para;<br>| `registry` | string | Optional. Custom npm registry URL. Defaults to the system npm registry (typically npmjs.org) |&para;<br>&para;<br></ins><span>### Advanced plugin entries&para;<br>&para;<br>This example shows a plugin entry using many of the optional fields, including custom paths for commands, agents, hooks, and MCP servers:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "name": "enterprise-tools",&para;<br>  "source": {&para;<br>    "source": "github",&para;<br>    "repo": "company/enterprise-plugin"&para;<br>  },&para;<br>  "description": "Enterprise workflow automation tools",&para;<br>  "version": "2.1.0",&para;<br>  "author": {&para;<br>    "name": "Enterprise Team",&para;<br>    "email": "enterprise@example.com"&para;<br>  },&para;<br>  "homepage": "https://docs.example.com/plugins/enterprise-tools",&para;<br>  "repository": "https://github.com/company/enterprise-plugin",&para;<br>  "license": "MIT",&para;<br>  "keywords": ["enterprise", "workflow", "automation"],&para;<br>  "category": "productivity",&para;<br>  "commands": [&para;<br>    "./commands/core/",&para;<br>    "./commands/enterprise/",&para;<br>    "./commands/experimental/preview.md"&para;<br>  ],&para;<br>  "agents": ["./agents/security-reviewer.md", "./agents/compliance-checker.md"],&para;<br>  "hooks": {&para;<br>    "PostToolUse": [&para;<br>      {&para;<br>        "matcher": "Write|Edit",&para;<br>        "hooks": [&para;<br>          {&para;<br>            "type": "command",&para;<br>            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh"&para;<br>          }&para;<br>        ]&para;<br>      }&para;<br>    ]&para;<br>  },&para;<br>  "mcpServers": {&para;<br>    "enterprise-db": {&para;<br>      "command": "${CLAUDE_PLUGIN_ROOT}/servers/db-server",&para;<br>      "args": ["--config", "${CLAUDE_PLUGIN_ROOT}/config.json"]&para;<br>    }&para;<br>  },&para;<br>  "strict": false&para;<br>}&para;<br>```&para;<br>&para;<br>Key things to notice:&para;<br>&para;<br>* **`commands` and `agents`**: You can specify multiple directories or individual files. Paths are relative to the plugin root.&para;<br>* **`${CLAUDE_PLUGIN_ROOT}`**: Use this variable in hooks and MCP server configs to reference files within the plugin's installation directory. This is necessary because plugins are copied to a cache location when installed.&para;<br>* **`strict: false`**: Since this is set to false, the plugin doesn't need its own `plugin.json`. The marketplace entry defines everything. See [Strict mode](#strict-mode) below.&para;<br>&para;<br>### Strict mode&para;<br>&para;<br>The `strict` field controls whether `plugin.json` is the authority for component definitions (commands, agents, hooks, skills, MCP servers, output styles).&para;<br>&para;<br>| Value            | Behavior                                                                                                                                                         |&para;<br>| :--------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------- |&para;<br>| `true` (default) | `plugin.json` is the authority. The marketplace entry can supplement it with additional components, and both sources are merged.                                 |&para;<br>| `false`          | The marketplace entry is the entire definition. If the plugin also has a `plugin.json` that declares components, that's a conflict and the plugin fails to load. |&para;<br>&para;<br>**When to use each mode:**&para;<br>&para;<br>* **`strict: true`**: the plugin has its own `plugin.json` and manages its own components. The marketplace entry can add extra commands or hooks on top. This is the default and works for most plugins.&para;<br>* **`strict: false`**: the marketplace operator wants full control. The plugin repo provides raw files, and the marketplace entry defines which of those files are exposed as commands, agents, hooks, etc. Useful when the marketplace restructures or curates a plugin's components differently than the plugin author intended.&para;<br>&para;<br>## Host and distribute marketplaces&para;<br>&para;<br>### Host on GitHub (recommended)&para;<br>&para;<br>GitHub provides the easiest distribution method:&para;<br>&para;<br>1. **Create a repository**: Set up a new repository for your marketplace&para;<br>2. **Add marketplace file**: Create `.claude-plugin/marketplace.json` with your plugin definitions&para;<br>3. **Share with teams**: Users add your marketplace with `/plugin marketplace add owner/repo`&para;<br>&para;<br>**Benefits**: Built-in version control, issue tracking, and team collaboration features.&para;<br>&para;<br>### Host on other git services&para;<br>&para;<br>Any git hosting service works, such as GitLab, Bitbucket, and self-hosted servers. Users add with the full repository URL:&para;<br>&para;<br>```shell  theme={null}&para;<br>/plugin marketplace add https://gitlab.com/company/plugins.git&para;<br>```&para;<br>&para;<br>### Private repositories&para;<br>&para;<br>Claude Code supports installing plugins from private repositories. For manual installation and updates, Claude Code uses your existing git credential helpers. If `git clone` works for a private repository in your terminal, it works in Claude Code too. Common credential helpers include `gh auth login` for GitHub, macOS Keychain, and `git-credential-store`.&para;<br>&para;<br>Background auto-updates run at startup without credential helpers, since interactive prompts would block Claude Code from starting. To enable auto-updates for private marketplaces, set the appropriate authentication token in your environment:&para;<br>&para;<br>| Provider  | Environment variables        | Notes                                     |&para;<br>| :-------- | :--------------------------- | :---------------------------------------- |&para;<br>| GitHub    | `GITHUB_TOKEN` or `GH_TOKEN` | Personal access token or GitHub App token |&para;<br>| GitLab    | `GITLAB_TOKEN` or `GL_TOKEN` | Personal access token or project token    |&para;<br>| Bitbucket | `BITBUCKET_TOKEN`            | App password or repository access token   |&para;<br>&para;<br>Set the token in your shell configuration (for example, `.bashrc`, `.zshrc`) or pass it when running Claude Code:&para;<br>&para;<br>```bash  theme={null}&para;<br>export GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxx&para;<br>```&para;<br>&para;<br>&lt;Note&gt;&para;<br>  For CI/CD environments, configure the token as a secret environment variable. GitHub Actions automatically provides `GITHUB_TOKEN` for repositories in the same organization.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>### Test locally before distribution&para;<br>&para;<br>Test your marketplace locally before sharing:&para;<br>&para;<br>```shell  theme={null}&para;<br>/plugin marketplace add ./my-local-marketplace&para;<br>/plugin install test-plugin@my-local-marketplace&para;<br>```&para;<br>&para;<br>For the full range of add commands (GitHub, Git URLs, local paths, remote URLs), see [Add marketplaces](/en/discover-plugins#add-marketplaces).&para;<br>&para;<br>### Require marketplaces for your team&para;<br>&para;<br>You can configure your repository so team members are automatically prompted to install your marketplace when they trust the project folder. Add your marketplace to `.claude/settings.json`:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "extraKnownMarketplaces": {&para;<br>    "company-tools": {&para;<br>      "source": {&para;<br>        "source": "github",&para;<br>        "repo": "your-org/claude-plugins"&para;<br>      }&para;<br>    }&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>You can also specify which plugins should be enabled by default:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "enabledPlugins": {&para;<br>    "code-formatter@company-tools": true,&para;<br>    "deployment-tools@company-tools": true&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>For full configuration options, see [Plugin settings](/en/settings#plugin-settings).&para;<br>&para;<br>### Managed marketplace restrictions&para;<br>&para;<br>For organizations requiring strict control over plugin sources, administrators can restrict which plugin marketplaces users are allowed to add using the [`strictKnownMarketplaces`](/en/settings#strictknownmarketplaces) setting in managed settings.&para;<br>&para;<br>When `strictKnownMarketplaces` is configured in managed settings, the restriction behavior depends on the value:&para;<br>&para;<br>| Value               | Behavior                                                         |&para;<br>| ------------------- | ---------------------------------------------------------------- |&para;<br>| Undefined (default) | No restrictions. Users can add any marketplace                   |&para;<br>| Empty array `[]`    | Complete lockdown. Users cannot add any new marketplaces         |&para;<br>| List of sources     | Users can only add marketplaces that match the allowlist exactly |&para;<br>&para;<br>#### Common configurations&para;<br>&para;<br>Disable all marketplace additions:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "strictKnownMarketplaces": []&para;<br>}&para;<br>```&para;<br>&para;<br>Allow specific marketplaces only:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "strictKnownMarketplaces": [&para;<br>    {&para;<br>      "source": "github",&para;<br>      "repo": "acme-corp/approved-plugins"&para;<br>    },&para;<br>    {&para;<br>      "source": "github",&para;<br>      "repo": "acme-corp/security-tools",&para;<br>      "ref": "v2.0"&para;<br>    },&para;<br>    {&para;<br>      "source": "url",&para;<br>      "url": "https://plugins.example.com/marketplace.json"&para;<br>    }&para;<br>  ]&para;<br>}&para;<br>```&para;<br>&para;<br>Allow all marketplaces from an internal git server using regex pattern matching:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "strictKnownMarketplaces": [&para;<br>    {&para;<br>      "source": "hostPattern",&para;<br>      "hostPattern": "^github\\.example\\.com$"&para;<br>    }&para;<br>  ]&para;<br>}&para;<br>```&para;<br>&para;<br>#### How restrictions work&para;<br>&para;<br>Restrictions are validated early in the plugin installation process, before any network requests or filesystem operations occur. This prevents unauthorized marketplace access attempts.&para;<br>&para;<br>The allowlist uses exact matching for most source types. For a marketplace to be allowed, all specified fields must match exactly:&para;<br>&para;<br>* For GitHub sources: `repo` is required, and `ref` or `path` must also match if specified in the allowlist&para;<br>* For URL sources: the full URL must match exactly&para;<br>* For `hostPattern` sources: the marketplace host is matched against the regex pattern&para;<br>&para;<br>Because `strictKnownMarketplaces` is set in [managed settings](/en/settings#settings-files), individual users and project configurations cannot override these restrictions.&para;<br>&para;<br>For complete configuration details including all supported source types and comparison with `extraKnownMarketplaces`, see the [strictKnownMarketplaces reference](/en/settings#strictknownmarketplaces).&para;<br>&para;<br>### Version resolution and release channels&para;<br>&para;<br>Plugin versions determine cache paths and update detection. You can specify the version in the plugin manifest (`plugin.json`) or in the marketplace entry (`marketplace.json`).&para;<br>&para;<br>&lt;Warning&gt;&para;<br>  When possible, avoid setting the version in both places. The plugin manifest always wins silently, which can cause the marketplace version to be ignored. For relative-path plugins, set the version in the marketplace entry. For all other plugin sources, set it in the plugin manifest.&para;<br>&lt;/Warning&gt;&para;<br>&para;<br>#### Set up release channels&para;<br>&para;<br>To support "stable" and "latest" release channels for your plugins, you can set up two marketplaces that point to different refs or SHAs of the same repo. You can then assign the two marketplaces to different user groups through [managed settings](/en/settings#settings-files).&para;<br>&para;<br>&lt;Warning&gt;&para;<br>  The plugin's `plugin.json` must declare a different `version` at each pinned ref or commit. If two refs or commits have the same manifest version, Claude Code treats them as identical and skips the update.&para;<br>&lt;/Warning&gt;&para;<br>&para;<br>##### Example&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "name": "stable-tools",&para;<br>  "plugins": [&para;<br>    {&para;<br>      "name": "code-formatter",&para;<br>      "source": {&para;<br>        "source": "github",&para;<br>        "repo": "acme-corp/code-formatter",&para;<br>        "ref": "stable"&para;<br>      }&para;<br>    }&para;<br>  ]&para;<br>}&para;<br>```&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "name": "latest-tools",&para;<br>  "plugins": [&para;<br>    {&para;<br>      "name": "code-formatter",&para;<br>      "source": {&para;<br>        "source": "github",&para;<br>        "repo": "acme-corp/code-formatter",&para;<br>        "ref": "latest"&para;<br>      }&para;<br>    }&para;<br>  ]&para;<br>}&para;<br>```&para;<br>&para;<br>##### Assign channels to user groups&para;<br>&para;<br>Assign each marketplace to the appropriate user group through managed settings. For example, the stable group receives:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "extraKnownMarketplaces": {&para;<br>    "stable-tools": {&para;<br>      "source": {&para;<br>        "source": "github",&para;<br>        "repo": "acme-corp/stable-tools"&para;<br>      }&para;<br>    }&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>The early-access group receives `latest-tools` instead:&para;<br>&para;<br>```json  theme={null}&para;<br>{&para;<br>  "extraKnownMarketplaces": {&para;<br>    "latest-tools": {&para;<br>      "source": {&para;<br>        "source": "github",&para;<br>        "repo": "acme-corp/latest-tools"&para;<br>      }&para;<br>    }&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>## Validation and testing&para;<br>&para;<br>Test your marketplace before sharing.&para;<br>&para;<br>Validate your marketplace JSON syntax:&para;<br>&para;<br>```bash  theme={null}&para;<br>claude plugin validate .&para;<br>```&para;<br>&para;<br>Or from within Claude Code:&para;<br>&para;<br>```shell  theme={null}&para;<br>/plugin validate .&para;<br>```&para;<br>&para;<br>Add the marketplace for testing:&para;<br>&para;<br>```shell  theme={null}&para;<br>/plugin marketplace add ./path/to/marketplace&para;<br>```&para;<br>&para;<br>Install a test plugin to verify everything works:&para;<br>&para;<br>```shell  theme={null}&para;<br>/plugin install test-plugin@marketplace-name&para;<br>```&para;<br>&para;<br>For complete plugin testing workflows, see [Test your plugins locally](/en/plugins#test-your-plugins-locally). For technical troubleshooting, see [Plugins reference](/en/plugins-reference).&para;<br>&para;<br>## Troubleshooting&para;<br>&para;<br>### Marketplace not loading&para;<br>&para;<br>**Symptoms**: Can't add marketplace or see plugins from it&para;<br>&para;<br>**Solutions**:&para;<br>&para;<br>* Verify the marketplace URL is accessible&para;<br>* Check that `.claude-plugin/marketplace.json` exists at the specified path&para;<br>* Ensure JSON syntax is valid using `claude plugin validate` or `/plugin validate`&para;<br>* For private repositories, confirm you have access permissions&para;<br>&para;<br>### Marketplace validation errors&para;<br>&para;<br>Run `claude plugin validate .` or `/plugin validate .` from your marketplace directory to check for issues. Common errors:&para;<br>&para;<br>| Error                                             | Cause                           | Solution                                                      |&para;<br>| :------------------------------------------------ | :------------------------------ | :------------------------------------------------------------ |&para;<br>| `File not found: .claude-plugin/marketplace.json` | Missing manifest                | Create `.claude-plugin/marketplace.json` with required fields |&para;<br>| `Invalid JSON syntax: Unexpected token...`        | JSON syntax error               | Check for missing commas, extra commas, or unquoted strings   |&para;<br>| `Duplicate plugin name "x" found in marketplace`  | Two plugins share the same name | Give each plugin a unique `name` value                        |&para;<br>| `plugins[0].source: Path traversal not allowed`   | Source path contains `..`       | Use paths relative to marketplace root without `..`           |&para;<br>&para;<br>**Warnings** (non-blocking):&para;<br>&para;<br>* `Marketplace has no plugins defined`: add at least one plugin to the `plugins` array&para;<br>* `No marketplace description provided`: add `metadata.description` to help users understand your marketplace</span><del style="background:#ffe6e6;">&para;<br>* `Plugin "x" uses npm source which is not yet fully implemented`: use `github` or local path sources instead</del><span>&para;<br>&para;<br>### Plugin installation failures&para;<br>&para;<br>**Symptoms**: Marketplace appears but plugin installation fails&para;<br>&para;<br>**Solutions**:&para;<br>&para;<br>* Verify plugin source URLs are accessible&para;<br>* Check that plugin directories contain required files&para;<br>* For GitHub sources, ensure repositories are public or you have access&para;<br>* Test plugin sources manually by cloning/downloading&para;<br>&para;<br>### Private repository authentication fails&para;<br>&para;<br>**Symptoms**: Authentication errors when installing plugins from private repositories&para;<br>&para;<br>**Solutions**:&para;<br>&para;<br>For manual installation and updates:&para;<br>&para;<br>* Verify you're authenticated with your git provider (for example, run `gh auth status` for GitHub)&para;<br>* Check that your credential helper is configured correctly: `git config --global credential.helper`&para;<br>* Try cloning the repository manually to verify your credentials work&para;<br>&para;<br>For background auto-updates:&para;<br>&para;<br>* Set the appropriate token in your environment: `echo $GITHUB_TOKEN`&para;<br>* Check that the token has the required permissions (read access to the repository)&para;<br>* For GitHub, ensure the token has the `repo` scope for private repositories&para;<br>* For GitLab, ensure the token has at least `read_repository` scope&para;<br>* Verify the token hasn't expired&para;<br>&para;<br></span><ins style="background:#e6ffe6;">### Git operations time out&para;<br>&para;<br>**Symptoms**: Plugin installation or marketplace updates fail with a timeout error like "Git clone timed out after 120s" or "Git pull timed out after 120s".&para;<br>&para;<br>**Cause**: Claude Code uses a 120-second timeout for all git operations, including cloning plugin repositories and pulling marketplace updates. Large repositories or slow network connections may exceed this limit.&para;<br>&para;<br>**Solution**: Increase the timeout using the `CLAUDE_CODE_PLUGIN_GIT_TIMEOUT_MS` environment variable. The value is in milliseconds:&para;<br>&para;<br>```bash  theme={null}&para;<br>export CLAUDE_CODE_PLUGIN_GIT_TIMEOUT_MS=300000  # 5 minutes&para;<br>```&para;<br>&para;<br></ins><span>### Plugins with relative paths fail in URL-based marketplaces&para;<br>&para;<br>**Symptoms**: Added a marketplace via URL (such as `https://example.com/marketplace.json`), but plugins with relative path sources like `"./plugins/my-plugin"` fail to install with "path not found" errors.&para;<br>&para;<br>**Cause**: URL-based marketplaces only download the `marketplace.json` file itself. They do not download plugin files from the server. Relative paths in the marketplace entry reference files on the remote server that were not downloaded.&para;<br>&para;<br>**Solutions**:&para;<br>&para;<br>* **Use external sources**: Change plugin entries to use GitHub, npm, or git URL sources instead of relative paths:&para;<br>  ```json  theme={null}&para;<br>  { "name": "my-plugin", "source": { "source": "github", "repo": "owner/repo" } }&para;<br>  ```&para;<br>* **Use a Git-based marketplace**: Host your marketplace in a Git repository and add it with the git URL. Git-based marketplaces clone the entire repository, making relative paths work correctly.&para;<br>&para;<br>### Files not found after installation&para;<br>&para;<br>**Symptoms**: Plugin installs but references to files fail, especially files outside the plugin directory&para;<br>&para;<br>**Cause**: Plugins are copied to a cache directory rather than used in-place. Paths that reference files outside the plugin's directory (such as `../shared-utils`) won't work because those files aren't copied.&para;<br>&para;<br>**Solutions**: See [Plugin caching and file resolution](/en/plugins-reference#plugin-caching-and-file-resolution) for workarounds including symlinks and directory restructuring.&para;<br>&para;<br>For additional debugging tools and common issues, see [Debugging and development tools](/en/plugins-reference#debugging-and-development-tools).&para;<br>&para;<br>## See also&para;<br>&para;<br>* [Discover and install prebuilt plugins](/en/discover-plugins) - Installing plugins from existing marketplaces&para;<br>* [Plugins](/en/plugins) - Creating your own plugins&para;<br>* [Plugins reference](/en/plugins-reference) - Complete technical specifications and schemas&para;<br>* [Plugin settings](/en/settings#plugin-settings) - Plugin configuration options&para;<br>* [strictKnownMarketplaces reference](/en/settings#strictknownmarketplaces) - Managed marketplace restrictions&para;<br></span></div>
        </div>

        <h2 style="margin-top: 2rem; margin-bottom: 1rem;">Unified Diff</h2>
        <pre><code>--- a/plugin-marketplaces.md
+++ b/plugin-marketplaces.md
@@ -314,6 +314,53 @@
 | `url` | string | Required. Full git repository URL (must end with `.git`)              |
 | `ref` | string | Optional. Git branch or tag (defaults to repository default branch)   |
 | `sha` | string | Optional. Full 40-character git commit SHA to pin to an exact version |
+
+### npm packages
+
+Plugins distributed as npm packages are installed using `npm install`. This works with any package on the public npm registry or a private registry your team hosts.
+
+```json  theme={null}
+{
+  &#34;name&#34;: &#34;my-npm-plugin&#34;,
+  &#34;source&#34;: {
+    &#34;source&#34;: &#34;npm&#34;,
+    &#34;package&#34;: &#34;@acme/claude-plugin&#34;
+  }
+}
+```
+
+To pin to a specific version, add the `version` field:
+
+```json  theme={null}
+{
+  &#34;name&#34;: &#34;my-npm-plugin&#34;,
+  &#34;source&#34;: {
+    &#34;source&#34;: &#34;npm&#34;,
+    &#34;package&#34;: &#34;@acme/claude-plugin&#34;,
+    &#34;version&#34;: &#34;2.1.0&#34;
+  }
+}
+```
+
+To install from a private or internal registry, add the `registry` field:
+
+```json  theme={null}
+{
+  &#34;name&#34;: &#34;my-npm-plugin&#34;,
+  &#34;source&#34;: {
+    &#34;source&#34;: &#34;npm&#34;,
+    &#34;package&#34;: &#34;@acme/claude-plugin&#34;,
+    &#34;version&#34;: &#34;^2.0.0&#34;,
+    &#34;registry&#34;: &#34;https://npm.example.com&#34;
+  }
+}
+```
+
+| Field      | Type   | Description                                                                                  |
+| :--------- | :----- | :------------------------------------------------------------------------------------------- |
+| `package`  | string | Required. Package name or scoped package (for example, `@org/plugin`)                        |
+| `version`  | string | Optional. Version or version range (for example, `2.1.0`, `^2.0.0`, `~1.5.0`)                |
+| `registry` | string | Optional. Custom npm registry URL. Defaults to the system npm registry (typically npmjs.org) |
 
 ### Advanced plugin entries
 
@@ -680,7 +727,6 @@
 
 * `Marketplace has no plugins defined`: add at least one plugin to the `plugins` array
 * `No marketplace description provided`: add `metadata.description` to help users understand your marketplace
-* `Plugin &#34;x&#34; uses npm source which is not yet fully implemented`: use `github` or local path sources instead
 
 ### Plugin installation failures
 
@@ -713,6 +759,18 @@
 * For GitLab, ensure the token has at least `read_repository` scope
 * Verify the token hasn&#39;t expired
 
+### Git operations time out
+
+**Symptoms**: Plugin installation or marketplace updates fail with a timeout error like &#34;Git clone timed out after 120s&#34; or &#34;Git pull timed out after 120s&#34;.
+
+**Cause**: Claude Code uses a 120-second timeout for all git operations, including cloning plugin repositories and pulling marketplace updates. Large repositories or slow network connections may exceed this limit.
+
+**Solution**: Increase the timeout using the `CLAUDE_CODE_PLUGIN_GIT_TIMEOUT_MS` environment variable. The value is in milliseconds:
+
+```bash  theme={null}
+export CLAUDE_CODE_PLUGIN_GIT_TIMEOUT_MS=300000  # 5 minutes
+```
+
 ### Plugins with relative paths fail in URL-based marketplaces
 
 **Symptoms**: Added a marketplace via URL (such as `https://example.com/marketplace.json`), but plugins with relative path sources like `&#34;./plugins/my-plugin&#34;` fail to install with &#34;path not found&#34; errors.
</code></pre>
    </div>
</body>
</html>