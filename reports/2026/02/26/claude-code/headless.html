<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>headless - Diff Report</title>
    <link rel="stylesheet" href="../../css/diff.css">
    <style>
        :root {
            --bg-color: #1a1a2e;
            --card-bg: #16213e;
            --text-color: #eee;
            --accent: #0f3460;
            --add-bg: #1a4d1a;
            --del-bg: #4d1a1a;
            --add-text: #4ade80;
            --del-text: #f87171;
        }
        @media (prefers-color-scheme: light) {
            :root {
                --bg-color: #f5f5f5;
                --card-bg: #fff;
                --text-color: #333;
                --accent: #e0e0e0;
                --add-bg: #d4edda;
                --del-bg: #f8d7da;
                --add-text: #155724;
                --del-text: #721c24;
            }
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 2rem;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { margin-bottom: 2rem; }
        h1 { font-size: 1.5rem; margin-bottom: 0.5rem; }
        .meta { color: #888; font-size: 0.9rem; }
        .summary {
            background: var(--card-bg);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            display: flex;
            gap: 2rem;
        }
        .stat { display: flex; align-items: center; gap: 0.5rem; }
        .stat.added { color: var(--add-text); }
        .stat.removed { color: var(--del-text); }
        .analysis {
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid #8b5cf6;
        }
        .analysis-header {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #8b5cf6;
        }
        .analysis-content {
            white-space: pre-wrap;
            font-size: 0.95rem;
            line-height: 1.7;
        }
        .diff-container {
            background: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
        }
        .diff-header {
            background: var(--accent);
            padding: 0.75rem 1rem;
            font-weight: 600;
        }
        .diff-content {
            padding: 1rem;
            overflow-x: auto;
        }
        .diff-content ins {
            background: var(--add-bg);
            color: var(--add-text);
            text-decoration: none;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        .diff-content del {
            background: var(--del-bg);
            color: var(--del-text);
            text-decoration: line-through;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        pre {
            background: var(--accent);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.85rem;
            margin-top: 2rem;
        }
        a { color: #60a5fa; }
        .back-link { margin-bottom: 1rem; display: inline-block; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">&larr; Back to daily report</a>

        <header>
            <h1>headless.md</h1>
            <p class="meta">Changed on 2026-02-26 15:31:20 EST</p>
        </header>

        <div class="summary">
            <div class="stat added">
                <span>+4</span> lines added
            </div>
            <div class="stat removed">
                <span>-11</span> lines removed
            </div>
        </div>

        

        <div class="diff-container">
            <div class="diff-header">Visual Diff</div>
            <div class="diff-content"><span>&gt; ## Documentation Index&para;<br>&gt; Fetch the complete documentation index at: https://code.claude.com/docs/llms.txt&para;<br>&gt; Use this file to discover all available pages before exploring further.&para;<br>&para;<br># Run Claude Code programmatically&para;<br>&para;<br>&gt; Use the Agent SDK to run Claude Code programmatically from the CLI, Python, or TypeScript.&para;<br>&para;<br>The [Agent SDK](https://platform.claude.com/docs/en/agent-sdk/overview) gives you the same tools, agent loop, and context management that power Claude Code. It's available as a CLI for scripts and CI/CD, or as [Python](https://platform.claude.com/docs/en/agent-sdk/python) and [TypeScript](https://platform.claude.com/docs/en/agent-sdk/typescript) packages for full programmatic control.&para;<br>&para;<br>&lt;Note&gt;&para;<br>  The CLI was previously called "headless mode." The `-p` flag and all CLI options work the same way.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>To run Claude Code programmatically from the CLI, pass `-p` with your prompt and any [CLI options](/en/cli-reference):&para;<br>&para;<br>```bash  theme={null}&para;<br>claude -p "Find and fix the bug in auth.py" --allowedTools "Read,Edit,Bash"&para;<br>```&para;<br>&para;<br>This page covers using the Agent SDK via the CLI (`claude -p`). For the Python and TypeScript SDK packages with structured outputs, tool approval callbacks, and native message objects, see the [full Agent SDK documentation](https://platform.claude.com/docs/en/agent-sdk/overview).&para;<br>&para;<br>## Basic usage&para;<br>&para;<br>Add the `-p` (or `--print`) flag to any `claude` command to run it non-interactively. All [CLI options](/en/cli-reference) work with `-p`, including:&para;<br>&para;<br>* `--continue` for [continuing conversations](#continue-conversations)&para;<br>* `--allowedTools` for [auto-approving tools](#auto-approve-tools)&para;<br>* `--output-format` for [structured output](#get-structured-output)&para;<br>&para;<br>This example asks Claude a question about your codebase and prints the response:&para;<br>&para;<br>```bash  theme={null}&para;<br>claude -p "What does the auth module do?"&para;<br>```&para;<br>&para;<br>## Examples&para;<br>&para;<br>These examples highlight common CLI patterns.&para;<br>&para;<br>### Get structured output&para;<br>&para;<br>Use `--output-format` to control how responses are returned:&para;<br>&para;<br>* `text` (default): plain text output&para;<br>* `json`: structured JSON with result, session ID, and metadata&para;<br>* `stream-json`: newline-delimited JSON for real-time streaming&para;<br>&para;<br>This example returns a project summary as JSON with session metadata, with the text result in the `result` field:&para;<br>&para;<br>```bash  theme={null}&para;<br>claude -p "Summarize this project" --output-format json&para;<br>```&para;<br>&para;<br>To get output conforming to a specific schema, use `--output-format json` with `--json-schema` and a [JSON Schema](https://json-schema.org/) definition. The response includes metadata about the request (session ID, usage, etc.) with the structured output in the `structured_output` field.&para;<br>&para;<br>This example extracts function names and returns them as an array of strings:&para;<br>&para;<br>```bash  theme={null}&para;<br>claude -p "Extract the main function names from auth.py" \&para;<br>  --output-format json \&para;<br>  --json-schema '{"type":"object","properties":{"functions":{"type":"array","items":{"type":"string"}}},"required":["functions"]}'&para;<br>```&para;<br>&para;<br>&lt;Tip&gt;&para;<br>  Use a tool like [jq](https://jqlang.github.io/jq/) to parse the response and extract specific fields:&para;<br>&para;<br>  ```bash  theme={null}&para;<br>  # Extract the text result&para;<br>  claude -p "Summarize this project" --output-format json | jq -r '.result'&para;<br>&para;<br>  # Extract structured output&para;<br>  claude -p "Extract function names from auth.py" \&para;<br>    --output-format json \&para;<br>    --json-schema '{"type":"object","properties":{"functions":{"type":"array","items":{"type":"string"}}},"required":["functions"]}' \&para;<br>    | jq '.structured_output'&para;<br>  ```&para;<br>&lt;/Tip&gt;&para;<br>&para;<br>### Stream responses&para;<br>&para;<br>Use `--output-format stream-json` with `--verbose` and `--include-partial-messages` to receive tokens as they're generated. Each line is a JSON object representing an event:&para;<br>&para;<br>```bash  theme={null}&para;<br>claude -p "Explain recursion" --output-format stream-json --verbose --include-partial-messages&para;<br>```&para;<br>&para;<br>The following example uses [jq](https://jqlang.github.io/jq/) to filter for text deltas and display just the streaming text. The `-r` flag outputs raw strings (no quotes) and `-j` joins without newlines so tokens stream continuously:&para;<br>&para;<br>```bash  theme={null}&para;<br>claude -p "Write a poem" --output-format stream-json --verbose --include-partial-messages | \&para;<br>  jq -rj 'select(.type == "stream_event" and .event.delta.type? == "text_delta") | .event.delta.text'&para;<br>```&para;<br>&para;<br>For programmatic streaming with callbacks and message objects, see [Stream responses in real-time](https://platform.claude.com/docs/en/agent-sdk/streaming-output) in the Agent SDK documentation.&para;<br>&para;<br>### Auto-approve tools&para;<br>&para;<br>Use `--allowedTools` to let Claude use certain tools without prompting. This example runs a test suite and fixes failures, allowing Claude to execute Bash commands and read/edit files without asking for permission:&para;<br>&para;<br>```bash  theme={null}&para;<br>claude -p "Run the test suite and fix any failures" \&para;<br>  --allowedTools "Bash,Read,Edit"&para;<br>```&para;<br>&para;<br>### Create a commit&para;<br>&para;<br>This example reviews staged changes and creates a commit with an appropriate message:&para;<br>&para;<br>```bash  theme={null}&para;<br>claude -p "Look at my staged changes and create an appropriate commit" \&para;<br>  --allowedTools "Bash(git diff *),Bash(git log *),Bash(git status *),Bash(git commit *)"&para;<br>```&para;<br>&para;<br>The `--allowedTools` flag uses [permission rule syntax](/en/settings#permission-rule-syntax). The trailing ` *` enables prefix matching, so `Bash(git diff *)` allows any command starting with `git diff`. The space before `*` is important: without it, `Bash(git diff*)` would also match `git diff-index`.&para;<br>&para;<br>&lt;Note&gt;&para;<br>  User-invoked [skills](/en/skills) like `/commit` and [built-in commands](/en/interactive-mode#built-in-commands) are only available in interactive mode. In `-p` mode, describe the task you want to accomplish instead.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>### Customize the system prompt&para;<br>&para;<br>Use `--append-system-prompt` to add instructions while keeping Claude Code's default behavior. This example pipes a PR diff to Claude and instructs it to review for security vulnerabilities:&para;<br>&para;<br>```bash  theme={null}&para;<br>gh pr diff "$1" | claude -p \&para;<br>  --append-system-prompt "You are a security engineer. Review for vulnerabilities." \&para;<br>  --output-format json&para;<br>```&para;<br>&para;<br>See [system prompt flags](/en/cli-reference#system-prompt-flags) for more options including `--system-prompt` to fully replace the default prompt.&para;<br>&para;<br>### Continue conversations&para;<br>&para;<br>Use `--continue` to continue the most recent conversation, or `--resume` with a session ID to continue a specific conversation. This example runs a review, then sends follow-up prompts:&para;<br>&para;<br>```bash  theme={null}&para;<br># First request&para;<br>claude -p "Review this codebase for performance issues"&para;<br>&para;<br># Continue the most recent conversation&para;<br>claude -p "Now focus on the database queries" --continue&para;<br>claude -p "Generate a summary of all issues found" --continue&para;<br>```&para;<br>&para;<br>If you're running multiple conversations, capture the session ID to resume a specific one:&para;<br>&para;<br>```bash  theme={null}&para;<br>session_id=$(claude -p "Start a review" --output-format json | jq -r '.session_id')&para;<br>claude -p "Continue that review" --resume "$session_id"&para;<br>```&para;<br>&para;<br>## Next steps&para;<br>&para;<br></span><del style="background:#ffe6e6;">&lt;CardGroup cols={2}&gt;&para;<br>  &lt;Card title="Agent SDK quickstart" icon="play" href="</del><ins style="background:#e6ffe6;">* [Agent SDK quickstart](</ins><span>https://platform.claude.com/docs/en/agent-sdk/quickstart</span><del style="background:#ffe6e6;">"&gt;&para;<br>    B</del><ins style="background:#e6ffe6;">): b</ins><span>uild your first agent with Python or TypeScript&para;<br></span><del style="background:#ffe6e6;">  &lt;/Card&gt;&para;<br>&para;<br>  &lt;Card title="CLI reference" icon="terminal" href="</del><ins style="background:#e6ffe6;">* [CLI reference](</ins><span>/en/cli-reference</span><del style="background:#ffe6e6;">"&gt;&para;<br>    Explore</del><ins style="background:#e6ffe6;">):</ins><span> all CLI flags and options&para;<br></span><del style="background:#ffe6e6;">  &lt;/Card&gt;&para;<br>&para;<br>  &lt;Card title="GitHub Actions" icon="github" href="</del><ins style="background:#e6ffe6;">* [GitHub Actions](</ins><span>/en/github-actions</span><del style="background:#ffe6e6;">"&gt;&para;<br>    U</del><ins style="background:#e6ffe6;">): u</ins><span>se the Agent SDK in GitHub workflows&para;<br></span><del style="background:#ffe6e6;">  &lt;/Card&gt;&para;<br>&para;<br>  &lt;Card title="GitLab CI/CD" icon="gitlab" href="</del><ins style="background:#e6ffe6;">* [GitLab CI/CD](</ins><span>/en/gitlab-ci-cd</span><del style="background:#ffe6e6;">"&gt;&para;<br>    U</del><ins style="background:#e6ffe6;">): u</ins><span>se the Agent SDK in GitLab pipelines&para;<br></span><del style="background:#ffe6e6;">  &lt;/Card&gt;&para;<br>&lt;/CardGroup&gt;&para;<br></del></div>
        </div>

        <h2 style="margin-top: 2rem; margin-bottom: 1rem;">Unified Diff</h2>
        <pre><code>--- a/headless.md
+++ b/headless.md
@@ -152,20 +152,7 @@
 
 ## Next steps
 
-&lt;CardGroup cols={2}&gt;
-  &lt;Card title=&#34;Agent SDK quickstart&#34; icon=&#34;play&#34; href=&#34;https://platform.claude.com/docs/en/agent-sdk/quickstart&#34;&gt;
-    Build your first agent with Python or TypeScript
-  &lt;/Card&gt;
-
-  &lt;Card title=&#34;CLI reference&#34; icon=&#34;terminal&#34; href=&#34;/en/cli-reference&#34;&gt;
-    Explore all CLI flags and options
-  &lt;/Card&gt;
-
-  &lt;Card title=&#34;GitHub Actions&#34; icon=&#34;github&#34; href=&#34;/en/github-actions&#34;&gt;
-    Use the Agent SDK in GitHub workflows
-  &lt;/Card&gt;
-
-  &lt;Card title=&#34;GitLab CI/CD&#34; icon=&#34;gitlab&#34; href=&#34;/en/gitlab-ci-cd&#34;&gt;
-    Use the Agent SDK in GitLab pipelines
-  &lt;/Card&gt;
-&lt;/CardGroup&gt;
+* [Agent SDK quickstart](https://platform.claude.com/docs/en/agent-sdk/quickstart): build your first agent with Python or TypeScript
+* [CLI reference](/en/cli-reference): all CLI flags and options
+* [GitHub Actions](/en/github-actions): use the Agent SDK in GitHub workflows
+* [GitLab CI/CD](/en/gitlab-ci-cd): use the Agent SDK in GitLab pipelines
</code></pre>
    </div>
</body>
</html>