<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>agents-and-tools/tool-use/overview - Diff Report</title>
    <link rel="stylesheet" href="../../css/diff.css">
    <style>
        :root {
            --bg-color: #1a1a2e;
            --card-bg: #16213e;
            --text-color: #eee;
            --accent: #0f3460;
            --add-bg: #1a4d1a;
            --del-bg: #4d1a1a;
            --add-text: #4ade80;
            --del-text: #f87171;
        }
        @media (prefers-color-scheme: light) {
            :root {
                --bg-color: #f5f5f5;
                --card-bg: #fff;
                --text-color: #333;
                --accent: #e0e0e0;
                --add-bg: #d4edda;
                --del-bg: #f8d7da;
                --add-text: #155724;
                --del-text: #721c24;
            }
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 2rem;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { margin-bottom: 2rem; }
        h1 { font-size: 1.5rem; margin-bottom: 0.5rem; }
        .meta { color: #888; font-size: 0.9rem; }
        .summary {
            background: var(--card-bg);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            display: flex;
            gap: 2rem;
        }
        .stat { display: flex; align-items: center; gap: 0.5rem; }
        .stat.added { color: var(--add-text); }
        .stat.removed { color: var(--del-text); }
        .analysis {
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid #8b5cf6;
        }
        .analysis-header {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #8b5cf6;
        }
        .analysis-content {
            white-space: pre-wrap;
            font-size: 0.95rem;
            line-height: 1.7;
        }
        .diff-container {
            background: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
        }
        .diff-header {
            background: var(--accent);
            padding: 0.75rem 1rem;
            font-weight: 600;
        }
        .diff-content {
            padding: 1rem;
            overflow-x: auto;
        }
        .diff-content ins {
            background: var(--add-bg);
            color: var(--add-text);
            text-decoration: none;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        .diff-content del {
            background: var(--del-bg);
            color: var(--del-text);
            text-decoration: line-through;
            padding: 0.1em 0.2em;
            border-radius: 2px;
        }
        pre {
            background: var(--accent);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.85rem;
            margin-top: 2rem;
        }
        a { color: #60a5fa; }
        .back-link { margin-bottom: 1rem; display: inline-block; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../../../index.html" class="back-link">&larr; Back to daily report</a>

        <header>
            <h1>agents-and-tools/tool-use/overview.md</h1>
            <p class="meta">Changed on 2026-02-23 15:39:16 EST</p>
        </header>

        <div class="summary">
            <div class="stat added">
                <span>+2</span> lines added
            </div>
            <div class="stat removed">
                <span>-1</span> lines removed
            </div>
        </div>

        

        <div class="diff-container">
            <div class="diff-header">Visual Diff</div>
            <div class="diff-content"><span># Tool use with Claude&para;<br>&para;<br>---&para;<br>&para;<br>Claude is capable of interacting with tools and functions, allowing you to extend Claude's capabilities to perform a wider variety of tasks.</span><ins style="background:#e6ffe6;"> Each tool defines a contract: you specify what operations are available and what they return; Claude decides when and how to call them. Tool access is one of the highest-leverage primitives you can give an agent. On benchmarks like [LAB-Bench FigQA](https://lab-bench.org/) (scientific figure interpretation) and [SWE-bench](https://www.swebench.com/) (real-world software engineering), adding even simple tools produces outsized capability gains, often surpassing human expert baselines.</ins><span>&para;<br>&para;<br>&lt;Tip&gt;&para;<br>  Learn everything you need to master tool use with Claude as part of the new [courses](https://anthropic.skilljar.com/)! Please&para;<br>  continue to share your ideas and suggestions using this&para;<br>  [form](https://forms.gle/BFnYc6iCkWoRzFgk7).&para;<br>&lt;/Tip&gt;&para;<br>&para;<br>&lt;Tip&gt;&para;<br>**Guarantee schema conformance with strict tool use**&para;<br>&para;<br>[Structured Outputs](/docs/en/build-with-claude/structured-outputs) provides guaranteed schema validation for tool inputs. Add `strict: true` to your tool definitions to ensure Claude's tool calls always match your schema exactly, eliminating type mismatches or missing fields.&para;<br>&para;<br>Perfect for production agents where invalid tool parameters would cause failures. [Learn when to use strict tool use â†’](/docs/en/build-with-claude/structured-outputs#when-to-use-json-outputs-vs-strict-tool-use)&para;<br>&lt;/Tip&gt;&para;<br>&para;<br>Here's an example of how to provide tools to Claude using the Messages API:&para;<br>&para;<br>&lt;CodeGroup&gt;&para;<br>&para;<br>```bash Shell&para;<br>curl https://api.anthropic.com/v1/messages \&para;<br>  -H "content-type: application/json" \&para;<br>  -H "x-api-key: $ANTHROPIC_API_KEY" \&para;<br>  -H "anthropic-version: 2023-06-01" \&para;<br>  -d '{&para;<br>    "model": "claude-opus-4-6",&para;<br>    "max_tokens": 1024,&para;<br>    "tools": [&para;<br>      {&para;<br>        "name": "get_weather",&para;<br>        "description": "Get the current weather in a given location",&para;<br>        "input_schema": {&para;<br>          "type": "object",&para;<br>          "properties": {&para;<br>            "location": {&para;<br>              "type": "string",&para;<br>              "description": "The city and state, e.g. San Francisco, CA"&para;<br>            }&para;<br>          },&para;<br>          "required": ["location"]&para;<br>        }&para;<br>      }&para;<br>    ],&para;<br>    "messages": [&para;<br>      {&para;<br>        "role": "user",&para;<br>        "content": "What is the weather like in San Francisco?"&para;<br>      }&para;<br>    ]&para;<br>  }'&para;<br>```&para;<br>&para;<br>```python Python&para;<br>import anthropic&para;<br>&para;<br>client = anthropic.Anthropic()&para;<br>&para;<br>response = client.messages.create(&para;<br>    model="claude-opus-4-6",&para;<br>    max_tokens=1024,&para;<br>    tools=[&para;<br>        {&para;<br>            "name": "get_weather",&para;<br>            "description": "Get the current weather in a given location",&para;<br>            "input_schema": {&para;<br>                "type": "object",&para;<br>                "properties": {&para;<br>                    "location": {&para;<br>                        "type": "string",&para;<br>                        "description": "The city and state, e.g. San Francisco, CA",&para;<br>                    }&para;<br>                },&para;<br>                "required": ["location"],&para;<br>            },&para;<br>        }&para;<br>    ],&para;<br>    messages=[{"role": "user", "content": "What's the weather like in San Francisco?"}],&para;<br>)&para;<br>print(response)&para;<br>```&para;<br>&para;<br>```typescript TypeScript&para;<br>import { Anthropic } from "@anthropic-ai/sdk";&para;<br>&para;<br>const anthropic = new Anthropic({&para;<br>  apiKey: process.env.ANTHROPIC_API_KEY&para;<br>});&para;<br>&para;<br>async function main() {&para;<br>  const response = await anthropic.messages.create({&para;<br>    model: "claude-opus-4-6",&para;<br>    max_tokens: 1024,&para;<br>    tools: [{&para;<br>      name: "get_weather",&para;<br>      description: "Get the current weather in a given location",&para;<br>      input_schema: {&para;<br>        type: "object",&para;<br>        properties: {&para;<br>          location: {&para;<br>            type: "string",&para;<br>            description: "The city and state, e.g. San Francisco, CA"&para;<br>          }&para;<br>        },&para;<br>        required: ["location"]&para;<br>      }&para;<br>    }],&para;<br>    messages: [{&para;<br>      role: "user",&para;<br>      content: "Tell me the weather in San Francisco."&para;<br>    }]&para;<br>  });&para;<br>&para;<br>  console.log(response);&para;<br>}&para;<br>&para;<br>main().catch(console.error);&para;<br>```&para;<br>&para;<br>```java Java&para;<br>import com.anthropic.client.AnthropicClient;&para;<br>import com.anthropic.client.okhttp.AnthropicOkHttpClient;&para;<br>import com.anthropic.core.JsonValue;&para;<br>import com.anthropic.models.messages.Message;&para;<br>import com.anthropic.models.messages.MessageCreateParams;&para;<br>import com.anthropic.models.messages.Model;&para;<br>import com.anthropic.models.messages.Tool;&para;<br>import com.anthropic.models.messages.Tool.InputSchema;&para;<br>import java.util.List;&para;<br>import java.util.Map;&para;<br>&para;<br>public class GetWeatherExample {&para;<br>&para;<br>  public static void main(String[] args) {&para;<br>    AnthropicClient client = AnthropicOkHttpClient.fromEnv();&para;<br>&para;<br>    InputSchema schema = InputSchema.builder()&para;<br>      .properties(&para;<br>        JsonValue.from(&para;<br>          Map.of(&para;<br>            "location",&para;<br>            Map.of(&para;<br>              "type",&para;<br>              "string",&para;<br>              "description",&para;<br>              "The city and state, e.g. San Francisco, CA"&para;<br>            )&para;<br>          )&para;<br>        )&para;<br>      )&para;<br>      .putAdditionalProperty("required", JsonValue.from(List.of("location")))&para;<br>      .build();&para;<br>&para;<br>    MessageCreateParams params = MessageCreateParams.builder()&para;<br>      .model(Model.CLAUDE_OPUS_4_0)&para;<br>      .maxTokens(1024)&para;<br>      .addTool(&para;<br>        Tool.builder()&para;<br>          .name("get_weather")&para;<br>          .description("Get the current weather in a given location")&para;<br>          .inputSchema(schema)&para;<br>          .build()&para;<br>      )&para;<br>      .addUserMessage("What's the weather like in San Francisco?")&para;<br>      .build();&para;<br>&para;<br>    Message message = client.messages().create(params);&para;<br>    System.out.println(message);&para;<br>  }&para;<br>}&para;<br>```&para;<br>&para;<br>&lt;/CodeGroup&gt;&para;<br>&para;<br>---&para;<br>&para;<br>## How tool use works&para;<br>&para;<br>Claude supports two types of tools:&para;<br>&para;<br>1. **Client tools**: Tools that execute on your systems, which include:&para;<br>   - User-defined custom tools that you create and implement&para;<br>   - Anthropic-defined tools like [computer use](/docs/en/agents-and-tools/tool-use/computer-use-tool) and [text editor](/docs/en/agents-and-tools/tool-use/text-editor-tool) that require client implementation&para;<br>&para;<br>2. **Server tools**: Tools that execute on Anthropic's servers, like the [web search](/docs/en/agents-and-tools/tool-use/web-search-tool) and [web fetch](/docs/en/agents-and-tools/tool-use/web-fetch-tool) tools. These tools must be specified in the API request but don't require implementation on your part.&para;<br>&para;<br>&lt;Note&gt;&para;<br>Anthropic-defined tools use versioned types (e.g., `web_search_20250305`, `text_editor_20250124`) to ensure compatibility across model versions.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>### Client tools&para;<br>Integrate client tools with Claude in these steps:&para;<br>&para;<br>&lt;Steps&gt;&para;<br>  &lt;Step title="Provide Claude with tools and a user prompt"&gt;&para;<br>    - Define client tools with names, descriptions, and input schemas in your API request.&para;<br>    - Include a user prompt that might require these tools, e.g., "What's the weather in San Francisco?"&para;<br>  &lt;/Step&gt;&para;<br>  &lt;Step title="Claude decides to use a tool"&gt;&para;<br>    - Claude assesses if any tools can help with the user's query.&para;<br>    - If yes, Claude constructs a properly formatted tool use request.&para;<br>    - For client tools, the API response has a `stop_reason` of `tool_use`, signaling Claude's intent.&para;<br>  &lt;/Step&gt;&para;<br>  &lt;Step title="Execute the tool and return results"&gt;&para;<br>    - Extract the tool name and input from Claude's request&para;<br>    - Execute the tool code on your system&para;<br>    - Return the results in a new `user` message containing a `tool_result` content block&para;<br>  &lt;/Step&gt;&para;<br>  &lt;Step title="Claude uses tool result to formulate a response"&gt;&para;<br>    - Claude analyzes the tool results to craft its final response to the original user prompt.&para;<br>  &lt;/Step&gt;&para;<br>&lt;/Steps&gt;&para;<br>Note: Steps 3 and 4 are optional. For some workflows, Claude's tool use request (step 2) might be all you need, without sending results back to Claude.&para;<br>&para;<br>### Server tools&para;<br>&para;<br>Server tools follow a different workflow where Anthropic's servers handle tool execution in a loop:&para;<br>&para;<br>&lt;Steps&gt;&para;<br>  &lt;Step title="Provide Claude with tools and a user prompt"&gt;&para;<br>    - Server tools, like [web search](/docs/en/agents-and-tools/tool-use/web-search-tool) and [web fetch](/docs/en/agents-and-tools/tool-use/web-fetch-tool), have their own parameters.&para;<br>    - Include a user prompt that might require these tools, e.g., "Search for the latest news about AI" or "Analyze the content at this URL."&para;<br>  &lt;/Step&gt;&para;<br>  &lt;Step title="Claude executes the server tool"&gt;&para;<br>    - Claude assesses if a server tool can help with the user's query.&para;<br>    - If yes, Claude executes the tool, and the results are automatically incorporated into Claude's response.&para;<br>    - The server runs a sampling loop that may execute multiple tool calls before returning a response.&para;<br>  &lt;/Step&gt;&para;<br>  &lt;Step title="Claude uses the server tool result to formulate a response"&gt;&para;<br>    - Claude analyzes the server tool results to craft its final response to the original user prompt.&para;<br>    - In most cases, no additional user interaction is needed for server tool execution.&para;<br>  &lt;/Step&gt;&para;<br>&lt;/Steps&gt;&para;<br>&para;<br>&lt;Note&gt;&para;<br>**Handling `pause_turn` with server tools**&para;<br>&para;<br>The server-side sampling loop has a default limit of 10 iterations. If Claude reaches this limit while executing server tools, the API returns a response with `stop_reason="pause_turn"`. This may include a `server_tool_use` block without a corresponding `server_tool_result`.&para;<br>&para;<br>When you receive `pause_turn`, continue the conversation by sending the response back to let Claude finish processing. See [handling stop reasons](/docs/en/build-with-claude/handling-stop-reasons#3-implement-retry-logic-for-pause-turn) for implementation details.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>---&para;<br>&para;<br>## Using MCP tools with Claude&para;<br>&para;<br>If you're building an application that uses the [Model Context Protocol (MCP)](https://modelcontextprotocol.io), you can use tools from MCP servers directly with Claude's Messages API. MCP tool definitions use a schema format that's similar to Claude's tool format. You just need to rename `inputSchema` to `input_schema`.&para;<br>&para;<br>&lt;Tip&gt;&para;<br>**Don't want to build your own MCP client?** Use the [MCP connector](/docs/en/agents-and-tools/mcp-connector) to connect directly to remote MCP servers from the Messages API without implementing a client.&para;<br>&lt;/Tip&gt;&para;<br>&para;<br>### Converting MCP tools to Claude format&para;<br>&para;<br>When you build an MCP client and call `list_tools()` on an MCP server, you'll receive tool definitions with an `inputSchema` field. To use these tools with Claude, convert them to Claude's format:&para;<br>&para;<br>&lt;CodeGroup&gt;&para;<br>```python Python&para;<br>from mcp import ClientSession&para;<br>&para;<br>&para;<br>async def get_claude_tools(mcp_session: ClientSession):&para;<br>    """Convert MCP tools to Claude's tool format."""&para;<br>    mcp_tools = await mcp_session.list_tools()&para;<br>&para;<br>    claude_tools = []&para;<br>    for tool in mcp_tools.tools:&para;<br>        claude_tools.append(&para;<br>            {&para;<br>                "name": tool.name,&para;<br>                "description": tool.description or "",&para;<br>                "input_schema": tool.inputSchema,  # Rename inputSchema to input_schema&para;<br>            }&para;<br>        )&para;<br>&para;<br>    return claude_tools&para;<br>```&para;<br>&para;<br>```typescript TypeScript&para;<br>import { Client } from "@modelcontextprotocol/sdk/client/index.js";&para;<br>&para;<br>async function getClaudeTools(mcpClient: Client) {&para;<br>  // Convert MCP tools to Claude's tool format&para;<br>  const mcpTools = await mcpClient.listTools();&para;<br>&para;<br>  return mcpTools.tools.map((tool) =&gt; ({&para;<br>    name: tool.name,&para;<br>    description: tool.description ?? "",&para;<br>    input_schema: tool.inputSchema // Rename inputSchema to input_schema&para;<br>  }));&para;<br>}&para;<br>```&para;<br>&lt;/CodeGroup&gt;&para;<br>&para;<br>Then pass these converted tools to Claude:&para;<br>&para;<br>&lt;CodeGroup&gt;&para;<br>```python Python&para;<br>import anthropic&para;<br>&para;<br>client = anthropic.Anthropic()&para;<br>claude_tools = await get_claude_tools(mcp_session)&para;<br>&para;<br>response = client.messages.create(&para;<br>    model="claude-opus-4-6",&para;<br>    max_tokens=1024,&para;<br>    tools=claude_tools,&para;<br>    messages=[{"role": "user", "content": "What tools do you have available?"}],&para;<br>)&para;<br>```&para;<br>&para;<br>```typescript TypeScript&para;<br>import Anthropic from "@anthropic-ai/sdk";&para;<br>&para;<br>const anthropic = new Anthropic();&para;<br>const claudeTools = await getClaudeTools(mcpClient);&para;<br>&para;<br>const response = await anthropic.messages.create({&para;<br>  model: "claude-opus-4-6",&para;<br>  max_tokens: 1024,&para;<br>  tools: claudeTools,&para;<br>  messages: [{ role: "user", content: "What tools do you have available?" }]&para;<br>});&para;<br>```&para;<br>&lt;/CodeGroup&gt;&para;<br>&para;<br>When Claude responds with a `tool_use` block, execute the tool on your MCP server using `call_tool()` and return the result to Claude in a `tool_result` block.&para;<br>&para;<br>For a complete guide to building MCP clients, see [Build an MCP client](https://modelcontextprotocol.io/docs/develop/build-client).&para;<br>&para;<br>---&para;<br>&para;<br>## Tool use examples&para;<br>&para;<br>Here are a few code examples demonstrating various tool use patterns and techniques. For brevity's sake, the tools are simple tools, and the tool descriptions are shorter than would be ideal to ensure best performance.&para;<br>&para;<br>&lt;section title="Single tool example"&gt;&para;<br>&para;<br>&lt;CodeGroup&gt;&para;<br>    ```bash Shell&para;<br>    curl https://api.anthropic.com/v1/messages \&para;<br>         --header "x-api-key: $ANTHROPIC_API_KEY" \&para;<br>         --header "anthropic-version: 2023-06-01" \&para;<br>         --header "content-type: application/json" \&para;<br>         --data \&para;<br>    '{&para;<br>        "model": "claude-opus-4-6",&para;<br>        "max_tokens": 1024,&para;<br>        "tools": [{&para;<br>            "name": "get_weather",&para;<br>            "description": "Get the current weather in a given location",&para;<br>            "input_schema": {&para;<br>                "type": "object",&para;<br>                "properties": {&para;<br>                    "location": {&para;<br>                        "type": "string",&para;<br>                        "description": "The city and state, e.g. San Francisco, CA"&para;<br>                    },&para;<br>                    "unit": {&para;<br>                        "type": "string",&para;<br>                        "enum": ["celsius", "fahrenheit"],&para;<br>                        "description": "The unit of temperature, either \"celsius\" or \"fahrenheit\""&para;<br>                    }&para;<br>                },&para;<br>                "required": ["location"]&para;<br>            }&para;<br>        }],&para;<br>        "messages": [{"role": "user", "content": "What is the weather like in San Francisco?"}]&para;<br>    }'&para;<br>    ```&para;<br>&para;<br>    ```python Python&para;<br>    import anthropic&para;<br>&para;<br>    client = anthropic.Anthropic()&para;<br>&para;<br>    response = client.messages.create(&para;<br>        model="claude-opus-4-6",&para;<br>        max_tokens=1024,&para;<br>        tools=[&para;<br>            {&para;<br>                "name": "get_weather",&para;<br>                "description": "Get the current weather in a given location",&para;<br>                "input_schema": {&para;<br>                    "type": "object",&para;<br>                    "properties": {&para;<br>                        "location": {&para;<br>                            "type": "string",&para;<br>                            "description": "The city and state, e.g. San Francisco, CA",&para;<br>                        },&para;<br>                        "unit": {&para;<br>                            "type": "string",&para;<br>                            "enum": ["celsius", "fahrenheit"],&para;<br>                            "description": 'The unit of temperature, either "celsius" or "fahrenheit"',&para;<br>                        },&para;<br>                    },&para;<br>                    "required": ["location"],&para;<br>                },&para;<br>            }&para;<br>        ],&para;<br>        messages=[&para;<br>            {"role": "user", "content": "What is the weather like in San Francisco?"}&para;<br>        ],&para;<br>    )&para;<br>&para;<br>    print(response)&para;<br>    ```&para;<br>&para;<br>    ```java Java&para;<br>    import com.anthropic.client.AnthropicClient;&para;<br>    import com.anthropic.client.okhttp.AnthropicOkHttpClient;&para;<br>    import com.anthropic.core.JsonValue;&para;<br>    import com.anthropic.models.messages.Message;&para;<br>    import com.anthropic.models.messages.MessageCreateParams;&para;<br>    import com.anthropic.models.messages.Model;&para;<br>    import com.anthropic.models.messages.Tool;&para;<br>    import com.anthropic.models.messages.Tool.InputSchema;&para;<br>    import java.util.List;&para;<br>    import java.util.Map;&para;<br>&para;<br>    public class WeatherToolExample {&para;<br>&para;<br>      public static void main(String[] args) {&para;<br>        AnthropicClient client = AnthropicOkHttpClient.fromEnv();&para;<br>&para;<br>        InputSchema schema = InputSchema.builder()&para;<br>          .properties(&para;<br>            JsonValue.from(&para;<br>              Map.of(&para;<br>                "location",&para;<br>                Map.of(&para;<br>                  "type",&para;<br>                  "string",&para;<br>                  "description",&para;<br>                  "The city and state, e.g. San Francisco, CA"&para;<br>                ),&para;<br>                "unit",&para;<br>                Map.of(&para;<br>                  "type",&para;<br>                  "string",&para;<br>                  "enum",&para;<br>                  List.of("celsius", "fahrenheit"),&para;<br>                  "description",&para;<br>                  "The unit of temperature, either \"celsius\" or \"fahrenheit\""&para;<br>                )&para;<br>              )&para;<br>            )&para;<br>          )&para;<br>          .putAdditionalProperty("required", JsonValue.from(List.of("location")))&para;<br>          .build();&para;<br>&para;<br>        MessageCreateParams params = MessageCreateParams.builder()&para;<br>          .model(Model.CLAUDE_OPUS_4_0)&para;<br>          .maxTokens(1024)&para;<br>          .addTool(&para;<br>            Tool.builder()&para;<br>              .name("get_weather")&para;<br>              .description("Get the current weather in a given location")&para;<br>              .inputSchema(schema)&para;<br>              .build()&para;<br>          )&para;<br>          .addUserMessage("What is the weather like in San Francisco?")&para;<br>          .build();&para;<br>&para;<br>        Message message = client.messages().create(params);&para;<br>        System.out.println(message);&para;<br>      }&para;<br>    }&para;<br>    ```&para;<br>&para;<br>&lt;/CodeGroup&gt;&para;<br>&para;<br>Claude will return a response similar to:&para;<br>&para;<br>```json JSON&para;<br>{&para;<br>  "id": "msg_01Aq9w938a90dw8q",&para;<br>  "model": "claude-opus-4-6",&para;<br>  "stop_reason": "tool_use",&para;<br>  "role": "assistant",&para;<br>  "content": [&para;<br>    {&para;<br>      "type": "text",&para;<br>      "text": "I'll check the current weather in San Francisco for you."&para;<br>    },&para;<br>    {&para;<br>      "type": "tool_use",&para;<br>      "id": "toolu_01A09q90qw90lq917835lq9",&para;<br>      "name": "get_weather",&para;<br>      "input": {"location": "San Francisco, CA", "unit": "celsius"}&para;<br>    }&para;<br>  ]&para;<br>}&para;<br>```&para;<br>&para;<br>You would then need to execute the `get_weather` function with the provided input, and return the result in a new `user` message:&para;<br>&para;<br>&lt;CodeGroup&gt;&para;<br>    ```bash Shell&para;<br>    curl https://api.anthropic.com/v1/messages \&para;<br>         --header "x-api-key: $ANTHROPIC_API_KEY" \&para;<br>         --header "anthropic-version: 2023-06-01" \&para;<br>         --header "content-type: application/json" \&para;<br>         --data \&para;<br>    '{&para;<br>        "model": "claude-opus-4-6",&para;<br>        "max_tokens": 1024,&para;<br>        "tools": [&para;<br>            {&para;<br>                "name": "get_weather",&para;<br>                "description": "Get the current weather in a given location",&para;<br>                "input_schema": {&para;<br>                    "type": "object",&para;<br>                    "properties": {&para;<br>                        "location": {&para;<br>                            "type": "string",&para;<br>                            "description": "The city and state, e.g. San Francisco, CA"&para;<br>                        },&para;<br>                        "unit": {&para;<br>                            "type": "string",&para;<br>                            "enum": ["celsius", "fahrenheit"],&para;<br>                            "description": "The unit of temperature, either \"celsius\" or \"fahrenheit\""&para;<br>                        }&para;<br>                    },&para;<br>                    "required": ["location"]&para;<br>                }&para;<br>            }&para;<br>        ],&para;<br>        "messages": [&para;<br>            {&para;<br>                "role": "user",&para;<br>                "content": "What is the weather like in San Francisco?"&para;<br>            },&para;<br>            {&para;<br>                "role": "assistant",&para;<br>                "content": [&para;<br>                    {&para;<br>                        "type": "text",&para;<br>                        "text": "I'll check the current weather in San Francisco for you."&para;<br>                    },&para;<br>                    {&para;<br>                        "type": "tool_use",&para;<br>                        "id": "toolu_01A09q90qw90lq917835lq9",&para;<br>                        "name": "get_weather",&para;<br>                        "input": {&para;<br>                            "location": "San Francisco, CA",&para;<br>                            "unit": "celsius"&para;<br>                        }&para;<br>                    }&para;<br>                ]&para;<br>            },&para;<br>            {&para;<br>                "role": "user",&para;<br>                "content": [&para;<br>                    {&para;<br>                        "type": "tool_result",&para;<br>                        "tool_use_id": "toolu_01A09q90qw90lq917835lq9",&para;<br>                        "content": "15 degrees"&para;<br>                    }&para;<br>                ]&para;<br>            }&para;<br>        ]&para;<br>    }'&para;<br>    ```&para;<br>&para;<br>    ```python Python&para;<br>    response = client.messages.create(&para;<br>        model="claude-opus-4-6",&para;<br>        max_tokens=1024,&para;<br>        tools=[&para;<br>            {&para;<br>                "name": "get_weather",&para;<br>                "description": "Get the current weather in a given location",&para;<br>                "input_schema": {&para;<br>                    "type": "object",&para;<br>                    "properties": {&para;<br>                        "location": {&para;<br>                            "type": "string",&para;<br>                            "description": "The city and state, e.g. San Francisco, CA",&para;<br>                        },&para;<br>                        "unit": {&para;<br>                            "type": "string",&para;<br>                            "enum": ["celsius", "fahrenheit"],&para;<br>                            "description": "The unit of temperature, either 'celsius' or 'fahrenheit'",&para;<br>                        },&para;<br>                    },&para;<br>                    "required": ["location"],&para;<br>                },&para;<br>            }&para;<br>        ],&para;<br>        messages=[&para;<br>            {"role": "user", "content": "What's the weather like in San Francisco?"},&para;<br>            {&para;<br>                "role": "assistant",&para;<br>                "content": [&para;<br>                    {&para;<br>                        "type": "text",&para;<br>                        "text": "I'll check the current weather in San Francisco for you.",&para;<br>                    },&para;<br>                    {&para;<br>                        "type": "tool_use",&para;<br>                        "id": "toolu_01A09q90qw90lq917835lq9",&para;<br>                        "name": "get_weather",&para;<br>                        "input": {"location": "San Francisco, CA", "unit": "celsius"},&para;<br>                    },&para;<br>                ],&para;<br>            },&para;<br>            {&para;<br>                "role": "user",&para;<br>                "content": [&para;<br>                    {&para;<br>                        "type": "tool_result",&para;<br>                        "tool_use_id": "toolu_01A09q90qw90lq917835lq9",  # from the API response&para;<br>                        "content": "65 degrees",  # from running your tool&para;<br>                    }&para;<br>                ],&para;<br>            },&para;<br>        ],&para;<br>    )&para;<br>&para;<br>    print(response)&para;<br>    ```&para;<br>&para;<br>   ```java Java&para;<br>   import com.anthropic.client.AnthropicClient;&para;<br>   import com.anthropic.client.okhttp.AnthropicOkHttpClient;&para;<br>   import com.anthropic.core.JsonValue;&para;<br>   import com.anthropic.models.messages.*;&para;<br>   import com.anthropic.models.messages.Tool.InputSchema;&para;<br>   import java.util.List;&para;<br>   import java.util.Map;&para;<br>&para;<br>   public class ToolConversationExample {&para;<br>&para;<br>     public static void main(String[] args) {&para;<br>       AnthropicClient client = AnthropicOkHttpClient.fromEnv();&para;<br>&para;<br>       InputSchema schema = InputSchema.builder()&para;<br>         .properties(&para;<br>           JsonValue.from(&para;<br>             Map.of(&para;<br>               "location",&para;<br>               Map.of(&para;<br>                 "type",&para;<br>                 "string",&para;<br>                 "description",&para;<br>                 "The city and state, e.g. San Francisco, CA"&para;<br>               ),&para;<br>               "unit",&para;<br>               Map.of(&para;<br>                 "type",&para;<br>                 "string",&para;<br>                 "enum",&para;<br>                 List.of("celsius", "fahrenheit"),&para;<br>                 "description",&para;<br>                 "The unit of temperature, either \"celsius\" or \"fahrenheit\""&para;<br>               )&para;<br>             )&para;<br>           )&para;<br>         )&para;<br>         .putAdditionalProperty("required", JsonValue.from(List.of("location")))&para;<br>         .build();&para;<br>&para;<br>       MessageCreateParams params = MessageCreateParams.builder()&para;<br>         .model(Model.CLAUDE_OPUS_4_0)&para;<br>         .maxTokens(1024)&para;<br>         .addTool(&para;<br>           Tool.builder()&para;<br>             .name("get_weather")&para;<br>             .description("Get the current weather in a given location")&para;<br>             .inputSchema(schema)&para;<br>             .build()&para;<br>         )&para;<br>         .addUserMessage("What is the weather like in San Francisco?")&para;<br>         .addAssistantMessageOfBlockParams(&para;<br>           List.of(&para;<br>             ContentBlockParam.ofText(&para;<br>               TextBlockParam.builder()&para;<br>                 .text("I'll check the current weather in San Francisco for you.")&para;<br>                 .build()&para;<br>             ),&para;<br>             ContentBlockParam.ofToolUse(&para;<br>               ToolUseBlockParam.builder()&para;<br>                 .id("toolu_01A09q90qw90lq917835lq9")&para;<br>                 .name("get_weather")&para;<br>                 .input(&para;<br>                   JsonValue.from(Map.of("location", "San Francisco, CA", "unit", "celsius"))&para;<br>                 )&para;<br>                 .build()&para;<br>             )&para;<br>           )&para;<br>         )&para;<br>         .addUserMessageOfBlockParams(&para;<br>           List.of(&para;<br>             ContentBlockParam.ofToolResult(&para;<br>               ToolResultBlockParam.builder()&para;<br>                 .toolUseId("toolu_01A09q90qw90lq917835lq9")&para;<br>                 .content("15 degrees")&para;<br>                 .build()&para;<br>             )&para;<br>           )&para;<br>         )&para;<br>         .build();&para;<br>&para;<br>       Message message = client.messages().create(params);&para;<br>       System.out.println(message);&para;<br>     }&para;<br>   }&para;<br>   ```&para;<br>&para;<br>&lt;/CodeGroup&gt;&para;<br>This will print Claude's final response, incorporating the weather data:&para;<br>&para;<br>```json JSON&para;<br>{&para;<br>  "id": "msg_01Aq9w938a90dw8q",&para;<br>  "model": "claude-opus-4-6",&para;<br>  "stop_reason": "stop_sequence",&para;<br>  "role": "assistant",&para;<br>  "content": [&para;<br>    {&para;<br>      "type": "text",&para;<br>      "text": "The current weather in San Francisco is 15 degrees Celsius (59 degrees Fahrenheit). It's a cool day in the city by the bay!"&para;<br>    }&para;<br>  ]&para;<br>}&para;<br>```&para;<br>&para;<br>&lt;/section&gt;&para;<br>&lt;section title="Parallel tool use"&gt;&para;<br>&para;<br>Claude can call multiple tools in parallel within a single response, which is useful for tasks that require multiple independent operations. When using parallel tools, all `tool_use` blocks are included in a single assistant message, and all corresponding `tool_result` blocks must be provided in the subsequent user message.&para;<br>&para;<br>&lt;Note&gt;&para;<br>**Important**: Tool results must be formatted correctly to avoid API errors and ensure Claude continues using parallel tools. See the [implementation guide](/docs/en/agents-and-tools/tool-use/implement-tool-use#parallel-tool-use) for detailed formatting requirements and complete code examples.&para;<br>&lt;/Note&gt;&para;<br>&para;<br>For comprehensive examples, test scripts, and best practices for implementing parallel tool calls, see the [parallel tool use section](/docs/en/agents-and-tools/tool-use/implement-tool-use#parallel-tool-use) in the implementation guide.&para;<br>&para;<br>&lt;/section&gt;&para;<br>&lt;section title="Multiple tool example"&gt;&para;<br>&para;<br>You can provide Claude with multiple tools to choose from in a single request. Here's an example with both a `get_weather` and a `get_time` tool, along with a user query that asks for both.&para;<br>&para;<br>&lt;CodeGroup&gt;&para;<br>    ```bash Shell&para;<br>    curl https://api.anthropic.com/v1/messages \&para;<br>         --header "x-api-key: $ANTHROPIC_API_KEY" \&para;<br>         --header "anthropic-version: 2023-06-01" \&para;<br>         --header "content-type: application/json" \&para;<br>         --data \&para;<br>    '{&para;<br>        "model": "claude-opus-4-6",&para;<br>        "max_tokens": 1024,&para;<br>        "tools": [{&para;<br>            "name": "get_weather",&para;<br>            "description": "Get the current weather in a given location",&para;<br>            "input_schema": {&para;<br>                "type": "object",&para;<br>                "properties": {&para;<br>                    "location": {&para;<br>                        "type": "string",&para;<br>                        "description": "The city and state, e.g. San Francisco, CA"&para;<br>                    },&para;<br>                    "unit": {&para;<br>                        "type": "string",&para;<br>                        "enum": ["celsius", "fahrenheit"],&para;<br>                        "description": "The unit of temperature, either 'celsius' or 'fahrenheit'"&para;<br>                    }&para;<br>                },&para;<br>                "required": ["location"]&para;<br>            }&para;<br>        },&para;<br>        {&para;<br>            "name": "get_time",&para;<br>            "description": "Get the current time in a given time zone",&para;<br>            "input_schema": {&para;<br>                "type": "object",&para;<br>                "properties": {&para;<br>                    "timezone": {&para;<br>                        "type": "string",&para;<br>                        "description": "The IANA time zone name, e.g. America/Los_Angeles"&para;<br>                    }&para;<br>                },&para;<br>                "required": ["timezone"]&para;<br>            }&para;<br>        }],&para;<br>        "messages": [{&para;<br>            "role": "user",&para;<br>            "content": "What is the weather like right now in New York? Also what time is it there?"&para;<br>        }]&para;<br>    }'&para;<br>    ```&para;<br>&para;<br>    ```python Python&para;<br>    import anthropic&para;<br>&para;<br>    client = anthropic.Anthropic()&para;<br>&para;<br>    response = client.messages.create(&para;<br>        model="claude-opus-4-6",&para;<br>        max_tokens=1024,&para;<br>        tools=[&para;<br>            {&para;<br>                "name": "get_weather",&para;<br>                "description": "Get the current weather in a given location",&para;<br>                "input_schema": {&para;<br>                    "type": "object",&para;<br>                    "properties": {&para;<br>                        "location": {&para;<br>                            "type": "string",&para;<br>                            "description": "The city and state, e.g. San Francisco, CA",&para;<br>                        },&para;<br>                        "unit": {&para;<br>                            "type": "string",&para;<br>                            "enum": ["celsius", "fahrenheit"],&para;<br>                            "description": "The unit of temperature, either 'celsius' or 'fahrenheit'",&para;<br>                        },&para;<br>                    },&para;<br>                    "required": ["location"],&para;<br>                },&para;<br>            },&para;<br>            {&para;<br>                "name": "get_time",&para;<br>                "description": "Get the current time in a given time zone",&para;<br>                "input_schema": {&para;<br>                    "type": "object",&para;<br>                    "properties": {&para;<br>                        "timezone": {&para;<br>                            "type": "string",&para;<br>                            "description": "The IANA time zone name, e.g. America/Los_Angeles",&para;<br>                        }&para;<br>                    },&para;<br>                    "required": ["timezone"],&para;<br>                },&para;<br>            },&para;<br>        ],&para;<br>        messages=[&para;<br>            {&para;<br>                "role": "user",&para;<br>                "content": "What is the weather like right now in New York? Also what time is it there?",&para;<br>            }&para;<br>        ],&para;<br>    )&para;<br>    print(response)&para;<br>    ```&para;<br>&para;<br>    ```java Java&para;<br>    import com.anthropic.client.AnthropicClient;&para;<br>    import com.anthropic.client.okhttp.AnthropicOkHttpClient;&para;<br>    import com.anthropic.core.JsonValue;&para;<br>    import com.anthropic.models.messages.Message;&para;<br>    import com.anthropic.models.messages.MessageCreateParams;&para;<br>    import com.anthropic.models.messages.Model;&para;<br>    import com.anthropic.models.messages.Tool;&para;<br>    import com.anthropic.models.messages.Tool.InputSchema;&para;<br>    import java.util.List;&para;<br>    import java.util.Map;&para;<br>&para;<br>    public class MultipleToolsExample {&para;<br>&para;<br>      public static void main(String[] args) {&para;<br>        AnthropicClient client = AnthropicOkHttpClient.fromEnv();&para;<br>&para;<br>        // Weather tool schema&para;<br>        InputSchema weatherSchema = InputSchema.builder()&para;<br>          .properties(&para;<br>            JsonValue.from(&para;<br>              Map.of(&para;<br>                "location",&para;<br>                Map.of(&para;<br>                  "type",&para;<br>                  "string",&para;<br>                  "description",&para;<br>                  "The city and state, e.g. San Francisco, CA"&para;<br>                ),&para;<br>                "unit",&para;<br>                Map.of(&para;<br>                  "type",&para;<br>                  "string",&para;<br>                  "enum",&para;<br>                  List.of("celsius", "fahrenheit"),&para;<br>                  "description",&para;<br>                  "The unit of temperature, either \"celsius\" or \"fahrenheit\""&para;<br>                )&para;<br>              )&para;<br>            )&para;<br>          )&para;<br>          .putAdditionalProperty("required", JsonValue.from(List.of("location")))&para;<br>          .build();&para;<br>&para;<br>        // Time tool schema&para;<br>        InputSchema timeSchema = InputSchema.builder()&para;<br>          .properties(&para;<br>            JsonValue.from(&para;<br>              Map.of(&para;<br>                "timezone",&para;<br>                Map.of(&para;<br>                  "type",&para;<br>                  "string",&para;<br>                  "description",&para;<br>                  "The IANA time zone name, e.g. America/Los_Angeles"&para;<br>                )&para;<br>              )&para;<br>            )&para;<br>          )&para;<br>          .putAdditionalProperty("required", JsonValue.from(List.of("timezone")))&para;<br>          .build();&para;<br>&para;<br>        MessageCreateParams params = MessageCreateParams.builder()&para;<br>          .model(Model.CLAUDE_OPUS_4_0)&para;<br>          .maxTokens(1024)&para;<br>          .addTool(&para;<br>            Tool.builder()&para;<br>              .name("get_weather")&para;<br>              .description("Get the current weather in a given location")&para;<br>              .inputSchema(weatherSchema)&para;<br>              .build()&para;<br>          )&para;<br>          .addTool(&para;<br>            Tool.builder()&para;<br>              .name("get_time")&para;<br>              .description("Get the current time in a given time zone")&para;<br>              .inputSchema(timeSchema)&para;<br>              .build()&para;<br>          )&para;<br>          .addUserMessage(&para;<br>            "What is the weather like right now in New York? Also what time is it there?"&para;<br>          )&para;<br>          .build();&para;<br>&para;<br>        Message message = client.messages().create(params);&para;<br>        System.out.println(message);&para;<br>      }&para;<br>    }&para;<br>    ```&para;<br>&para;<br>&lt;/CodeGroup&gt;&para;<br>&para;<br>In this case, Claude may either:&para;<br>- Use the tools sequentially (one at a time), calling `get_weather` first, then `get_time` after receiving the weather result&para;<br>- Use parallel tool calls, outputting multiple `tool_use` blocks in a single response when the operations are independent&para;<br>&para;<br>When Claude makes parallel tool calls, you must return all tool results in a single `user` message, with each result in its own `tool_result` block.&para;<br>&para;<br>&lt;/section&gt;&para;<br>&lt;section title="Missing information"&gt;&para;<br>&para;<br>If the user's prompt doesn't include enough information to fill all the required parameters for a tool, Claude Opus is much more likely to recognize that a parameter is missing and ask for it. Claude Sonnet may ask, especially when prompted to think before outputting a tool request. But it may also do its best to infer a reasonable value.&para;<br>&para;<br>For example, using the `get_weather` tool above, if you ask Claude "What's the weather?" without specifying a location, Claude, particularly Claude Sonnet, may make a guess about tools inputs:&para;<br>&para;<br>```json JSON&para;<br>{&para;<br>  "type": "tool_use",&para;<br>  "id": "toolu_01A09q90qw90lq917835lq9",&para;<br>  "name": "get_weather",&para;<br>  "input": {"location": "New York, NY", "unit": "fahrenheit"}&para;<br>}&para;<br>```&para;<br>&para;<br>This behavior is not guaranteed, especially for more ambiguous prompts and for less intelligent models. If Claude Opus doesn't have enough context to fill in the required parameters, it is far more likely respond with a clarifying question instead of making a tool call.&para;<br>&para;<br>&lt;/section&gt;&para;<br>&lt;section title="Sequential tools"&gt;&para;<br>&para;<br>Some tasks may require calling multiple tools in sequence, using the output of one tool as the input to another. In such a case, Claude will call one tool at a time. If prompted to call the tools all at once, Claude is likely to guess parameters for tools further downstream if they are dependent on tool results for tools further upstream.&para;<br>&para;<br>Here's an example of using a `get_location` tool to get the user's location, then passing that location to the `get_weather` tool:&para;<br>&para;<br>&lt;CodeGroup&gt;&para;<br>    ```bash Shell&para;<br>    curl https://api.anthropic.com/v1/messages \&para;<br>         --header "x-api-key: $ANTHROPIC_API_KEY" \&para;<br>         --header "anthropic-version: 2023-06-01" \&para;<br>         --header "content-type: application/json" \&para;<br>         --data \&para;<br>    '{&para;<br>        "model": "claude-opus-4-6",&para;<br>        "max_tokens": 1024,&para;<br>        "tools": [&para;<br>            {&para;<br>                "name": "get_location",&para;<br>                "description": "Get the current user location based on their IP address. This tool has no parameters or arguments.",&para;<br>                "input_schema": {&para;<br>                    "type": "object",&para;<br>                    "properties": {}&para;<br>                }&para;<br>            },&para;<br>            {&para;<br>                "name": "get_weather",&para;<br>                "description": "Get the current weather in a given location",&para;<br>                "input_schema": {&para;<br>                    "type": "object",&para;<br>                    "properties": {&para;<br>                        "location": {&para;<br>                            "type": "string",&para;<br>                            "description": "The city and state, e.g. San Francisco, CA"&para;<br>                        },&para;<br>                        "unit": {&para;<br>                            "type": "string",&para;<br>                            "enum": ["celsius", "fahrenheit"],&para;<br>                            "description": "The unit of temperature, either 'celsius' or 'fahrenheit'"&para;<br>                        }&para;<br>                    },&para;<br>                    "required": ["location"]&para;<br>                }&para;<br>            }&para;<br>        ],&para;<br>        "messages": [{&para;<br>            "role": "user",&para;<br>            "content": "What is the weather like where I am?"&para;<br>        }]&para;<br>    }'&para;<br>    ```&para;<br>&para;<br>    ```python Python&para;<br>    response = client.messages.create(&para;<br>        model="claude-opus-4-6",&para;<br>        max_tokens=1024,&para;<br>        tools=[&para;<br>            {&para;<br>                "name": "get_location",&para;<br>                "description": "Get the current user location based on their IP address. This tool has no parameters or arguments.",&para;<br>                "input_schema": {"type": "object", "properties": {}},&para;<br>            },&para;<br>            {&para;<br>                "name": "get_weather",&para;<br>                "description": "Get the current weather in a given location",&para;<br>                "input_schema": {&para;<br>                    "type": "object",&para;<br>                    "properties": {&para;<br>                        "location": {&para;<br>                            "type": "string",&para;<br>                            "description": "The city and state, e.g. San Francisco, CA",&para;<br>                        },&para;<br>                        "unit": {&para;<br>                            "type": "string",&para;<br>                            "enum": ["celsius", "fahrenheit"],&para;<br>                            "description": "The unit of temperature, either 'celsius' or 'fahrenheit'",&para;<br>                        },&para;<br>                    },&para;<br>                    "required": ["location"],&para;<br>                },&para;<br>            },&para;<br>        ],&para;<br>        messages=[{"role": "user", "content": "What's the weather like where I am?"}],&para;<br>    )&para;<br>    ```&para;<br>&para;<br>    ```java Java&para;<br>    import com.anthropic.client.AnthropicClient;&para;<br>    import com.anthropic.client.okhttp.AnthropicOkHttpClient;&para;<br>    import com.anthropic.core.JsonValue;&para;<br>    import com.anthropic.models.messages.Message;&para;<br>    import com.anthropic.models.messages.MessageCreateParams;&para;<br>    import com.anthropic.models.messages.Model;&para;<br>    import com.anthropic.models.messages.Tool;&para;<br>    import com.anthropic.models.messages.Tool.InputSchema;&para;<br>    import java.util.List;&para;<br>    import java.util.Map;&para;<br>&para;<br>    public class EmptySchemaToolExample {&para;<br>&para;<br>      public static void main(String[] args) {&para;<br>        AnthropicClient client = AnthropicOkHttpClient.fromEnv();&para;<br>&para;<br>        // Empty schema for location tool&para;<br>        InputSchema locationSchema = InputSchema.builder()&para;<br>          .properties(JsonValue.from(Map.of()))&para;<br>          .build();&para;<br>&para;<br>        // Weather tool schema&para;<br>        InputSchema weatherSchema = InputSchema.builder()&para;<br>          .properties(&para;<br>            JsonValue.from(&para;<br>              Map.of(&para;<br>                "location",&para;<br>                Map.of(&para;<br>                  "type",&para;<br>                  "string",&para;<br>                  "description",&para;<br>                  "The city and state, e.g. San Francisco, CA"&para;<br>                ),&para;<br>                "unit",&para;<br>                Map.of(&para;<br>                  "type",&para;<br>                  "string",&para;<br>                  "enum",&para;<br>                  List.of("celsius", "fahrenheit"),&para;<br>                  "description",&para;<br>                  "The unit of temperature, either \"celsius\" or \"fahrenheit\""&para;<br>                )&para;<br>              )&para;<br>            )&para;<br>          )&para;<br>          .putAdditionalProperty("required", JsonValue.from(List.of("location")))&para;<br>          .build();&para;<br>&para;<br>        MessageCreateParams params = MessageCreateParams.builder()&para;<br>          .model(Model.CLAUDE_OPUS_4_0)&para;<br>          .maxTokens(1024)&para;<br>          .addTool(&para;<br>            Tool.builder()&para;<br>              .name("get_location")&para;<br>              .description(&para;<br>                "Get the current user location based on their IP address. This tool has no parameters or arguments."&para;<br>              )&para;<br>              .inputSchema(locationSchema)&para;<br>              .build()&para;<br>          )&para;<br>          .addTool(&para;<br>            Tool.builder()&para;<br>              .name("get_weather")&para;<br>              .description("Get the current weather in a given location")&para;<br>              .inputSchema(weatherSchema)&para;<br>              .build()&para;<br>          )&para;<br>          .addUserMessage("What is the weather like where I am?")&para;<br>          .build();&para;<br>&para;<br>        Message message = client.messages().create(params);&para;<br>        System.out.println(message);&para;<br>      }&para;<br>    }&para;<br>    ```&para;<br>&para;<br>&lt;/CodeGroup&gt;&para;<br>&para;<br>In this case, Claude would first call the `get_location` tool to get the user's location. After you return the location in a `tool_result`, Claude would then call `get_weather` with that location to get the final answer.&para;<br>&para;<br>The full conversation might look like:&para;<br>&para;<br>| Role      | Content                                                                                                                                                                                                                                 |&para;<br>| --------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |&para;<br>| User      | What's the weather like where I am?                                                                                                                                                                                                     |&para;<br>| Assistant | I'll find your current location first, then check the weather there. \[Tool use for get_location\] |&para;<br>| User      | \[Tool result for get_location with matching id and result of San Francisco, CA\]                                                                                                                                                       |&para;<br>| Assistant | \[Tool use for get_weather with the following input\]\{ "location": "San Francisco, CA", "unit": "fahrenheit" }                                                                                                                         |&para;<br>| User      | \[Tool result for get_weather with matching id and result of "59Â°F (15Â°C), mostly cloudy"\]                                                                                                                                             |&para;<br>| Assistant | Based on your current location in San Francisco, CA, the weather right now is 59Â°F (15Â°C) and mostly cloudy. It's a fairly cool and overcast day in the city. You may want to bring a light jacket if you're heading outside.           |&para;<br>&para;<br>This example demonstrates how Claude can chain together multiple tool calls to answer a question that requires gathering data from different sources. The key steps are:&para;<br>&para;<br>1. Claude first realizes it needs the user's location to answer the weather question, so it calls the `get_location` tool.&para;<br>2. The user (i.e. the client code) executes the actual `get_location` function and returns the result "San Francisco, CA" in a `tool_result` block.&para;<br>3. With the location now known, Claude proceeds to call the `get_weather` tool, passing in "San Francisco, CA" as the `location` parameter (as well as a guessed `unit` parameter, as `unit` is not a required parameter).&para;<br>4. The user again executes the actual `get_weather` function with the provided arguments and returns the weather data in another `tool_result` block.&para;<br>5. Finally, Claude incorporates the weather data into a natural language response to the original question.&para;<br>&para;<br>&lt;/section&gt;&para;<br>&lt;section title="Chain of thought tool use"&gt;&para;<br>&para;<br>By default, Claude Opus is prompted to think before it answers a tool use query to best determine whether a tool is necessary, which tool to use, and the appropriate parameters. Claude Sonnet and Claude Haiku are prompted to try to use tools as much as possible and are more likely to call an unnecessary tool or infer missing parameters. To prompt Sonnet or Haiku to better assess the user query before making tool calls, the following prompt can be used:&para;<br>&para;<br>Chain of thought prompt&para;<br>&para;<br>`Answer the user's request using relevant tools (if they are available). Before calling a tool, do some analysis. First, think about which of the provided tools is the relevant tool to answer the user's request. Second, go through each of the required parameters of the relevant tool and determine if the user has directly provided or given enough information to infer a value. When deciding if the parameter can be inferred, carefully consider all the context to see if it supports a specific value. If all of the required parameters are present or can be reasonably inferred, proceed with the tool call. BUT, if one of the values for a required parameter is missing, DO NOT invoke the function (not even with fillers for the missing params) and instead, ask the user to provide the missing parameters. DO NOT ask for more information on optional parameters if it is not provided.&para;<br>`&para;<br>&para;<br>&lt;/section&gt;&para;<br>&para;<br>---&para;<br>&para;<br>## Pricing&para;<br>&para;<br>Tool use requests are priced based on:&para;<br>1. The total number of input tokens sent to the model (including in the `tools` parameter)&para;<br>2. The number of output tokens generated&para;<br>3. For server-side tools, additional usage-based pricing (e.g., web search charges per search performed)&para;<br>&para;<br>Client-side tools are priced the same as any other Claude API request, while server-side tools may incur additional charges based on their specific usage.&para;<br>&para;<br>The additional tokens from tool use come from:&para;<br>&para;<br>- The `tools` parameter in API requests (tool names, descriptions, and schemas)&para;<br>- `tool_use` content blocks in API requests and responses&para;<br>- `tool_result` content blocks in API requests&para;<br>&para;<br>When you use `tools`, we also automatically include a special system prompt for the model which enables tool use. The number of tool use tokens required for each model are listed below (excluding the additional tokens listed above). Note that the table assumes at least 1 tool is provided. If no `tools` are provided, then a tool choice of `none` uses 0 additional system prompt tokens.&para;<br>&para;<br>| Model                    | Tool choice                                          | Tool use system prompt token count          |&para;<br>|--------------------------|------------------------------------------------------|---------------------------------------------|&para;<br>| Claude Opus 4.6              | `auto`, `none`&lt;hr /&gt;`any`, `tool`   | 346 tokens&lt;hr /&gt;313 tokens |&para;<br>| Claude Opus 4.5            | `auto`, `none`&lt;hr /&gt;`any`, `tool`   | 346 tokens&lt;hr /&gt;313 tokens |&para;<br>| Claude Opus 4.1            | `auto`, `none`&lt;hr /&gt;`any`, `tool`   | 346 tokens&lt;hr /&gt;313 tokens |&para;<br>| Claude Opus 4            | `auto`, `none`&lt;hr /&gt;`any`, `tool`   | 346 tokens&lt;hr /&gt;313 tokens |&para;<br>| Claude Sonnet 4.6          | `auto`, `none`&lt;hr /&gt;`any`, `tool`   | 346 tokens&lt;hr /&gt;313 tokens |&para;<br>| Claude Sonnet 4.5          | `auto`, `none`&lt;hr /&gt;`any`, `tool`   | 346 tokens&lt;hr /&gt;313 tokens |&para;<br>| Claude Sonnet 4          | `auto`, `none`&lt;hr /&gt;`any`, `tool`   | 346 tokens&lt;hr /&gt;313 tokens |&para;<br>| Claude Sonnet 3.7 ([deprecated](/docs/en/about-claude/model-deprecations))        | `auto`, `none`&lt;hr /&gt;`any`, `tool`   | 346 tokens&lt;hr /&gt;313 tokens |&para;<br>| Claude Haiku 4.5         | `auto`, `none`&lt;hr /&gt;`any`, `tool`   | 346 tokens&lt;hr /&gt;313 tokens |&para;<br>| Claude Haiku 3.5         | `auto`, `none`&lt;hr /&gt;`any`, `tool`   | 264 tokens&lt;hr /&gt;340 tokens |&para;<br>| Claude Opus 3 ([deprecated](/docs/en/about-claude/model-deprecations))            | `auto`, `none`&lt;hr /&gt;`any`, `tool`   | 530 tokens&lt;hr /&gt;281 tokens |&para;<br>| Claude Sonnet 3          | `auto`, `none`&lt;hr /&gt;`any`, `tool`   | 159 tokens&lt;hr /&gt;235 tokens |&para;<br>| Claude Haiku 3           | `auto`, `none`&lt;hr /&gt;`any`, `tool`   | 264 tokens&lt;hr /&gt;340 tokens |&para;<br>&para;<br>These token counts are added to your normal input and output tokens to calculate the total cost of a request.&para;<br>&para;<br>Refer to the [models overview table](/docs/en/about-claude/models/overview#latest-models-comparison) for current per-model prices.&para;<br>&para;<br>When you send a tool use prompt, just like any other API request, the response will output both input and output token counts as part of the reported `usage` metrics.&para;<br>&para;<br>---&para;<br>&para;<br>## Next Steps&para;<br>&para;<br></span><ins style="background:#e6ffe6;">&lt;Tip&gt;&para;<br>Once your tool workflows grow beyond a handful of tools, explore [Advanced tool use](https://www.anthropic.com/engineering/advanced-tool-use) to learn how [tool search](/docs/en/agents-and-tools/tool-use/tool-search-tool) and [programmatic tool calling](/docs/en/agents-and-tools/tool-use/programmatic-tool-calling) scale tool orchestration to hundreds of tools without blowing up your context window.&para;<br>&lt;/Tip&gt;&para;<br>&para;<br></ins><span>Explore the repository of ready-to-implement tool use code examples in the cookbooks:&para;<br>&para;<br>&lt;CardGroup cols={3}&gt;&para;<br>  &lt;Card&para;<br>    title="Calculator Tool"&para;<br>    icon="calculator"&para;<br>    href="https://platform.claude.com/cookbook/tool-use-calculator-tool"&para;<br>  &gt;&para;<br>    Learn how to integrate a simple calculator tool with Claude for precise numerical computations.&para;<br>  &lt;/Card&gt;&para;<br>&para;<br>{" "}&para;<br>&lt;Card&para;<br>  title="Customer Service Agent"&para;<br>  icon="headset"&para;<br>  href="https://platform.claude.com/cookbook/tool-use-customer-service-agent"&para;<br>&gt;&para;<br>  Build a responsive customer service bot that leverages client tools to&para;<br>  enhance support.&para;<br>&lt;/Card&gt;&para;<br>&para;<br>  &lt;Card&para;<br>    title="JSON Extractor"&para;<br>    icon="code-brackets"&para;<br>    href="https://platform.claude.com/cookbook/tool-use-extracting-structured-json"&para;<br>  &gt;&para;<br>    See how Claude and tool use can extract structured data from unstructured text.&para;<br>  &lt;/Card&gt;&para;<br>&lt;/CardGroup&gt;</span></div>
        </div>

        <h2 style="margin-top: 2rem; margin-bottom: 1rem;">Unified Diff</h2>
        <pre><code>--- a/agents-and-tools/tool-use/overview.md
+++ b/agents-and-tools/tool-use/overview.md
@@ -2,7 +2,7 @@
 
 ---
 
-Claude is capable of interacting with tools and functions, allowing you to extend Claude&#39;s capabilities to perform a wider variety of tasks.
+Claude is capable of interacting with tools and functions, allowing you to extend Claude&#39;s capabilities to perform a wider variety of tasks. Each tool defines a contract: you specify what operations are available and what they return; Claude decides when and how to call them. Tool access is one of the highest-leverage primitives you can give an agent. On benchmarks like [LAB-Bench FigQA](https://lab-bench.org/) (scientific figure interpretation) and [SWE-bench](https://www.swebench.com/) (real-world software engineering), adding even simple tools produces outsized capability gains, often surpassing human expert baselines.
 
 &lt;Tip&gt;
   Learn everything you need to master tool use with Claude as part of the new [courses](https://anthropic.skilljar.com/)! Please
@@ -1209,6 +1209,10 @@
 
 ## Next Steps
 
+&lt;Tip&gt;
+Once your tool workflows grow beyond a handful of tools, explore [Advanced tool use](https://www.anthropic.com/engineering/advanced-tool-use) to learn how [tool search](/docs/en/agents-and-tools/tool-use/tool-search-tool) and [programmatic tool calling](/docs/en/agents-and-tools/tool-use/programmatic-tool-calling) scale tool orchestration to hundreds of tools without blowing up your context window.
+&lt;/Tip&gt;
+
 Explore the repository of ready-to-implement tool use code examples in the cookbooks:
 
 &lt;CardGroup cols={3}&gt;
</code></pre>
    </div>
</body>
</html>